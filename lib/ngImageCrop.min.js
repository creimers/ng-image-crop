!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ngImageCrop",[],t):"object"==typeof exports?exports.ngImageCrop=t():e.ngImageCrop=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(1);var r=n(5),a="ngImageCrop";t["default"]=a;var s=angular.module(a,[]),l=function(){function e(t,n){i(this,e),this.$element=n,this.$scope=t,this._initCroppie()}return o(e,[{key:"_initCroppie",value:function(){var e=this,t=function(t){e.c.result("canvas").then(function(t){e.$scope.$apply(function(){e.croppedImage=t})})};this.croppieOptions={viewport:{width:this.width,height:this.height,type:this.type},update:t},this.c=new r(this.$element[0],this.croppieOptions)}},{key:"originalImage",set:function(e){var t=this;this._originalImage=e,void 0!==this._originalImage&&void 0!==this.c&&!function(){var e=new FileReader;e.onload=function(){t.c.bind(e.result)},e.readAsDataURL(t._originalImage)}()},get:function(){return this._originalImage}}]),e}(),c=function u(){i(this,u),this.restrict="E",this.scope={originalImage:"<",croppedImage:"=",type:"@",height:"@",width:"@"},this.bindToController=!0,this.controller=l,this.controllerAs="$ctrl"};s.directive("imageCrop",function(){return new c}),s.exports=t["default"]},function(e,t,n){var i=n(2);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".croppie-container{padding:30px}.croppie-container .cr-image{z-index:-1;position:absolute;top:0;left:0;transform-origin:0 0;max-width:none}.croppie-container .cr-boundary{position:relative;overflow:hidden;margin:0 auto;z-index:1}.croppie-container .cr-viewport{position:absolute;border:2px solid #fff;margin:auto;top:0;bottom:0;right:0;left:0;box-shadow:0 0 0 899px rgba(0,0,0,.5);z-index:0}.croppie-container .cr-vp-circle{border-radius:50%}.croppie-container .cr-overlay{z-index:1;position:absolute;cursor:move}.croppie-container .cr-slider-wrap{width:75%;margin:0 auto;margin-top:25px;text-align:center}.croppie-result{position:relative;overflow:hidden}.croppie-result img{position:absolute}.cr-slider{-webkit-appearance:none;width:300px;max-width:100%}.cr-slider::-webkit-slider-runnable-track{width:100%;height:3px;background:rgba(0,0,0,.5);border:0;border-radius:3px}.cr-slider::-webkit-slider-thumb{-webkit-appearance:none;border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:-6px}.cr-slider:focus{outline:none}.cr-slider::-moz-range-track{width:100%;height:3px;background:rgba(0,0,0,.5);border:0;border-radius:3px}.cr-slider::-moz-range-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:-6px}.cr-slider:-moz-focusring{outline:1px solid #fff;outline-offset:-1px}.cr-slider::-ms-track{width:300px;height:5px;background:transparent;border-color:transparent;border-width:6px 0;color:transparent}.cr-slider::-ms-fill-lower,.cr-slider::-ms-fill-upper{background:rgba(0,0,0,.5);border-radius:10px}.cr-slider::-ms-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#ddd}.cr-slider:focus::-ms-fill-lower,.cr-slider:focus::-ms-fill-upper{background:rgba(0,0,0,.5)}.cr-rotate-controls{position:absolute;bottom:5px;left:5px;z-index:1}.cr-rotate-controls button{border:0;background:none}.cr-rotate-controls i:before{display:inline-block;font-style:normal;font-weight:900;font-size:22px}.cr-rotate-l i:before{content:'\\21BA'}.cr-rotate-r i:before{content:'\\21BB'}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=d[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(c(i.parts[r],t));d[i.id]={id:i.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],a=o[1],s=o[2],l=o[3],c={css:a,media:s,sourceMap:l};n[r]?n[r].parts.push(c):t.push(n[r]={id:r,parts:[c]})}return t}function r(e,t){var n=g(),i=y[y.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=w++;n=v||(v=s(t)),i=u.bind(null,n,r,!1),o=u.bind(null,n,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=h.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=p.bind(null,n),o=function(){a(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function u(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function p(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var d={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,w=0,y=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var s=n[a],l=d[s.id];l.refs--,r.push(l)}if(e){var c=o(e);i(c,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var i,o,r;(function(n){!function(n,a){o=[t],i=a,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(t){function i(e){if(e in U)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=P.length;n--;)if(e=P[n]+t,e in U)return e}function o(e,t){e=e||{};for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},arguments.callee(e[n],t[n])):e[n]=t[n];return e}function r(e,t,n){var i;return function(){var o=this,r=arguments,a=function(){i=null,n||e.apply(o,r)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(o,r)}}function a(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function s(e,t,n){if("string"==typeof t){var i=t;t={},t[i]=n}for(var o in t)e.style[o]=t[o]}function l(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}function u(e,t){var n,i=t||new Image;return i.src===e?n=new Promise(function(e,t){e(i)}):(n=new Promise(function(t,n){"http"===e.substring(0,4).toLowerCase()&&i.setAttribute("crossOrigin","anonymous"),i.onload=function(){setTimeout(function(){t(i)},1)}}),i.src=e),i.style.opacity=0,n}function p(e,t){window.EXIF||t(0),EXIF.getData(e,function(){var e=EXIF.getTag(this,"Orientation");t(e)})}function h(e,t,n){var i=t.width,o=t.height,r=e.getContext("2d");switch(e.width=t.width,e.height=t.height,r.save(),n){case 2:r.translate(i,0),r.scale(-1,1);break;case 3:r.translate(i,o),r.rotate(180*Math.PI/180);break;case 4:r.translate(0,o),r.scale(1,-1);break;case 5:e.width=o,e.height=i,r.rotate(90*Math.PI/180),r.scale(1,-1);break;case 6:e.width=o,e.height=i,r.rotate(90*Math.PI/180),r.translate(0,-o);break;case 7:e.width=o,e.height=i,r.rotate(-90*Math.PI/180),r.translate(-i,o),r.scale(1,-1);break;case 8:e.width=o,e.height=i,r.translate(0,i),r.rotate(-90*Math.PI/180)}r.drawImage(t,0,0,i,o),r.restore()}function d(){var e,t,n,i,o=this,r="croppie-container",a=o.options.viewport.type?"cr-vp-"+o.options.viewport.type:null;o.options.useCanvas=o.options.enableOrientation||f.call(o),o.data={},o.elements={},e=o.elements.boundary=document.createElement("div"),n=o.elements.viewport=document.createElement("div"),t=o.elements.img=document.createElement("img"),i=o.elements.overlay=document.createElement("div"),o.options.useCanvas?(o.elements.canvas=document.createElement("canvas"),o.elements.preview=o.elements.canvas):o.elements.preview=o.elements.img,l(e,"cr-boundary"),s(e,{width:o.options.boundary.width+"px",height:o.options.boundary.height+"px"}),l(n,"cr-viewport"),a&&l(n,a),s(n,{width:o.options.viewport.width+"px",height:o.options.viewport.height+"px"}),l(o.elements.preview,"cr-image"),l(i,"cr-overlay"),o.element.appendChild(e),e.appendChild(o.elements.preview),e.appendChild(n),e.appendChild(i),l(o.element,r),o.options.customClass&&l(o.element,o.options.customClass),b.call(this),o.options.enableZoom&&g.call(o)}function f(){return(this.options.enableExif||this.options.exif)&&window.EXIF}function m(e){this.options.enableZoom&&(this.elements.zoomer.value=j(e,4))}function g(){function e(){v.call(n,{value:parseFloat(o.value),origin:new H(n.elements.preview),viewportRect:n.elements.viewport.getBoundingClientRect(),transform:D.parse(n.elements.preview)})}function t(t){var i,o;i=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,o=n._currentZoom+i,t.preventDefault(),m.call(n,o),e()}var n=this,i=n.elements.zoomerWrap=document.createElement("div"),o=n.elements.zoomer=document.createElement("input");l(i,"cr-slider-wrap"),l(o,"cr-slider"),o.type="range",o.step="0.01",o.value=1,o.style.display=n.options.showZoomer?"":"none",n.element.appendChild(i),i.appendChild(o),n._currentZoom=1,n.elements.zoomer.addEventListener("input",e),n.elements.zoomer.addEventListener("change",e),n.options.mouseWheelZoom&&(n.elements.boundary.addEventListener("mousewheel",t),n.elements.boundary.addEventListener("DOMMouseScroll",t))}function v(e){var t=this,n=e?e.transform:D.parse(t.elements.preview),i=e?e.viewportRect:t.elements.viewport.getBoundingClientRect(),o=e?e.origin:new H(t.elements.preview);if(t._currentZoom=e?e.value:t._currentZoom,n.scale=t._currentZoom,t.options.enforceBoundary){var r=w.call(t,i),a=r.translate,l=r.origin;n.x>=a.maxX&&(o.x=l.minX,n.x=a.maxX),n.x<=a.minX&&(o.x=l.maxX,n.x=a.minX),n.y>=a.maxY&&(o.y=l.minY,n.y=a.maxY),n.y<=a.minY&&(o.y=l.maxY,n.y=a.minY)}var c={};c[z]=n.toString(),c[Z]=o.toString(),s(t.elements.preview,c),q.call(t),C.call(t)}function w(e){var t=this,n=t._currentZoom,i=e.width,o=e.height,r=t.options.boundary.width/2,a=t.options.boundary.height/2,s=t.elements.preview.getBoundingClientRect(),l=s.width,c=s.height,u=i/2,p=o/2,h=-1*(u/n-r),d=h-(l*(1/n)-i*(1/n)),f=-1*(p/n-a),m=f-(c*(1/n)-o*(1/n)),g=1/n*u,v=l*(1/n)-g,w=1/n*p,y=c*(1/n)-w;return{translate:{maxX:h,minX:d,maxY:f,minY:m},origin:{maxX:v,minX:g,maxY:y,minY:w}}}function y(){var e=this,t=e._currentZoom,n=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),o=D.parse(e.elements.preview.style[z]),r=new H(e.elements.preview),a=i.top-n.top+i.height/2,l=i.left-n.left+i.width/2,c={},u={};c.y=a/t,c.x=l/t,u.y=(c.y-r.y)*(1-t),u.x=(c.x-r.x)*(1-t),o.x-=u.x,o.y-=u.y;var p={};p[Z]=c.x+"px "+c.y+"px",p[z]=o.toString(),s(e.elements.preview,p)}function b(){function e(e){if(e.preventDefault(),!u){if(u=!0,i=e.pageX,o=e.pageY,e.touches){var r=e.touches[0];i=r.pageX,o=r.pageY}transform=D.parse(c.elements.preview),window.addEventListener("mousemove",t),window.addEventListener("touchmove",t),window.addEventListener("mouseup",n),window.addEventListener("touchend",n),document.body.style[Y]="none",l=c.elements.viewport.getBoundingClientRect()}}function t(e){e.preventDefault();var t=e.pageX,n=e.pageY;if(e.touches){var u=e.touches[0];t=u.pageX,n=u.pageY}var p=t-i,h=n-o,d=c.elements.preview.getBoundingClientRect(),f=transform.y+h,g=transform.x+p,v={};if("touchmove"==e.type&&e.touches.length>1){var w=e.touches[0],y=e.touches[1],b=Math.sqrt((w.pageX-y.pageX)*(w.pageX-y.pageX)+(w.pageY-y.pageY)*(w.pageY-y.pageY));r||(r=b/c._currentZoom);var C=b/r;return m.call(c,C),void a(c.elements.zoomer)}c.options.enforceBoundary?(l.top>d.top+h&&l.bottom<d.bottom+h&&(transform.y=f),l.left>d.left+p&&l.right<d.right+p&&(transform.x=g)):(transform.y=f,transform.x=g),v[z]=transform.toString(),s(c.elements.preview,v),x.call(c),o=n,i=t}function n(){u=!1,window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),document.body.style[Y]="",y.call(c),C.call(c),r=0}var i,o,r,l,c=this,u=!1;c.elements.overlay.addEventListener("mousedown",e),c.elements.overlay.addEventListener("touchstart",e)}function x(){var e=this,t=e.elements.boundary.getBoundingClientRect(),n=e.elements.preview.getBoundingClientRect();s(e.elements.overlay,{width:n.width+"px",height:n.height+"px",top:n.top-t.top+"px",left:n.left-t.left+"px"})}function C(){var e=this;_.call(e)&&e.options.update.call(e,e.get())}function _(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function I(){var e,t,n,i,o,r=this,l=0,c=1.5,u=1,p={},h=r.elements.preview,d=r.elements.zoomer,f=new D(0,0,u),g=new H,v=_.call(r);v&&!r.data.bound&&(r.data.bound=!0,p[z]=f.toString(),p[Z]=g.toString(),p.opacity=1,s(h,p),e=h.getBoundingClientRect(),t=r.elements.viewport.getBoundingClientRect(),n=r.elements.boundary.getBoundingClientRect(),r._originalImageWidth=e.width,r._originalImageHeight=e.height,r.options.enableZoom&&(r.options.enforceBoundary&&(i=t.width/e.width,o=t.height/e.height,l=Math.max(i,o)),l>=c&&(c=l+1),d.min=j(l,4),d.max=j(c,4),u=Math.max(n.width/e.width,n.height/e.height),m.call(r,u),a(d)),r._currentZoom=f.scale=u,p[z]=f.toString(),s(h,p),r.data.points.length?E.call(r,r.data.points):R.call(r),y.call(r),x.call(r))}function E(e){if(4!=e.length)throw"Croppie - Invalid number of points supplied: "+e;var t=this,n=e[2]-e[0],i=t.elements.viewport.getBoundingClientRect(),o=t.elements.boundary.getBoundingClientRect(),r={left:i.left-o.left,top:i.top-o.top},a=i.width/n,l=e[1],c=e[0],u=-1*e[1]+r.top,p=-1*e[0]+r.left,h={};h[Z]=c+"px "+l+"px",h[z]=new D(p,u,a).toString(),s(t.elements.preview,h),m.call(t,a),t._currentZoom=a}function R(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),i=e.elements.boundary.getBoundingClientRect(),o=n.left-i.left,r=n.top-i.top,a=o-(t.width-n.width)/2,l=r-(t.height-n.height)/2,c=new D(a,l,e._currentZoom);s(e.elements.preview,z,c.toString())}function T(e){var t=this,n=t.elements.canvas,i=t.elements.img,o=n.getContext("2d"),r=f.call(t),e=t.options.enableOrientation&&e;o.clearRect(0,0,n.width,n.height),n.width=i.width,n.height=i.height,r?p(i,function(t){h(n,i,parseInt(t)),e&&h(n,i,e)}):e&&h(n,i,e)}function L(e){var t=e.points,n=document.createElement("div"),i=document.createElement("img"),o=t[2]-t[0],r=t[3]-t[1];return l(n,"croppie-result"),n.appendChild(i),s(i,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),i.src=e.url,s(n,{width:o+"px",height:r+"px"}),n}function B(e,t){var n=t.points,i=n[0],o=n[1],r=n[2]-n[0],a=n[3]-n[1],s=t.circle,l=document.createElement("canvas"),c=l.getContext("2d"),u=r,p=a;return t.outputWidth&&t.outputHeight&&(u=t.outputWidth,p=t.outputHeight),l.width=u,l.height=p,c.drawImage(e,i,o,r,a,0,0,u,p),s&&(c.fillStyle="#fff",c.globalCompositeOperation="destination-in",c.beginPath(),c.arc(u/2,p/2,u/2,0,2*Math.PI,!0),c.closePath(),c.fill()),l.toDataURL(t.format,t.quality)}function k(e,t){var n,i=this,o=[];if("string"==typeof e)n=e,e={};else if(Array.isArray(e))o=e.slice();else{if("undefined"==typeof e&&i.data.url)return I.call(i),C.call(i),null;n=e.url,o=e.points||[]}i.data.bound=!1,i.data.url=n||i.data.url,i.data.points=(o||i.data.points).map(function(e){return parseFloat(e)});var r=u(n,i.elements.img);return r.then(function(){i.options.useCanvas&&(i.elements.img.exifdata=null,T.call(i,e.orientation||1)),I.call(i),C.call(i),t&&t()}),r}function j(e,t){return parseFloat(e).toFixed(t||0)}function M(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),i=n.left-t.left,o=n.top-t.top,r=i+n.width,a=o+n.height,s=e._currentZoom;(s===1/0||isNaN(s))&&(s=1);var l=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return i=Math.max(l,i/s),o=Math.max(l,o/s),r=Math.max(l,r/s),a=Math.max(l,a/s),{points:[j(i),j(o),j(r),j(a)],zoom:s}}function O(e){var t,n=this,i=M.call(n),r=o($,o({},e)),a="string"==typeof e?e:r.type||"viewport",s=r.size,l=r.format,c=r.quality,u=n.elements.viewport.getBoundingClientRect(),p=u.width/u.height;return"viewport"===s?(i.outputWidth=u.width,i.outputHeight=u.height):"object"==typeof s&&(s.width&&s.height?(i.outputWidth=s.width,i.outputHeight=s.height):s.width?(i.outputWidth=s.width,i.outputHeight=s.width/p):s.height&&(i.outputWidth=s.height*p,i.outputHeight=s.height)),Q.indexOf(l)>-1&&(i.format="image/"+l,i.quality=c),i.circle="circle"===n.options.viewport.type,i.url=n.data.url,t=new Promise(function(e,t){e("canvas"===a?B.call(n,n.elements.preview,i):L.call(n,i))})}function S(){I.call(this)}function A(e){if(!this.options.useCanvas)throw"Croppie: Cannot rotate without enableOrientation";var t=this,n=t.elements.canvas,i=(t.elements.img,document.createElement("canvas")),o=1;i.width=n.width,i.height=n.height;var r=i.getContext("2d");r.drawImage(n,0,0),90!==e&&-270!==e||(o=6),-90!==e&&270!==e||(o=8),180!==e&&-180!==e||(o=3),h(n,i,o),v.call(t)}function F(){var e=this;e.element.removeChild(e.elements.boundary),c(e.element,"croppie-container"),e.options.enableZoom&&e.element.removeChild(e.elements.zoomerWrap),delete e.elements}function X(e,t){if(this.element=e,this.options=o(o({},X.defaults),t),d.call(this),this.options.url){var n={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,k.call(this,n)}}"function"!=typeof Promise&&!function(t){function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,i(a,this),i(s,this))}function r(e){var t=this;return null===this._state?void this._deferreds.push(e):void h(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var i;try{i=n(t._value)}catch(o){return void e.reject(o)}e.resolve(i)})}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void u(i(t,e),i(a,this),i(s,this))}this._state=!0,this._value=e,l.call(this)}catch(n){s.call(this,n)}}function s(e){this._state=!1,this._value=e,l.call(this)}function l(){for(var e=0,t=this._deferreds.length;t>e;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i}function u(e,t,n){var i=!1;try{e(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,n(e))})}catch(o){if(i)return;i=!0,n(o)}}var p=setTimeout,h="function"==typeof n&&n||function(e){p(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=this;return new o(function(i,o){r.call(n,new c(e,t,i,o))})},o.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new o(function(t,n){function i(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(r,e)},n)}e[r]=a,0===--o&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)i(r,e[r])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var i=0,o=e.length;o>i;i++)e[i].then(t,n)})},o._setImmediateFn=function(e){h=e},"undefined"!=typeof e&&e.exports?e.exports=o:t.Promise||(t.Promise=o)}(this);var Z,z,Y,P=["Webkit","Moz","ms"],U=document.createElement("div").style;z=i("transform"),Z=i("transformOrigin"),Y=i("userSelect");var N="translate3d",W=", 0px",D=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)};D.parse=function(e){return e.style?D.parse(e.style[z]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?D.fromMatrix(e):D.fromString(e)},D.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new D(parseInt(t[4],10),parseInt(t[5],10),parseFloat(t[0]))},D.fromString=function(e){var t=e.split(") "),n=t[0].substring(N.length+1).split(","),i=t.length>1?t[1].substring(6):1,o=n.length>1?n[0]:0,r=n.length>1?n[1]:0;return new D(o,r,i)},D.prototype.toString=function(){return N+"("+this.x+"px, "+this.y+"px"+W+") scale("+this.scale+")"};var H=function(e){if(!e||!e.style[Z])return this.x=0,void(this.y=0);var t=e.style[Z].split(" ");this.x=parseFloat(t[0]),this.y=parseFloat(t[1])};H.prototype.toString=function(){return this.x+"px "+this.y+"px"};var q=r(x,500),$={type:"canvas",format:"png",quality:1},Q=["jpeg","webp","png"];if(window.jQuery){var G=window.jQuery;G.fn.croppie=function(e){var t=typeof e;if("string"===t){var n=Array.prototype.slice.call(arguments,1),i=G(this).data("croppie");return"get"===e?i.get():"result"===e?i.result.apply(i,n):this.each(function(){var t=G(this).data("croppie");if(t){var i=t[e];if(!G.isFunction(i))throw"Croppie "+e+" method not found";i.apply(t,n),"destroy"===e&&G(this).removeData("croppie")}})}return this.each(function(){var t=new X(this,e);G(this).data("croppie",t)})}}X.defaults={viewport:{width:100,height:100,type:"square"},boundary:{width:300,height:300},orientationControls:{enabled:!0,leftClass:"",rightClass:""},customClass:"",showZoomer:!0,enableZoom:!0,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,update:function(){}},o(X.prototype,{bind:function(e,t){return k.call(this,e,t)},get:function(){return M.call(this)},result:function(e){return O.call(this,e)},refresh:function(){return S.call(this)},setZoom:function(e){m.call(this,e),a(this.elements.zoomer)},rotate:function(e){A.call(this,e)},destroy:function(){return F.call(this)}}),t.Croppie=window.Croppie=X,"object"==typeof e&&e.exports&&(e.exports=X)})}).call(t,n(6).setImmediate)},function(e,t,n){(function(e,i){function o(e,t){this._id=e,this._clearFn=t}var r=n(7).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,l={},c=0;t.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=c++,i=arguments.length<2?!1:s.call(arguments,1);return l[n]=!0,r(function(){l[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete l[e]}}).call(t,n(6).setImmediate,n(6).clearImmediate)},function(e,t){function n(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&i())}function i(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var a,s=e.exports={},l=[],c=!1,u=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new o(e,t)),1!==l.length||c||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=r,s.addListener=r,s.once=r,s.off=r,s.removeListener=r,s.removeAllListeners=r,s.emit=r,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});
//# sourceMappingURL=ngImageCrop.min.js.map