{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///ngImageCrop.min.js","webpack:///webpack/bootstrap 11eb04cc79841b65fc07","webpack:///./src/index.js","webpack:///./~/croppie/croppie.css?ca64","webpack:///./~/croppie/croppie.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./~/croppie/croppie.js","webpack:///./~/timers-browserify/main.js","webpack:///./~/process/browser.js","webpack:///./~/exif-js/exif.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","croppie","EXIF","MODULE_NAME","angular","ImageCropDirectiveCtrl","$scope","$document","$element","$timeout","$window","initialized","_initCroppie","_this","result","type","quality","options","size","width","format","then","img","$apply","regex","base64String","exec","croppedImage","_b64ToBlob","onApply","image","_this2","reader","FileReader","onload","bind","readAsDataURL","_originalImage","find","_bindImage","b64Data","byteCharacters","atob","byteArrays","contentType","sliceSize","offset","slice","byteNumbers","Array","charCodeAt","byteArray","Uint8Array","push","blob","Blob","height","name","set","undefined","get","ImageCropDirective","restrict","scope","originalImage","onCancel","bindToController","controller","controllerAs","template","e","Error","code","directive","_module","content","locals","list","toString","item","join","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","css","media","sourceMap","part","insertStyleElement","styleElement","head","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","document","createElement","createLinkElement","linkElement","rel","obj","update","remove","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","btoa","updateLink","href","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","setAttribute","unescape","encodeURIComponent","JSON","stringify","oldSrc","memoize","fn","memo","apply","arguments","isOldIE","test","window","navigator","userAgent","toLowerCase","getElementsByTagName","newList","mayRemove","textStore","replacement","filter","Boolean","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","setImmediate","__webpack_provided_window_dot_EXIF","vendorPrefix","prop","emptyStyles","capProp","toUpperCase","cssPrefixes","deepExtend","destination","source","property","constructor","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","setTimeout","dispatchChange","element","evt","createEvent","initEvent","dispatchEvent","fireEvent","el","val","tmp","style","addClass","classList","add","className","removeClass","replace","num","v","parseInt","loadImage","src","imageEl","useCanvas","prom","Image","Promise","resolve","reject","substring","opacity","getExifOrientation","cb","getData","orientation","getTag","drawCanvas","canvas","ctx","getContext","save","translate","scale","rotate","Math","PI","drawImage","restore","_create","boundary","viewport","overlay","bw","bh","self","contClass","customViewportClass","enableOrientation","_hasExif","data","elements","preview","isNaN","customClass","_initDraggable","enableZoom","_initializeZoom","enableExif","_setZoomerVal","z","zoomer","fix","max","min","change","_onZoom","parseFloat","origin","TransformOrigin","viewportRect","getBoundingClientRect","transform","Transform","parse","scroll","ev","delta","targetZoom","wheelDelta","deltaY","detail","_currentZoom","preventDefault","wrap","zoomerWrap","step","display","showZoomer","addEventListener","mouseWheelZoom","ui","applyCss","transCss","CSS_TRANSFORM","CSS_TRANS_ORG","vpRect","enforceBoundary","boundaries","_getVirtualBoundaries","transBoundaries","oBoundaries","x","maxX","minX","y","maxY","minY","_debouncedOverlay","_triggerUpdate","vpWidth","vpHeight","centerFromBoundaryX","clientWidth","centerFromBoundaryY","clientHeight","imgRect","curImgWidth","curImgHeight","halfWidth","halfHeight","originMinX","originMaxX","originMinY","originMaxY","_updateCenterPoint","vpData","pc","top","left","center","adj","newCss","assignTransformCoordinates","deltaX","bottom","right","keyDown","parseKeyDown","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","shiftKey","keyCode","movement","body","CSS_USERSELECT","keyMove","zoom","setZoom","_updateOverlay","originalDistance","mouseDown","isDragging","originalX","pageX","originalY","pageY","touches","mouseMove","mouseUp","touch1","touch2","dist","sqrt","removeEventListener","boundRect","imgData","_isVisible","$","trigger","CustomEvent","initCustomEvent","offsetHeight","offsetWidth","_updatePropertiesFromImage","boundaryData","minW","minH","minZoom","maxZoom","initialZoom","cssReset","transformReset","originReset","isVisible","bound","_originalImageWidth","_originalImageHeight","defaultInitialZoom","boundZoom","points","_bindPoints","_centerImage","pointsWidth","vpOffset","originTop","originLeft","transformTop","transformLeft","imgDim","vpDim","boundDim","vpLeft","vpTop","w","h","_transferImageToCanvas","customOrientation","exif","clearRect","_getCanvas","circle","outWidth","outHeight","startX","startY","outputWidth","outputHeight","backgroundColor","fillStyle","fillRect","abs","globalCompositeOperation","beginPath","arc","closePath","fill","_getHtmlResult","div","url","_getBase64Result","toDataURL","_getBlobResult","toBlob","_bind","isArray","map","exifdata","decimalPoints","toFixed","_get","x1","y1","widthDiff","heightDiff","x2","y2","Infinity","Number","NEGATIVE_INFINITY","_result","opts","RESULT_DEFAULTS","resultType","ratio","RESULT_FORMATS","_refresh","_rotate","deg","copy","ornt","_destroy","Croppie","defaults","tagName","origImage","replacementDiv","bindOpts","a","b","_state","_value","_deferreds","f","d","k","onFulfilled","onRejected","g","l","all","race","_setImmediateFn","event","params","bubbles","cancelable","Event","HTMLCanvasElement","callback","binStr","split","len","arr","_TRANSLATE","_TRANSLATE_SUFFIX","fromMatrix","fromString","vals","values","jQuery","ot","singleInst","each","method","isFunction","removeData","orientationControls","enabled","leftClass","rightClass","refresh","destroy","clearImmediate","Timeout","clearFn","_id","_clearFn","nextTick","Function","immediateIds","nextImmediateId","setInterval","clearInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","run","Item","array","noop","process","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","imageHasData","base64ToArrayBuffer","base64","match","binary","buffer","ArrayBuffer","view","objectURLToBlob","http","XMLHttpRequest","open","responseType","status","response","send","getImageData","handleBinaryFile","binFile","findEXIFinJPEG","iptcdata","findIPTCinJPEG","arrayBuffer","fileReader","readAsArrayBuffer","File","debug","console","log","byteLength","file","dataView","DataView","getUint8","readEXIFData","getUint16","isFieldSegmentStart","nameHeaderLength","startOffset","sectionLength","readIPTCData","fieldValue","fieldName","dataSize","segmentType","segmentSize","segmentStartPos","IptcFieldMap","getInt16","getStringFromDB","hasOwnProperty","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","tag","entries","tags","readTagValue","n","numerator","denominator","numValues","getUint32","valueOffset","getInt32","start","outstr","String","fromCharCode","exifData","gpsData","tiffOffset","firstIFDOffset","TiffTags","ExifIFDPointer","ExifTags","StringValues","Components","GPSInfoIFDPointer","GPSTags","EXIFwrapped","Tags","36864","40960","40961","40962","40963","37121","37122","37500","37510","40964","36867","36868","37520","37521","37522","33434","33437","34850","34852","34855","34856","37377","37378","37379","37380","37381","37382","37383","37384","37385","37396","37386","41483","41484","41486","41487","41488","41492","41493","41495","41728","41729","41730","41985","41986","41987","41988","41989","41990","41991","41992","41993","41994","41995","41996","40965","42016","256","257","34665","34853","258","259","262","274","277","284","530","531","282","283","296","273","278","279","513","514","301","318","319","529","532","306","270","271","272","305","315","33432","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","ExposureProgram","MeteringMode","255","LightSource","Flash","31","32","65","69","71","73","77","79","89","93","95","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","120","110","55","80","85","122","105","116","HTMLImageElement","complete","getAllTags","pretty","strPretty","readFromBinaryFile"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,OAAA,iBAAAH,GACA,gBAAAC,SACAA,QAAA,YAAAD,IAEAD,EAAA,YAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAP,WACAS,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,QAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAASL,EAAQD,EAASM,GAU/B,QAASS,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCARhHC,OAAOC,eAAepB,EAAS,cAC7BqB,OAAO,GAGT,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMZ,OAAOC,eAAeI,EAAQI,EAAWI,IAAKJ,IAAiB,MAAO,UAAUX,EAAagB,EAAYC,GAAiJ,MAA9HD,IAAYV,EAAiBN,EAAYkB,UAAWF,GAAiBC,GAAaX,EAAiBN,EAAaiB,GAAqBjB,KE5DjiBX,GAAA,EACA,IAAI8B,GAAU9B,EAAQ,GAClB+B,EAAO/B,EAAQ,GAEbgC,EAAc,aFmEnBtC,cEjEcsC,CAEf,IAAMrC,GAASsC,QAAQtC,OAAOqC,MAExBE,EFkEwB,WEhE5B,QAAAA,GAAYC,EAAQC,EAAWC,EAAUC,EAAUC,GAAS9B,EAAAX,KAAAoC,GAC1DpC,KAAKsC,UAAYA,EACjBtC,KAAKuC,SAAWA,EAChBvC,KAAKqC,OAASA,EACdrC,KAAKwC,SAAWA,EAChBxC,KAAKyC,QAAUA,EACfzC,KAAKyC,QAAQR,KAAOA,EACpBjC,KAAK0C,aAAc,EACnB1C,KAAK2C,eF2JN,MApFAzB,GAAakB,IACXR,IAAK,WACLX,MAAO,WE3DC,GAAA2B,GAAA5C,IAETA,MAAKS,EAAEoC,QACLC,KAAM,SACNC,QAAS/C,KAAKgD,QAAQH,OAAOE,QAC7BE,MAAOC,MAAOlD,KAAKgD,QAAQH,OAAOK,OAClCC,OAAQnD,KAAKgD,QAAQH,OAAOM,SAC3BC,KAAK,SAACC,GACPT,EAAKP,OAAOiB,OAAO,WACjB,GAAIC,GAAQ,mCACRC,EAAeD,EAAME,KAAKJ,GAC1BK,EAAed,EAAKe,WAAWH,EAAaA,EAAajC,OAAS,GAEtEqB,GAAKgB,SAASC,MAAOH,WFkExB9B,IAAK,aACLX,MAAO,WE9DG,GAAA6C,GAAA9D,KAEP+D,EAAS,GAAIC,WAEjBD,GAAOE,OAAS,WACdH,EAAKrD,EAAEyD,KAAKH,EAAOlB,SAErBkB,EAAOI,cAAcnE,KAAKoE,mBFmEzBxC,IAAK,eACLX,MAAO,WE/DRjB,KAAKS,EAAI,GAAIuB,GAAQhC,KAAKuC,SAAS8B,KAAK,YAAY,GAAIrE,KAAKgD,QAAQhB,SACjEhC,KAAKoE,gBACPpE,KAAKsE,gBFqEN1C,IAAK,aACLX,MAAO,SElECsD,GAMT,IAAK,GALCC,GAAiBC,KAAKF,GACtBG,KACAC,EAAc3E,KAAKoE,eAAetB,KAClC8B,EAAY,IAETC,EAAS,EAAGA,EAASL,EAAejD,OAAQsD,GAAUD,EAAW,CAIxE,IAAK,GAHCE,GAAQN,EAAeM,MAAMD,EAAQA,EAASD,GAE9CG,EAAc,GAAIC,OAAMF,EAAMvD,QAC3BD,EAAI,EAAGA,EAAIwD,EAAMvD,OAAQD,IAChCyD,EAAYzD,GAAKwD,EAAMG,WAAW3D,EAGpC,IAAM4D,GAAY,GAAIC,YAAWJ,EAEjCL,GAAWU,KAAKF,GAGlB,GAAMG,GAAO,GAAIC,MAAKZ,GAAa5B,KAAM6B,IACrCzB,EAAQlD,KAAKgD,QAAQH,OAAOK,MAC5BqC,EAASvF,KAAKgD,QAAQH,OAAO0C,OAC7BxC,EAAU/C,KAAKgD,QAAQH,OAAOE,OAElC,OADAsC,GAAKG,KAAOtC,EAAQ,IAAMqC,EAAS,IAAMxC,EAAU,IAAM/C,KAAKoE,eAAeoB,KACtEH,KFqENzD,IAAK,gBACL6D,IAAK,SE7IUxE,GAChBjB,KAAKoE,eAAiBnD,EACPyE,SAAX1F,KAAKS,GACPT,KAAKsE,cFgJNqB,IAAK,WE3IN,MAAO3F,MAAKoE,mBFgJNhC,KE3EJwD,EAEJ,QAAAA,KAAcjF,EAAAX,KAAA4F,GACZ5F,KAAK6F,SAAW,IAChB7F,KAAK8F,OACHC,cAAe,IACf/C,QAAS,IACTY,QAAS,IACToC,SAAU,KAEZhG,KAAKiG,kBAAmB,EACxBjG,KAAKkG,WAAa9D,EAClBpC,KAAKmG,aAAe,QACpBnG,KAAKoG,SAAWlG,GAAQ,cAAAmG,GAAA,GAAAC,OAAA,6CAAAD,GAAAE,KAAA,mBAAAF,QAK5BxG,GAAO2G,UAAU,YAAa,iBAAM,IAAIZ,KFiFvCa,EAAQ7G,QAAUA,EAAQ,YAIrB,SAASC,EAAQD,EAASM,GGxMhC,GAAAwG,GAAAxG,EAAA,EACA,iBAAAwG,SAAA7G,EAAAQ,GAAAqG,EAAA,KAEAxG,GAAA,GAAAwG,KACAA,GAAAC,SAAA9G,EAAAD,QAAA8G,EAAAC,SH8NM,SAAS9G,EAAQD,EAASM,GIrOhCN,EAAAC,EAAAD,QAAAM,EAAA,KAKAN,EAAAwF,MAAAvF,EAAAQ,GAAA,4uEAAmwE,MJ8O7vE,SAASR,EAAQD,GK9OvBC,EAAAD,QAAA,WACA,GAAAgH,KA0CA,OAvCAA,GAAAC,SAAA,WAEA,OADAhE,MACAvB,EAAA,EAAgBA,EAAAtB,KAAAuB,OAAiBD,IAAA,CACjC,GAAAwF,GAAA9G,KAAAsB,EACAwF,GAAA,GACAjE,EAAAuC,KAAA,UAAA0B,EAAA,OAAwCA,EAAA,QAExCjE,EAAAuC,KAAA0B,EAAA,IAGA,MAAAjE,GAAAkE,KAAA,KAIAH,EAAAtF,EAAA,SAAArB,EAAA+G,GACA,gBAAA/G,KACAA,IAAA,KAAAA,EAAA,KAEA,QADAgH,MACA3F,EAAA,EAAgBA,EAAAtB,KAAAuB,OAAiBD,IAAA,CACjC,GAAAjB,GAAAL,KAAAsB,GAAA,EACA,iBAAAjB,KACA4G,EAAA5G,IAAA,GAEA,IAAAiB,EAAA,EAAYA,EAAArB,EAAAsB,OAAoBD,IAAA,CAChC,GAAAwF,GAAA7G,EAAAqB,EAKA,iBAAAwF,GAAA,IAAAG,EAAAH,EAAA,MACAE,IAAAF,EAAA,GACAA,EAAA,GAAAE,EACKA,IACLF,EAAA,OAAAA,EAAA,aAAAE,EAAA,KAEAJ,EAAAxB,KAAA0B,MAIAF,IL2PM,SAAS/G,EAAQD,EAASM,GM9OhC,QAAAgH,GAAAC,EAAAnE,GACA,OAAA1B,GAAA,EAAeA,EAAA6F,EAAA5F,OAAmBD,IAAA,CAClC,GAAAwF,GAAAK,EAAA7F,GACA8F,EAAAC,EAAAP,EAAAzG,GACA,IAAA+G,EAAA,CACAA,EAAAE,MACA,QAAAC,GAAA,EAAiBA,EAAAH,EAAAI,MAAAjG,OAA2BgG,IAC5CH,EAAAI,MAAAD,GAAAT,EAAAU,MAAAD,GAEA,MAAQA,EAAAT,EAAAU,MAAAjG,OAAuBgG,IAC/BH,EAAAI,MAAApC,KAAAqC,EAAAX,EAAAU,MAAAD,GAAAvE,QAEG,CAEH,OADAwE,MACAD,EAAA,EAAiBA,EAAAT,EAAAU,MAAAjG,OAAuBgG,IACxCC,EAAApC,KAAAqC,EAAAX,EAAAU,MAAAD,GAAAvE,GAEAqE,GAAAP,EAAAzG,KAA2BA,GAAAyG,EAAAzG,GAAAiH,KAAA,EAAAE,WAK3B,QAAAE,GAAAd,GAGA,OAFAO,MACAQ,KACArG,EAAA,EAAeA,EAAAsF,EAAArF,OAAiBD,IAAA,CAChC,GAAAwF,GAAAF,EAAAtF,GACAjB,EAAAyG,EAAA,GACAc,EAAAd,EAAA,GACAe,EAAAf,EAAA,GACAgB,EAAAhB,EAAA,GACAiB,GAAcH,MAAAC,QAAAC,YACdH,GAAAtH,GAGAsH,EAAAtH,GAAAmH,MAAApC,KAAA2C,GAFAZ,EAAA/B,KAAAuC,EAAAtH,IAAgCA,KAAAmH,OAAAO,KAIhC,MAAAZ,GAGA,QAAAa,GAAAhF,EAAAiF,GACA,GAAAC,GAAAC,IACAC,EAAAC,IAAA9G,OAAA,EACA,YAAAyB,EAAAsF,SACAF,EAEGA,EAAAG,YACHL,EAAAM,aAAAP,EAAAG,EAAAG,aAEAL,EAAAO,YAAAR,GAJAC,EAAAM,aAAAP,EAAAC,EAAAQ,YAMAL,EAAAjD,KAAA6C,OACE,eAAAjF,EAAAsF,SAGF,SAAAhC,OAAA,qEAFA4B,GAAAO,YAAAR,IAMA,QAAAU,GAAAV,GACAA,EAAAW,WAAAC,YAAAZ,EACA,IAAAa,GAAAT,EAAAU,QAAAd,EACAa,IAAA,GACAT,EAAAW,OAAAF,EAAA,GAIA,QAAAG,GAAAjG,GACA,GAAAiF,GAAAiB,SAAAC,cAAA,QAGA,OAFAlB,GAAAnF,KAAA,WACAkF,EAAAhF,EAAAiF,GACAA,EAGA,QAAAmB,GAAApG,GACA,GAAAqG,GAAAH,SAAAC,cAAA,OAGA,OAFAE,GAAAC,IAAA,aACAtB,EAAAhF,EAAAqG,GACAA,EAGA,QAAA5B,GAAA8B,EAAAvG,GACA,GAAAiF,GAAAuB,EAAAC,CAEA,IAAAzG,EAAA0G,UAAA,CACA,GAAAC,GAAAC,GACA3B,GAAA4B,MAAAZ,EAAAjG,IACAwG,EAAAM,EAAA5F,KAAA,KAAA+D,EAAA0B,GAAA,GACAF,EAAAK,EAAA5F,KAAA,KAAA+D,EAAA0B,GAAA,OACEJ,GAAAzB,WACF,kBAAAiC,MACA,kBAAAA,KAAAC,iBACA,kBAAAD,KAAAE,iBACA,kBAAA3E,OACA,kBAAA4E,OACAjC,EAAAmB,EAAApG,GACAwG,EAAAW,EAAAjG,KAAA,KAAA+D,GACAwB,EAAA,WACAd,EAAAV,GACAA,EAAAmC,MACAL,IAAAE,gBAAAhC,EAAAmC,SAGAnC,EAAAgB,EAAAjG,GACAwG,EAAAa,EAAAnG,KAAA,KAAA+D,GACAwB,EAAA,WACAd,EAAAV,IAMA,OAFAuB,GAAAD,GAEA,SAAAe,GACA,GAAAA,EAAA,CACA,GAAAA,EAAA1C,MAAA2B,EAAA3B,KAAA0C,EAAAzC,QAAA0B,EAAA1B,OAAAyC,EAAAxC,YAAAyB,EAAAzB,UACA,MACA0B,GAAAD,EAAAe,OAEAb,MAcA,QAAAK,GAAA7B,EAAAsC,EAAAd,EAAAF,GACA,GAAA3B,GAAA6B,EAAA,GAAAF,EAAA3B,GAEA,IAAAK,EAAAuC,WACAvC,EAAAuC,WAAAC,QAAAC,EAAAH,EAAA3C,OACE,CACF,GAAA+C,GAAAzB,SAAA0B,eAAAhD,GACAiD,EAAA5C,EAAA4C,UACAA,GAAAN,IAAAtC,EAAAY,YAAAgC,EAAAN,IACAM,EAAAtJ,OACA0G,EAAAO,aAAAmC,EAAAE,EAAAN,IAEAtC,EAAAQ,YAAAkC,IAKA,QAAAN,GAAApC,EAAAsB,GACA,GAAA3B,GAAA2B,EAAA3B,IACAC,EAAA0B,EAAA1B,KAMA,IAJAA,GACAI,EAAA6C,aAAA,QAAAjD,GAGAI,EAAAuC,WACAvC,EAAAuC,WAAAC,QAAA7C,MACE,CACF,KAAAK,EAAAS,YACAT,EAAAY,YAAAZ,EAAAS,WAEAT,GAAAQ,YAAAS,SAAA0B,eAAAhD,KAIA,QAAAuC,GAAAd,EAAAE,GACA,GAAA3B,GAAA2B,EAAA3B,IACAE,EAAAyB,EAAAzB,SAEAA,KAEAF,GAAA,uDAAuDsC,KAAAa,SAAAC,mBAAAC,KAAAC,UAAApD,MAAA,MAGvD,IAAAzC,GAAA,GAAAC,OAAAsC,IAA6B9E,KAAA,aAE7BqI,EAAA9B,EAAAe,IAEAf,GAAAe,KAAAL,IAAAC,gBAAA3E,GAEA8F,GACApB,IAAAE,gBAAAkB,GAhPA,GAAA9D,MACA+D,EAAA,SAAAC,GACA,GAAAC,EACA,mBAEA,MADA,mBAAAA,OAAAD,EAAAE,MAAAvL,KAAAwL,YACAF,IAGAG,EAAAL,EAAA,WACA,qBAAAM,KAAAC,OAAAC,UAAAC,UAAAC,iBAEA3D,EAAAiD,EAAA,WACA,MAAAlC,UAAAhB,MAAAgB,SAAA6C,qBAAA,aAEAlC,EAAA,KACAD,EAAA,EACAvB,IAEAxI,GAAAD,QAAA,SAAAgH,EAAA5D,GAKAA,QAGA,mBAAAA,GAAA0G,YAAA1G,EAAA0G,UAAA+B,KAGA,mBAAAzI,GAAAsF,WAAAtF,EAAAsF,SAAA,SAEA,IAAAnB,GAAAO,EAAAd,EAGA,OAFAM,GAAAC,EAAAnE,GAEA,SAAAgJ,GAEA,OADAC,MACA3K,EAAA,EAAgBA,EAAA6F,EAAA5F,OAAmBD,IAAA,CACnC,GAAAwF,GAAAK,EAAA7F,GACA8F,EAAAC,EAAAP,EAAAzG,GACA+G,GAAAE,OACA2E,EAAA7G,KAAAgC,GAEA,GAAA4E,EAAA,CACA,GAAArE,GAAAD,EAAAsE,EACA9E,GAAAS,EAAA3E,GAEA,OAAA1B,GAAA,EAAgBA,EAAA2K,EAAA1K,OAAsBD,IAAA,CACtC,GAAA8F,GAAA6E,EAAA3K,EACA,QAAA8F,EAAAE,KAAA,CACA,OAAAC,GAAA,EAAkBA,EAAAH,EAAAI,MAAAjG,OAA2BgG,IAC7CH,EAAAI,MAAAD,WACAF,GAAAD,EAAA/G,OAiIA,IAAAqK,GAAA,WACA,GAAAwB,KAEA,iBAAA3B,EAAA4B,GAEA,MADAD,GAAA3B,GAAA4B,EACAD,EAAAE,OAAAC,SAAAtF,KAAA,WN0WM,SAASlH,EAAQD,EAASM,GAE/B,GAAIoM,GAAgCC,EAA8BC,GOziBnE,SAAAC,EAAAC,IAMA,SAAAhN,EAAAC,GAGA4M,GAAA3M,GAAA0M,EAAA,EAAAE,EAAA,kBAAAF,KAAAf,MAAA3L,EAAA2M,GAAAD,IAAA5G,SAAA8G,IAAA3M,EAAAD,QAAA4M,KAQCxM,KAAA,SAAAJ,GA4CD,QAAA+M,GAAAC,GACA,GAAAA,IAAAC,GACA,MAAAD,EAMA,KAHA,GAAAE,GAAAF,EAAA,GAAAG,cAAAH,EAAA9H,MAAA,GACAxD,EAAA0L,EAAAzL,OAEAD,KAEA,GADAsL,EAAAI,EAAA1L,GAAAwL,EACAF,IAAAC,GACA,MAAAD,GAUA,QAAAK,GAAAC,EAAAC,GACAD,OACA,QAAAE,KAAAD,GACAA,EAAAC,IAAAD,EAAAC,GAAAC,aAAAF,EAAAC,GAAAC,cAAAtM,QACAmM,EAAAE,GAAAF,EAAAE,OACAH,EAAAC,EAAAE,GAAAD,EAAAC,KAEAF,EAAAE,GAAAD,EAAAC,EAGA,OAAAF,GAGA,QAAAI,GAAAC,EAAAC,EAAAC,GACA,GAAAC,EACA,mBACA,GAAAC,GAAA3N,KAAA4N,EAAApC,UACAqC,EAAA,WACAH,EAAA,KACAD,GAAAF,EAAAhC,MAAAoC,EAAAC,IAEAE,EAAAL,IAAAC,CACAK,cAAAL,GACAA,EAAAM,WAAAH,EAAAL,GACAM,GAAAP,EAAAhC,MAAAoC,EAAAC,IAIA,QAAAK,GAAAC,GACA,kBAAAhF,UAAA,CACA,GAAAiF,GAAAjF,SAAAkF,YAAA,aACAD,GAAAE,UAAA,gBACAH,EAAAI,cAAAH,OAGAD,GAAAK,UAAA,YAKA,QAAA3G,GAAA4G,EAAArH,EAAAsH,GACA,uBACA,GAAAC,GAAAvH,CACAA,MACAA,EAAAuH,GAAAD,EAGA,OAAA7B,KAAAzF,GACAqH,EAAAG,MAAA/B,GAAAzF,EAAAyF,GAIA,QAAAgC,GAAAJ,EAAA/N,GACA+N,EAAAK,UACAL,EAAAK,UAAAC,IAAArO,GAGA+N,EAAAO,WAAA,IAAAtO,EAIA,QAAAuO,GAAAR,EAAA/N,GACA+N,EAAAK,UACAL,EAAAK,UAAApF,OAAAhJ,GAGA+N,EAAAO,UAAAP,EAAAO,UAAAE,QAAAxO,EAAA,IAIA,QAAAyO,GAAAC,GACA,MAAAC,UAAAD,EAAA,IAIA,QAAAE,GAAAC,EAAAC,EAAAC,GACA,GACAC,GADApM,EAAAkM,GAAA,GAAAG,MAyBA,OAtBArM,GAAAiM,QAEAG,EAAA,GAAAE,SAAA,SAAAC,EAAAC,GACAD,EAAAvM,MAGAoM,EAAA,GAAAE,SAAA,SAAAC,EAAAC,GACAL,GAAA,SAAAF,EAAAQ,UAAA,KAAAhE,eACAzI,EAAAyH,aAAA,2BAEAzH,EAAAY,OAAA,WACA+J,WAAA,WACA4B,EAAAvM,IACqB,MAIrBA,EAAAiM,OAGAjM,EAAAsL,MAAAoB,QAAA,EAEAN,EA8DA,QAAAO,GAAA3M,EAAA4M,GACAvD,GACAuD,EAAA,GAGAhO,KAAAiO,QAAA7M,EAAA,WACA,GAAA8M,GAAAlO,KAAAmO,OAAApQ,KAAA,cACAiQ,GAAAE,KAIA,QAAAE,GAAAC,EAAAjN,EAAA8M,GACA,GAAAjN,GAAAG,EAAAH,MACAqC,EAAAlC,EAAAkC,OACAgL,EAAAD,EAAAE,WAAA,KAMA,QAJAF,EAAApN,MAAAG,EAAAH,MACAoN,EAAA/K,OAAAlC,EAAAkC,OAEAgL,EAAAE,OACAN,GACA,OACAI,EAAAG,UAAAxN,EAAA,GACAqN,EAAAI,SAAA,EACA,MAEA,QACAJ,EAAAG,UAAAxN,EAAAqC,GACAgL,EAAAK,OAAA,IAAAC,KAAAC,GAAA,IACA,MAEA,QACAP,EAAAG,UAAA,EAAAnL,GACAgL,EAAAI,MAAA,KACA,MAEA,QACAL,EAAApN,MAAAqC,EACA+K,EAAA/K,OAAArC,EACAqN,EAAAK,OAAA,GAAAC,KAAAC,GAAA,KACAP,EAAAI,MAAA,KACA,MAEA,QACAL,EAAApN,MAAAqC,EACA+K,EAAA/K,OAAArC,EACAqN,EAAAK,OAAA,GAAAC,KAAAC,GAAA,KACAP,EAAAG,UAAA,GAAAnL,EACA,MAEA,QACA+K,EAAApN,MAAAqC,EACA+K,EAAA/K,OAAArC,EACAqN,EAAAK,WAAAC,KAAAC,GAAA,KACAP,EAAAG,WAAAxN,EAAAqC,GACAgL,EAAAI,MAAA,KACA,MAEA,QACAL,EAAApN,MAAAqC,EACA+K,EAAA/K,OAAArC,EACAqN,EAAAG,UAAA,EAAAxN,GACAqN,EAAAK,WAAAC,KAAAC,GAAA,KAGAP,EAAAQ,UAAA1N,EAAA,IAAAH,EAAAqC,GACAgL,EAAAS,UAIA,QAAAC,KACA,GAGAC,GAAA7N,EAAA8N,EAAAC,EAAAC,EAAAC,EAHAC,EAAAvR,KACAwR,EAAA,oBACAC,EAAAF,EAAAvO,QAAAmO,SAAArO,KAAA,SAAAyO,EAAAvO,QAAAmO,SAAArO,KAAA,IAGAyO,GAAAvO,QAAAwM,UAAA+B,EAAAvO,QAAA0O,mBAAAC,EAAApR,KAAAgR,GAEAA,EAAAK,QACAL,EAAAM,YAGAX,EAAAK,EAAAM,SAAAX,SAAAhI,SAAAC,cAAA,OACAgI,EAAAI,EAAAM,SAAAV,SAAAjI,SAAAC,cAAA,OACA9F,EAAAkO,EAAAM,SAAAxO,IAAA6F,SAAAC,cAAA,OACAiI,EAAAG,EAAAM,SAAAT,QAAAlI,SAAAC,cAAA,OAEAoI,EAAAvO,QAAAwM,WACA+B,EAAAM,SAAAvB,OAAApH,SAAAC,cAAA,UACAoI,EAAAM,SAAAC,QAAAP,EAAAM,SAAAvB,QAGAiB,EAAAM,SAAAC,QAAAP,EAAAM,SAAAxO,IAGAuL,EAAAsC,EAAA,eACAG,EAAAE,EAAAvO,QAAAkO,SAAAhO,MACAoO,EAAAC,EAAAvO,QAAAkO,SAAA3L,OACAqC,EAAAsJ,GACAhO,MAAAmO,GAAAU,MAAAV,GAAA,SACA9L,OAAA+L,GAAAS,MAAAT,GAAA,WAGA1C,EAAAuC,EAAA,eACAM,GACA7C,EAAAuC,EAAAM,GAEA7J,EAAAuJ,GACAjO,MAAAqO,EAAAvO,QAAAmO,SAAAjO,MAAA,KACAqC,OAAAgM,EAAAvO,QAAAmO,SAAA5L,OAAA,OAEA4L,EAAArG,aAAA,cAEA8D,EAAA2C,EAAAM,SAAAC,QAAA,YACAlD,EAAAwC,EAAA,cAEAG,EAAArD,QAAAzF,YAAAyI,GACAA,EAAAzI,YAAA8I,EAAAM,SAAAC,SACAZ,EAAAzI,YAAA0I,GACAD,EAAAzI,YAAA2I,GAEAxC,EAAA2C,EAAArD,QAAAsD,GACAD,EAAAvO,QAAAgP,aACApD,EAAA2C,EAAArD,QAAAqD,EAAAvO,QAAAgP,aAIAC,EAAA1R,KAAAP,MAEAuR,EAAAvO,QAAAkP,YACAC,EAAA5R,KAAAgR,GAwCA,QAAAI,KAEA,MAAA3R,MAAAgD,QAAAoP,YAAA1F,EAGA,QAAA2F,GAAAlD,GACA,GAAAnP,KAAAgD,QAAAkP,WAAA,CACA,GAAAI,GAAAtS,KAAA6R,SAAAU,OACA9D,EAAA+D,EAAArD,EAAA,EAEAmD,GAAArR,MAAA4P,KAAA4B,IAAAH,EAAAI,IAAA7B,KAAA6B,IAAAJ,EAAAG,IAAAhE,KAIA,QAAA0D,KAiBA,QAAAQ,KACAC,EAAArS,KAAAgR,GACAtQ,MAAA4R,WAAAN,EAAAtR,OACA6R,OAAA,GAAAC,GAAAxB,EAAAM,SAAAC,SACAkB,aAAAzB,EAAAM,SAAAV,SAAA8B,wBACAC,UAAAC,EAAAC,MAAA7B,EAAAM,SAAAC,WAIA,QAAAuB,GAAAC,GACA,GAAAC,GAAAC,CAGAD,GADAD,EAAAG,WACAH,EAAAG,WAAA,KACaH,EAAAI,OACbJ,EAAAI,OAAA,KACaJ,EAAAK,OACbL,EAAAK,WAEA,EAGAH,EAAAjC,EAAAqC,aAAAL,EAAAhC,EAAAqC,aAEAN,EAAAO,iBACAxB,EAAA9R,KAAAgR,EAAAiC,GACAb,EAAApS,KAAAgR,GA1CA,GAAAA,GAAAvR,KACA8T,EAAAvC,EAAAM,SAAAkC,WAAA7K,SAAAC,cAAA,OACAoJ,EAAAhB,EAAAM,SAAAU,OAAArJ,SAAAC,cAAA,QAEAyF,GAAAkF,EAAA,kBACAlF,EAAA2D,EAAA,aACAA,EAAAzP,KAAA,QACAyP,EAAAyB,KAAA,SACAzB,EAAAtR,MAAA,EACAsR,EAAA5D,MAAAsF,QAAA1C,EAAAvO,QAAAkR,WAAA,UAEA3C,EAAArD,QAAAzF,YAAAqL,GACAA,EAAArL,YAAA8J,GAEAhB,EAAAqC,aAAA,EA+BArC,EAAAM,SAAAU,OAAA4B,iBAAA,QAAAxB,GACApB,EAAAM,SAAAU,OAAA4B,iBAAA,SAAAxB,GAEApB,EAAAvO,QAAAoR,iBACA7C,EAAAM,SAAAX,SAAAiD,iBAAA,aAAAd,GACA9B,EAAAM,SAAAX,SAAAiD,iBAAA,iBAAAd,IAIA,QAAAT,GAAAyB,GAOA,QAAAC,KACA,GAAAC,KACAA,GAAAC,GAAAtB,EAAArM,WACA0N,EAAAE,GAAA3B,EAAAjM,WACAe,EAAA2J,EAAAM,SAAAC,QAAAyC,GAVA,GAAAhD,GAAAvR,KACAkT,EAAAmB,IAAAnB,UAAAC,EAAAC,MAAA7B,EAAAM,SAAAC,SACA4C,EAAAL,IAAArB,aAAAzB,EAAAM,SAAAV,SAAA8B,wBACAH,EAAAuB,IAAAvB,OAAA,GAAAC,GAAAxB,EAAAM,SAAAC,QAeA,IALAP,EAAAqC,aAAAS,IAAApT,MAAAsQ,EAAAqC,aACAV,EAAAvC,MAAAY,EAAAqC,aACAU,IAGA/C,EAAAvO,QAAA2R,gBAAA,CACA,GAAAC,GAAAC,EAAAtU,KAAAgR,EAAAmD,GACAI,EAAAF,EAAAlE,UACAqE,EAAAH,EAAA9B,MAEAI,GAAA8B,GAAAF,EAAAG,OACAnC,EAAAkC,EAAAD,EAAAG,KACAhC,EAAA8B,EAAAF,EAAAG,MAGA/B,EAAA8B,GAAAF,EAAAI,OACApC,EAAAkC,EAAAD,EAAAE,KACA/B,EAAA8B,EAAAF,EAAAI,MAGAhC,EAAAiC,GAAAL,EAAAM,OACAtC,EAAAqC,EAAAJ,EAAAM,KACAnC,EAAAiC,EAAAL,EAAAM,MAGAlC,EAAAiC,GAAAL,EAAAO,OACAvC,EAAAqC,EAAAJ,EAAAK,KACAlC,EAAAiC,EAAAL,EAAAO,MAGAf,IACAgB,EAAA/U,KAAAgR,GACAgE,EAAAhV,KAAAgR,GAGA,QAAAsD,GAAA1D,GACA,GAAAI,GAAAvR,KACA2Q,EAAAY,EAAAqC,aACA4B,EAAArE,EAAAjO,MACAuS,EAAAtE,EAAA5L,OACAmQ,EAAAnE,EAAAM,SAAAX,SAAAyE,YAAA,EACAC,EAAArE,EAAAM,SAAAX,SAAA2E,aAAA,EACAC,EAAAvE,EAAAM,SAAAC,QAAAmB,wBACA8C,EAAAD,EAAA5S,MACA8S,EAAAF,EAAAvQ,OACA0Q,EAAAT,EAAA,EACAU,EAAAT,EAAA,EAEAR,GAAAgB,EAAAtF,EAAA+E,MACAR,EAAAD,GAAAc,GAAA,EAAApF,GAAA6E,GAAA,EAAA7E,IAEAyE,GAAAc,EAAAvF,EAAAiF,MACAP,EAAAD,GAAAY,GAAA,EAAArF,GAAA8E,GAAA,EAAA9E,IAEAwF,EAAA,EAAAxF,EAAAsF,EACAG,EAAAL,GAAA,EAAApF,GAAAwF,EAEAE,EAAA,EAAA1F,EAAAuF,EACAI,EAAAN,GAAA,EAAArF,GAAA0F,CAEA,QACA3F,WACAuE,OACAC,OACAE,OACAC,QAEAvC,QACAmC,KAAAmB,EACAlB,KAAAiB,EACAf,KAAAkB,EACAjB,KAAAgB,IAKA,QAAAE,KACA,GAAAhF,GAAAvR,KACA2Q,EAAAY,EAAAqC,aACAhC,EAAAL,EAAAM,SAAAC,QAAAmB,wBACAuD,EAAAjF,EAAAM,SAAAV,SAAA8B,wBACAC,EAAAC,EAAAC,MAAA7B,EAAAM,SAAAC,QAAAnD,MAAA6F,IACAiC,EAAA,GAAA1D,GAAAxB,EAAAM,SAAAC,SACA4E,EAAAF,EAAAE,IAAA9E,EAAA8E,IAAAF,EAAAjR,OAAA,EACAoR,EAAAH,EAAAG,KAAA/E,EAAA+E,KAAAH,EAAAtT,MAAA,EACA0T,KACAC,IAEAD,GAAAzB,EAAAuB,EAAA/F,EACAiG,EAAA5B,EAAA2B,EAAAhG,EAEAkG,EAAA1B,GAAAyB,EAAAzB,EAAAsB,EAAAtB,IAAA,EAAAxE,GACAkG,EAAA7B,GAAA4B,EAAA5B,EAAAyB,EAAAzB,IAAA,EAAArE,GAEAuC,EAAA8B,GAAA6B,EAAA7B,EACA9B,EAAAiC,GAAA0B,EAAA1B,CAEA,IAAA2B,KACAA,GAAArC,GAAAmC,EAAA5B,EAAA,MAAA4B,EAAAzB,EAAA,KACA2B,EAAAtC,GAAAtB,EAAArM,WACAe,EAAA2J,EAAAM,SAAAC,QAAAgF,GAGA,QAAA7E,KASA,QAAA8E,GAAAC,EAAAtD,GACA,GAAAoC,GAAAvE,EAAAM,SAAAC,QAAAmB,wBACAyD,EAAAxD,EAAAiC,EAAAzB,EACAiD,EAAAzD,EAAA8B,EAAAgC,CAEAzF,GAAAvO,QAAA2R,iBACAD,EAAAgC,IAAAZ,EAAAY,IAAAhD,GAAAgB,EAAAuC,OAAAnB,EAAAmB,OAAAvD,IACAR,EAAAiC,EAAAuB,GAGAhC,EAAAiC,KAAAb,EAAAa,KAAAK,GAAAtC,EAAAwC,MAAApB,EAAAoB,MAAAF,IACA9D,EAAA8B,EAAA2B,KAIAzD,EAAAiC,EAAAuB,EACAxD,EAAA8B,EAAA2B,GAIA,QAAAQ,GAAA7D,GA0BA,QAAA8D,GAAAxV,GACA,OAAAA,GACA,IAAAyV,GACA,WACA,KAAAC,GACA,WACA,KAAAC,GACA,YACA,KAAAC,GACA,cAlCA,GAAAH,GAAA,GACAC,EAAA,GACAC,EAAA,GACAC,EAAA,EAEA,KAAAlE,EAAAmE,UAAAnE,EAAAoE,SAAAJ,GAAAhE,EAAAoE,SAAAF,GAUA,GAAAlE,EAAAoE,SAAA,IAAApE,EAAAoE,SAAA,IACApE,EAAAO,gBACA,IAAA8D,GAAAP,EAAA9D,EAAAoE,QAEAxE,GAAAC,EAAAC,MAAA7B,EAAAM,SAAAC,SACA5I,SAAA0O,KAAAjJ,MAAAkJ,GAAA,OACAnD,EAAAnD,EAAAM,SAAAV,SAAA8B,wBACA6E,EAAAH,QAjBA,CACA,GAAAI,GAAA,CAEAA,GADAzE,EAAAoE,SAAAJ,EACAzE,WAAAtB,EAAAM,SAAAU,OAAAtR,MAAA,IAAA4R,WAAAtB,EAAAM,SAAAU,OAAAyB,KAAA,IAGAnB,WAAAtB,EAAAM,SAAAU,OAAAtR,MAAA,IAAA4R,WAAAtB,EAAAM,SAAAU,OAAAyB,KAAA,IAEAzC,EAAAyG,QAAAD,IA0BA,QAAAD,GAAAH,GACA,GAAAX,GAAAW,EAAA,GACAjE,EAAAiE,EAAA,GACAb,IAEAC,GAAAC,EAAAtD,GAEAoD,EAAAtC,GAAAtB,EAAArM,WACAe,EAAA2J,EAAAM,SAAAC,QAAAgF,GACAmB,EAAA1X,KAAAgR,GACArI,SAAA0O,KAAAjJ,MAAAkJ,GAAA,GACAtB,EAAAhW,KAAAgR,GACAgE,EAAAhV,KAAAgR,GACA2G,EAAA,EAGA,QAAAC,GAAA7E,GAEA,GADAA,EAAAO,kBACAuE,EAAA,CAKA,GAJAA,GAAA,EACAC,EAAA/E,EAAAgF,MACAC,EAAAjF,EAAAkF,MAEAlF,EAAAmF,QAAA,CACA,GAAAA,GAAAnF,EAAAmF,QAAA,EACAJ,GAAAI,EAAAH,MACAC,EAAAE,EAAAD,MAGAtF,EAAAC,EAAAC,MAAA7B,EAAAM,SAAAC,SACAnG,OAAAwI,iBAAA,YAAAuE,GACA/M,OAAAwI,iBAAA,YAAAuE,GACA/M,OAAAwI,iBAAA,UAAAwE,GACAhN,OAAAwI,iBAAA,WAAAwE,GACAzP,SAAA0O,KAAAjJ,MAAAkJ,GAAA,OACAnD,EAAAnD,EAAAM,SAAAV,SAAA8B,yBAGA,QAAAyF,GAAApF,GACAA,EAAAO,gBACA,IAAAyE,GAAAhF,EAAAgF,MACAE,EAAAlF,EAAAkF,KAEA,IAAAlF,EAAAmF,QAAA,CACA,GAAAA,GAAAnF,EAAAmF,QAAA,EACAH,GAAAG,EAAAH,MACAE,EAAAC,EAAAD,MAGA,GAAAxB,GAAAsB,EAAAD,EACA3E,EAAA8E,EAAAD,EACAzB,IAEA,iBAAAxD,EAAAxQ,MACAwQ,EAAAmF,QAAAlX,OAAA,GACA,GAAAqX,GAAAtF,EAAAmF,QAAA,GACAI,EAAAvF,EAAAmF,QAAA,GACAK,EAAAjI,KAAAkI,MAAAH,EAAAN,MAAAO,EAAAP,QAAAM,EAAAN,MAAAO,EAAAP,QAAAM,EAAAJ,MAAAK,EAAAL,QAAAI,EAAAJ,MAAAK,EAAAL,OAEAN,KACAA,EAAAY,EAAAvH,EAAAqC,aAGA,IAAAjD,GAAAmI,EAAAZ,CAIA,OAFA7F,GAAA9R,KAAAgR,EAAAZ,OACA1C,GAAAsD,EAAAM,SAAAU,QAKAwE,EAAAC,EAAAtD,GAEAoD,EAAAtC,GAAAtB,EAAArM,WACAe,EAAA2J,EAAAM,SAAAC,QAAAgF,GACAmB,EAAA1X,KAAAgR,GACAgH,EAAAC,EACAH,EAAAC,EAGA,QAAAK,KACAP,GAAA,EACAzM,OAAAqN,oBAAA,YAAAN,GACA/M,OAAAqN,oBAAA,YAAAN,GACA/M,OAAAqN,oBAAA,UAAAL,GACAhN,OAAAqN,oBAAA,WAAAL,GACAzP,SAAA0O,KAAAjJ,MAAAkJ,GAAA,GACAtB,EAAAhW,KAAAgR,GACAgE,EAAAhV,KAAAgR,GACA2G,EAAA,EA7JA,GAEAG,GACAE,EACAL,EACAxD,EACAxB,EANA3B,EAAAvR,KACAoY,GAAA,CA+JA7G,GAAAM,SAAAT,QAAA+C,iBAAA,YAAAgE,GACA5G,EAAAM,SAAAV,SAAAgD,iBAAA,UAAAgD,GACA5F,EAAAM,SAAAT,QAAA+C,iBAAA,aAAAgE,GAGA,QAAAF,KACA,GAAA1G,GAAAvR,KACAiZ,EAAA1H,EAAAM,SAAAX,SAAA+B,wBACAiG,EAAA3H,EAAAM,SAAAC,QAAAmB,uBAEArL,GAAA2J,EAAAM,SAAAT,SACAlO,MAAAgW,EAAAhW,MAAA,KACAqC,OAAA2T,EAAA3T,OAAA,KACAmR,IAAAwC,EAAAxC,IAAAuC,EAAAvC,IAAA,KACAC,KAAAuC,EAAAvC,KAAAsC,EAAAtC,KAAA,OAKA,QAAApB,KACA,GAEAjC,GAFA/B,EAAAvR,KACA4R,EAAAL,EAAA5L,KAGA,IAAAwT,EAAA5Y,KAAAgR,GAKA,GADAA,EAAAvO,QAAAwG,OAAAjJ,KAAAgR,EAAAK,GACAL,EAAA6H,EACA7H,EAAA6H,EAAA7H,EAAArD,SAAAmL,QAAA,SAAAzH,OAEA,CACA,GAAA0B,EACA3H,QAAA2N,YACAhG,EAAA,GAAAgG,aAAA,UAAgD3F,OAAA/B,KAEhD0B,EAAApK,SAAAkF,YAAA,eACAkF,EAAAiG,gBAAA,eAAA3H,IAGAL,EAAArD,QAAAI,cAAAgF,IAIA,QAAA6F,KACA,MAAAnZ,MAAA6R,SAAAC,QAAA0H,aAAA,GAAAxZ,KAAA6R,SAAAC,QAAA2H,YAAA,EAGA,QAAAC,KACA,GAUAR,GACA1C,EACAmD,EACAC,EACAC,EAdAtI,EAAAvR,KACA8Z,EAAA,EACAC,EAAA,IACAC,EAAA,EACAC,KACA5W,EAAAkO,EAAAM,SAAAC,QACAS,EAAAhB,EAAAM,SAAAU,OACA2H,EAAA,GAAA/G,GAAA,IAAA6G,GACAG,EAAA,GAAApH,GACAqH,EAAAjB,EAAA5Y,KAAAgR,EAOA,IAAA6I,IAAA7I,EAAAK,KAAAyI,MAAA,CAiBA,GAZA9I,EAAAK,KAAAyI,OAAA,EACAJ,EAAAzF,GAAA0F,EAAArT,WACAoT,EAAAxF,GAAA0F,EAAAtT,WACAoT,EAAA,UACArS,EAAAvE,EAAA4W,GAEAf,EAAA7V,EAAA4P,wBACAuD,EAAAjF,EAAAM,SAAAV,SAAA8B,wBACA0G,EAAApI,EAAAM,SAAAX,SAAA+B,wBACA1B,EAAA+I,oBAAApB,EAAAhW,MACAqO,EAAAgJ,qBAAArB,EAAA3T,OAEAgM,EAAAvO,QAAAkP,WAAA,CACAX,EAAAvO,QAAA2R,kBACAiF,EAAApD,EAAAtT,MAAAgW,EAAAhW,MACA2W,EAAArD,EAAAjR,OAAA2T,EAAA3T,OACAuU,EAAAjJ,KAAA4B,IAAAmH,EAAAC,IAGAC,GAAAC,IACAA,EAAAD,EAAA,GAGAvH,EAAAG,IAAAF,EAAAsH,EAAA,GACAvH,EAAAE,IAAAD,EAAAuH,EAAA,EACA,IAAAS,GAAA3J,KAAA4B,IAAAkH,EAAAzW,MAAAgW,EAAAhW,MAAAyW,EAAApU,OAAA2T,EAAA3T,OACAyU,GAAA,OAAAzI,EAAAK,KAAA6I,UAAAlJ,EAAAK,KAAA6I,UAAAD,EACAnI,EAAA9R,KAAAgR,EAAAyI,GACA/L,EAAAsE,OAGAhB,GAAAqC,aAAAoG,CAGAE,GAAAvJ,MAAAY,EAAAqC,aACAqG,EAAAzF,GAAA0F,EAAArT,WACAe,EAAAvE,EAAA4W,GAEA1I,EAAAK,KAAA8I,OAAAnZ,OACAoZ,EAAApa,KAAAgR,IAAAK,KAAA8I,QAGAE,EAAAra,KAAAgR,GAGAgF,EAAAhW,KAAAgR,GACA0G,EAAA1X,KAAAgR,IAGA,QAAAoJ,GAAAD,GACA,MAAAA,EAAAnZ,OACA,qDAAAmZ,CAEA,IAAAnJ,GAAAvR,KACA6a,EAAAH,EAAA,GAAAA,EAAA,GAEAlE,EAAAjF,EAAAM,SAAAV,SAAA8B,wBACAgG,EAAA1H,EAAAM,SAAAX,SAAA+B,wBACA6H,GACAnE,KAAAH,EAAAG,KAAAsC,EAAAtC,KACAD,IAAAF,EAAAE,IAAAuC,EAAAvC,KAEA/F,EAAA6F,EAAAtT,MAAA2X,EACAE,EAAAL,EAAA,GACAM,EAAAN,EAAA,GACAO,KAAAP,EAAA,GAAAI,EAAApE,IACAwE,KAAAR,EAAA,GAAAI,EAAAnE,KACAG,IAEAA,GAAArC,GAAAuG,EAAA,MAAAD,EAAA,KACAjE,EAAAtC,GAAA,GAAArB,GAAA+H,EAAAD,EAAAtK,GAAA9J,WACAe,EAAA2J,EAAAM,SAAAC,QAAAgF,GAEAzE,EAAA9R,KAAAgR,EAAAZ,GACAY,EAAAqC,aAAAjD,EAGA,QAAAiK,KACA,GAAArJ,GAAAvR,KACAmb,EAAA5J,EAAAM,SAAAC,QAAAmB,wBACAmI,EAAA7J,EAAAM,SAAAV,SAAA8B,wBACAoI,EAAA9J,EAAAM,SAAAX,SAAA+B,wBACAqI,EAAAF,EAAAzE,KAAA0E,EAAA1E,KACA4E,EAAAH,EAAA1E,IAAA2E,EAAA3E,IACA8E,EAAAF,GAAAH,EAAAjY,MAAAkY,EAAAlY,OAAA,EACAuY,EAAAF,GAAAJ,EAAA5V,OAAA6V,EAAA7V,QAAA,EACA2N,EAAA,GAAAC,GAAAqI,EAAAC,EAAAlK,EAAAqC,aAEAhM,GAAA2J,EAAAM,SAAAC,QAAA0C,EAAAtB,EAAArM,YAGA,QAAA6U,GAAAC,GACA,GAAApK,GAAAvR,KACAsQ,EAAAiB,EAAAM,SAAAvB,OACAjN,EAAAkO,EAAAM,SAAAxO,IACAkN,EAAAD,EAAAE,WAAA,MACAoL,EAAAjK,EAAApR,KAAAgR,GACAoK,EAAApK,EAAAvO,QAAA0O,mBAAAiK,CAEApL,GAAAsL,UAAA,IAAAvL,EAAApN,MAAAoN,EAAA/K,QACA+K,EAAApN,MAAAG,EAAAH,MACAoN,EAAA/K,OAAAlC,EAAAkC,OAEAqW,EACA5L,EAAA3M,EAAA,SAAA8M,GACAE,EAAAC,EAAAjN,EAAA6L,EAAAiB,EAAA,KACAwL,GACAtL,EAAAC,EAAAjN,EAAAsY,KAGSA,GACTtL,EAAAC,EAAAjN,EAAAsY,GAIA,QAAAG,GAAAlK,GACA,GAAAL,GAAAvR,KACA0a,EAAA9I,EAAA8I,OACA/D,EAAAzH,EAAAwL,EAAA,IACAhE,EAAAxH,EAAAwL,EAAA,IACAxX,EAAAwX,EAAA,GAAAA,EAAA,GACAnV,EAAAmV,EAAA,GAAAA,EAAA,GACAqB,EAAAnK,EAAAmK,OACAzL,EAAApH,SAAAC,cAAA,UACAoH,EAAAD,EAAAE,WAAA,MACAwL,EAAA9Y,EACA+Y,EAAA1W,EACA2W,EAAA,EACAC,EAAA,CAyCA,OAvCAvK,GAAAwK,aAAAxK,EAAAyK,eACAL,EAAApK,EAAAwK,YACAH,EAAArK,EAAAyK,cAGA/L,EAAApN,MAAA8Y,EACA1L,EAAA/K,OAAA0W,EAEArK,EAAA0K,kBACA/L,EAAAgM,UAAA3K,EAAA0K,gBACA/L,EAAAiM,SAAA,IAAAR,EAAAC,IAGAtF,EAAA,IACAuF,EAAArL,KAAA4L,IAAA9F,GACAA,EAAA,GAEAD,EAAA,IACAyF,EAAAtL,KAAA4L,IAAA/F,GACAA,EAAA,GAEAC,EAAAzT,EAAAqO,EAAA+I,sBACApX,EAAAqO,EAAA+I,oBAAA3D,EACAqF,EAAA9Y,GAEAwT,EAAAnR,EAAAgM,EAAAgJ,uBACAhV,EAAAgM,EAAAgJ,qBAAA7D,EACAuF,EAAA1W,GAGAgL,EAAAQ,UAAA/Q,KAAA6R,SAAAC,QAAA6E,EAAAD,EAAAxT,EAAAqC,EAAA2W,EAAAC,EAAAH,EAAAC,GACAF,IACAxL,EAAAgM,UAAA,OACAhM,EAAAmM,yBAAA,iBACAnM,EAAAoM,YACApM,EAAAqM,IAAAZ,EAAA,EAAAC,EAAA,EAAAD,EAAA,MAAAnL,KAAAC,IAAA,GACAP,EAAAsM,YACAtM,EAAAuM,QAEAxM,EAGA,QAAAyM,GAAAnL,GACA,GAAA8I,GAAA9I,EAAA8I,OACAsC,EAAA9T,SAAAC,cAAA,OACA9F,EAAA6F,SAAAC,cAAA,OACAjG,EAAAwX,EAAA,GAAAA,EAAA,GACAnV,EAAAmV,EAAA,GAAAA,EAAA,EAcA,OAZA9L,GAAAoO,EAAA,kBACAA,EAAAvU,YAAApF,GACAuE,EAAAvE,GACAsT,QAAA+D,EAAA,QACAhE,OAAAgE,EAAA,UAEArX,EAAAiM,IAAAsC,EAAAqL,IACArV,EAAAoV,GACA9Z,QAAA,KACAqC,SAAA,OAGAyX,EAGA,QAAAE,GAAAtL,GACA,MAAAkK,GAAAvb,KAAAP,KAAA4R,GAAAuL,UAAAvL,EAAAzO,OAAAyO,EAAA7O,SAGA,QAAAqa,GAAAxL,GACA,GAAAL,GAAAvR,IACA,WAAA2P,SAAA,SAAAC,EAAAC,GACAiM,EAAAvb,KAAAgR,EAAAK,GAAAyL,OAAA,SAAAhY,GACAuK,EAAAvK,IACauM,EAAAzO,OAAAyO,EAAA7O,WAIb,QAAAua,GAAAta,EAAAiN,GACA,GACAgN,GADA1L,EAAAvR,KAEA0a,KACA3C,EAAA,IAEA,uBACAkF,EAAAja,EACAA,SAEA,IAAAgC,MAAAuY,QAAAva,GACA0X,EAAA1X,EAAA8B,YAEA,2BAAAyM,EAAAK,KAAAqL,IAGA,MAFAvD,GAAAnZ,KAAAgR,GACAgE,EAAAhV,KAAAgR,GACA,IAGA0L,GAAAja,EAAAia,IACAvC,EAAA1X,EAAA0X,WACA3C,EAAA,mBAAA/U,GAAA,UAAAA,EAAA+U,KAGAxG,EAAAK,KAAAyI,OAAA,EACA9I,EAAAK,KAAAqL,OAAA1L,EAAAK,KAAAqL,IACA1L,EAAAK,KAAA8I,WAAAnJ,EAAAK,KAAA8I,QAAA8C,IAAA,SAAA9c,GACA,MAAAmS,YAAAnS,KAEA6Q,EAAAK,KAAA6I,UAAA1C,CACA,IAAAtI,GAAAJ,EAAA4N,EAAA1L,EAAAM,SAAAxO,IAAAkO,EAAAvO,QAAAwM,UAYA,OAXAC,GAAArM,KAAA,WACAmO,EAAAvO,QAAAwM,YACA+B,EAAAM,SAAAxO,IAAAoa,SAAA,KACA/B,EAAAnb,KAAAgR,EAAAvO,EAAAmN,aAAA,IAEAuJ,EAAAnZ,KAAAgR,GACAgE,EAAAhV,KAAAgR,GACAtB,GACAA,MAGAR,EAGA,QAAA+C,GAAArD,EAAAuO,GACA,MAAA7K,YAAA1D,GAAAwO,QAAAD,GAAA,GAGA,QAAAE,KACA,GAAArM,GAAAvR,KACAkZ,EAAA3H,EAAAM,SAAAC,QAAAmB,wBACAuD,EAAAjF,EAAAM,SAAAV,SAAA8B,wBACA4K,EAAArH,EAAAG,KAAAuC,EAAAvC,KACAmH,EAAAtH,EAAAE,IAAAwC,EAAAxC,IACAqH,GAAAvH,EAAAtT,MAAAqO,EAAAM,SAAAV,SAAAsI,aAAA,EACAuE,GAAAxH,EAAAjR,OAAAgM,EAAAM,SAAAV,SAAAqI,cAAA,EACAyE,EAAAJ,EAAAtM,EAAAM,SAAAV,SAAAsI,YAAAsE,EACAG,EAAAJ,EAAAvM,EAAAM,SAAAV,SAAAqI,aAAAwE,EACArN,EAAAY,EAAAqC,cAEAjD,IAAAwN,KAAApM,MAAApB,MACAA,EAAA,EAGA,IAAA8B,GAAAlB,EAAAvO,QAAA2R,gBAAA,EAAAyJ,OAAAC,iBAMA,OALAR,GAAAhN,KAAA4B,MAAAoL,EAAAlN,GACAmN,EAAAjN,KAAA4B,MAAAqL,EAAAnN,GACAsN,EAAApN,KAAA4B,MAAAwL,EAAAtN,GACAuN,EAAArN,KAAA4B,MAAAyL,EAAAvN,IAGA+J,QAAAlI,EAAAqL,GAAArL,EAAAsL,GAAAtL,EAAAyL,GAAAzL,EAAA0L,IACAnG,KAAApH,GAWA,QAAA2N,GAAAtb,GACA,GAWAyM,GAXA8B,EAAAvR,KACA4R,EAAAgM,EAAArd,KAAAgR,GACAgN,EAAAtR,EAAAuR,EAAAvR,KAA4DjK,IAC5Dyb,EAAA,mBAAAzb,EAAAub,EAAAzb,MAAA,SACAG,EAAAsb,EAAAtb,KACAE,EAAAob,EAAApb,OACAJ,EAAAwb,EAAAxb,QACAuZ,EAAAiC,EAAAjC,gBACAP,EAAA,iBAAAwC,GAAAxC,OAAAwC,EAAAxC,OAAA,WAAAxK,EAAAvO,QAAAmO,SAAArO,KACA4R,EAAAnD,EAAAM,SAAAV,SAAA8B,wBACAyL,EAAAhK,EAAAxR,MAAAwR,EAAAnP,MA8CA,OA3CA,aAAAtC,GACA2O,EAAAwK,YAAA1H,EAAAxR,MACA0O,EAAAyK,aAAA3H,EAAAnP,QACS,gBAAAtC,KACTA,EAAAC,OAAAD,EAAAsC,QACAqM,EAAAwK,YAAAnZ,EAAAC,MACA0O,EAAAyK,aAAApZ,EAAAsC,QACatC,EAAAC,OACb0O,EAAAwK,YAAAnZ,EAAAC,MACA0O,EAAAyK,aAAApZ,EAAAC,MAAAwb,GACazb,EAAAsC,SACbqM,EAAAwK,YAAAnZ,EAAAsC,OAAAmZ,EACA9M,EAAAyK,aAAApZ,EAAAsC,SAIAoZ,EAAA5V,QAAA5F,QACAyO,EAAAzO,OAAA,SAAAA,EACAyO,EAAA7O,WAGA6O,EAAAmK,SACAnK,EAAAqL,IAAA1L,EAAAK,KAAAqL,IACArL,EAAA0K,kBAEA7M,EAAA,GAAAE,SAAA,SAAAC,EAAAC,GACA,OAAA4O,EAAA3S,eAEA,gBACA8D,EAAAkM,EAAAvb,KAAAgR,EAAAK,GACA,MACA,cACA,aACAhC,EAAAsN,EAAA3c,KAAAgR,EAAAK,GACA,MACA,YACAwL,EAAA7c,KAAAgR,EAAAK,GAAAxO,KAAAwM,EACA,MACA,SACAA,EAAAmN,EAAAxc,KAAAgR,EAAAK,OAOA,QAAAgN,KACAlF,EAAAnZ,KAAAP,MAGA,QAAA6e,GAAAC,GACA,IAAA9e,KAAAgD,QAAAwM,UACA,uDAGA,IAAA+B,GAAAvR,KACAsQ,EAAAiB,EAAAM,SAAAvB,OAEAyO,GADAxN,EAAAM,SAAAxO,IACA6F,SAAAC,cAAA,WACA6V,EAAA,CAEAD,GAAA7b,MAAAoN,EAAApN,MACA6b,EAAAxZ,OAAA+K,EAAA/K,MACA,IAAAgL,GAAAwO,EAAAvO,WAAA,KACAD,GAAAQ,UAAAT,EAAA,KAEA,KAAAwO,cAAAE,EAAA,GACAF,SAAA,MAAAA,IAAAE,EAAA,GACA,MAAAF,cAAAE,EAAA,GAEA3O,EAAAC,EAAAyO,EAAAC,GACApM,EAAArS,KAAAgR,GAGA,QAAA0N,KACA,GAAA1N,GAAAvR,IACAuR,GAAArD,QAAArF,YAAA0I,EAAAM,SAAAX,UACAlC,EAAAuC,EAAArD,QAAA,qBACAqD,EAAAvO,QAAAkP,YACAX,EAAArD,QAAArF,YAAA0I,EAAAM,SAAAkC,kBAEAxC,GAAAM,SAgDA,QAAAqN,GAAAhR,EAAAqQ,GAIA,GAHAve,KAAAkO,UACAlO,KAAAgD,QAAAiK,OAA+CiS,EAAAC,UAAAZ,GAE/C,QAAAve,KAAAkO,QAAAkR,QAAAtT,cAAA,CACA,GAAAuT,GAAArf,KAAAkO,OACAU,GAAAyQ,EAAA,oBACA,IAAAC,GAAApW,SAAAC,cAAA,MACAnJ,MAAAkO,QAAAtF,WAAAH,YAAA6W,GACAA,EAAA7W,YAAA4W,GACArf,KAAAkO,QAAAoR,EACAtf,KAAAgD,QAAAia,IAAAjd,KAAAgD,QAAAia,KAAAoC,EAAA/P,IAIA,GADA2B,EAAA1Q,KAAAP,MACAA,KAAAgD,QAAAia,IAAA,CACA,GAAAsC,IACAtC,IAAAjd,KAAAgD,QAAAia,IACAvC,OAAA1a,KAAAgD,QAAA0X,cAEA1a,MAAAgD,QAAA,UACAhD,MAAAgD,QAAA,OACAsa,EAAA/c,KAAAP,KAAAuf,IArvCA,kBAAA5P;CAEA,SAAA6P,GAAqB,QAAAC,GAAAD,EAAAC,GAAgB,kBAAkBD,EAAAjU,MAAAkU,EAAAjU,YAAsB,QAAA/K,GAAA+e,GAAc,mBAAAxf,MAAA,SAAAc,WAAA,uCAAqF,sBAAA0e,GAAA,SAAA1e,WAAA,iBAA8Dd,MAAA0f,OAAA,KAAA1f,KAAA2f,OAAA,KAAA3f,KAAA4f,cAAAte,EAAAke,EAAAC,EAAApZ,EAAArG,MAAAyf,EAAAI,EAAA7f,OAA8E,QAAA8f,GAAAN,GAAc,GAAAC,GAAAzf,IAAW,eAAAA,KAAA0f,WAAA1f,MAAA4f,WAAAxa,KAAAoa,OAAAO,GAAA,WAAyE,GAAAtf,GAAAgf,EAAAC,OAAAF,EAAAQ,YAAAR,EAAAS,UAA0C,WAAAxf,EAAA,YAAAgf,EAAAC,OAAAF,EAAA5P,QAAA4P,EAAA3P,QAAA4P,EAAAE,OAA+D,IAAAG,EAAM,KAAIA,EAAArf,EAAAgf,EAAAE,QAAc,MAAAtZ,GAAS,WAAAmZ,GAAA3P,OAAAxJ,GAAwBmZ,EAAA5P,QAAAkQ,KAAe,QAAAzZ,GAAAmZ,GAAc,IAAI,GAAAA,IAAAxf,KAAA,SAAAc,WAAA,4CAA6E,IAAA0e,IAAA,gBAAAA,IAAA,kBAAAA,IAAA,CAAkD,GAAA/e,GAAA+e,EAAApc,IAAa,sBAAA3C,GAAA,WAAAa,GAAAme,EAAAhf,EAAA+e,GAAAC,EAAApZ,EAAArG,MAAAyf,EAAAI,EAAA7f,OAAkEA,KAAA0f,QAAA,EAAA1f,KAAA2f,OAAAH,EAAAU,EAAA3f,KAAAP,MAA0C,MAAA8f,GAASD,EAAAtf,KAAAP,KAAA8f,IAAgB,QAAAD,GAAAL,GAAcxf,KAAA0f,QAAA,EAAA1f,KAAA2f,OAAAH,EAAAU,EAAA3f,KAAAP,MAA0C,QAAAkgB,KAAa,OAAAV,GAAA,EAAAC,EAAAzf,KAAA4f,WAAAre,OAAqCke,EAAAD,EAAIA,IAAAM,EAAAvf,KAAAP,UAAA4f,WAAAJ,GAAoCxf,MAAA4f,WAAA,KAAqB,QAAAnE,GAAA+D,EAAAC,EAAAhf,EAAAqf,GAAoB9f,KAAAggB,YAAA,kBAAAR,KAAA,KAAAxf,KAAAigB,WAAA,kBAAAR,KAAA,KAAAzf,KAAA4P,QAAAnP,EAAAT,KAAA6P,OAAAiQ,EAAsH,QAAAxe,GAAAke,EAAAC,EAAAhf,GAAkB,GAAAqf,IAAA,CAAS,KAAIN,EAAA,SAAAA,GAAcM,OAAA,EAAAL,EAAAD,KAAe,SAAAA,GAAaM,OAAA,EAAArf,EAAA+e,MAAiB,MAAAnZ,GAAS,GAAAyZ,EAAA,MAAYA,IAAA,EAAArf,EAAA4F,IAAW,GAAAkB,GAAAyG,WAAA+R,EAAA,kBAAAtT,OAAA,SAAA+S,GAA8EjY,EAAAiY,EAAA,IAAOW,EAAAnb,MAAAuY,SAAA,SAAAiC,GAA8B,yBAAAze,OAAAgB,UAAA8E,SAAAtG,KAAAif,GAA4D/e,GAAAsB,UAAA,kBAAAyd,GAAiC,MAAAxf,MAAAoD,KAAA,KAAAoc,IAAyB/e,EAAAsB,UAAAqB,KAAA,SAAAoc,EAAAC,GAAgC,GAAApZ,GAAArG,IAAW,WAAAS,GAAA,SAAAA,EAAAof,GAA2BC,EAAAvf,KAAA8F,EAAA,GAAAoV,GAAA+D,EAAAC,EAAAhf,EAAAof,OAA2Bpf,EAAA2f,IAAA,WAAkB,GAAAZ,GAAAxa,MAAAjD,UAAA+C,MAAAvE,KAAA,IAAAiL,UAAAjK,QAAA4e,EAAA3U,UAAA,IAAAA,UAAA,GAAAA,UAA+F,WAAA/K,GAAA,SAAAgf,EAAAhf,GAA2B,QAAAqf,GAAAD,EAAAK,GAAgB,IAAI,GAAAA,IAAA,gBAAAA,IAAA,kBAAAA,IAAA,CAAkD,GAAAzE,GAAAyE,EAAA9c,IAAa,sBAAAqY,GAAA,WAAAA,GAAAlb,KAAA2f,EAAA,SAAAV,GAAyDM,EAAAD,EAAAL,IAAO/e,GAAI+e,EAAAK,GAAAK,EAAA,MAAA7Z,GAAAoZ,EAAAD,GAAqB,MAAAle,GAASb,EAAAa,IAAM,OAAAke,EAAAje,OAAA,MAAAke,MAA6B,QAAApZ,GAAAmZ,EAAAje,OAAAse,EAAA,EAAuBA,EAAAL,EAAAje,OAAWse,IAAAC,EAAAD,EAAAL,EAAAK,OAAgBpf,EAAAmP,QAAA,SAAA4P,GAAuB,MAAAA,IAAA,gBAAAA,MAAAnS,cAAA5M,EAAA+e,EAAA,GAAA/e,GAAA,SAAAgf,GAAoEA,EAAAD,MAAO/e,EAAAoP,OAAA,SAAA2P,GAAsB,UAAA/e,GAAA,SAAAgf,EAAAhf,GAA2BA,EAAA+e,MAAO/e,EAAA4f,KAAA,SAAAb,GAAoB,UAAA/e,GAAA,SAAAgf,EAAAhf,GAA2B,OAAAqf,GAAA,EAAAzZ,EAAAmZ,EAAAje,OAAuB8E,EAAAyZ,EAAIA,IAAAN,EAAAM,GAAA1c,KAAAqc,EAAAhf,MAAqBA,EAAA6f,gBAAA,SAAAd,GAA+BO,EAAAP,GAAI,mBAAA3f,MAAAD,QAAAC,EAAAD,QAAAa,EAAA+e,EAAA7P,UAAA6P,EAAA7P,QAAAlP,IAAsFT,MAG/2E,kBAAA2L,QAAA2N,cACA,WACA,QAAAA,GAAAiH,EAAAC,GACAA,MAAoCC,SAAA,EAAAC,YAAA,EAAA/M,OAAAjO,OACpC,IAAAyI,GAAAjF,SAAAkF,YAAA,cAEA,OADAD,GAAAoL,gBAAAgH,EAAAC,EAAAC,QAAAD,EAAAE,WAAAF,EAAA7M,QACAxF,EAEAmL,EAAAvX,UAAA4J,OAAAgV,MAAA5e,UACA4J,OAAA2N,iBAIAsH,kBAAA7e,UAAAsb,QACAtc,OAAAC,eAAA4f,kBAAA7e,UAAA,UACAd,MAAA,SAAA4f,EAAA/d,EAAAC,GAKA,OAJA+d,GAAArc,KAAAzE,KAAAmd,UAAAra,EAAAC,GAAAge,MAAA,SACAC,EAAAF,EAAAvf,OACA0f,EAAA,GAAA9b,YAAA6b,GAEA1f,EAAA,EAA6BA,EAAA0f,EAAO1f,IACpC2f,EAAA3f,GAAAwf,EAAA7b,WAAA3D,EAGAuf,GAAA,GAAAvb,OAAA2b,IAA4Cne,QAAA,iBAM5C,IAEA2R,GACAD,EACAqD,EAJA7K,GAAA,qBACAH,EAAA3D,SAAAC,cAAA,OAAAwF,KAqBA6F,GAAA7H,EAAA,aACA8H,EAAA9H,EAAA,mBACAkL,EAAAlL,EAAA,aA4GA,IAAAuU,GAAA,cACAC,EAAA,QACAhO,EAAA,SAAA6B,EAAAG,EAAAxE,GACA3Q,KAAAgV,EAAAnC,WAAAmC,GACAhV,KAAAmV,EAAAtC,WAAAsC,GACAnV,KAAA2Q,MAAAkC,WAAAlC,GAGAwC,GAAAC,MAAA,SAAAjE,GACA,MAAAA,GAAAR,MACAwE,EAAAC,MAAAjE,EAAAR,MAAA6F,IAEArF,EAAApG,QAAA,cAAAoG,EAAApG,QAAA,WACAoK,EAAAiO,WAAAjS,GAGAgE,EAAAkO,WAAAlS,IAIAgE,EAAAiO,WAAA,SAAAjS,GACA,GAAAmS,GAAAnS,EAAAW,UAAA,GAAAiR,MAAA,IAKA,OAJAO,GAAA/f,QAAA,SAAA4N,IACAmS,GAAA,cAGA,GAAAnO,GAAAjE,EAAAoS,EAAA,IAAApS,EAAAoS,EAAA,IAAAzO,WAAAyO,EAAA,MAGAnO,EAAAkO,WAAA,SAAAlS,GACA,GAAAoS,GAAApS,EAAA4R,MAAA,MACArQ,EAAA6Q,EAAA,GAAAzR,UAAAoR,EAAA3f,OAAA,GAAAwf,MAAA,KACApQ,EAAA4Q,EAAAhgB,OAAA,EAAAggB,EAAA,GAAAzR,UAAA,KACAkF,EAAAtE,EAAAnP,OAAA,EAAAmP,EAAA,KACAyE,EAAAzE,EAAAnP,OAAA,EAAAmP,EAAA,IAEA,WAAAyC,GAAA6B,EAAAG,EAAAxE,IAGAwC,EAAApR,UAAA8E,SAAA,WACA,MAAAqa,GAAA,IAAAlhB,KAAAgV,EAAA,OAAAhV,KAAAmV,EAAA,KAAAgM,EAAA,WAAAnhB,KAAA2Q,MAAA,IAGA,IAAAoC,GAAA,SAAAvE,GACA,IAAAA,MAAAG,MAAA8F,GAGA,MAFAzU,MAAAgV,EAAA,OACAhV,KAAAmV,EAAA,EAGA,IAAAvN,GAAA4G,EAAAG,MAAA8F,GAAAsM,MAAA,IACA/gB,MAAAgV,EAAAnC,WAAAjL,EAAA,IACA5H,KAAAmV,EAAAtC,WAAAjL,EAAA,IAGAmL,GAAAhR,UAAA8E,SAAA,WACA,MAAA7G,MAAAgV,EAAA,MAAAhV,KAAAmV,EAAA,KAyhBA,IAAAG,GAAAhI,EAAA2K,EAAA,KAkVAuG,GACA1b,KAAA,SACAK,OAAA,MACAJ,QAAA,GAEA4b,GAAA,oBAoGA,IAAAhT,OAAA6V,OAAA,CACA,GAAApI,IAAAzN,OAAA6V,MACApI,IAAA/N,GAAArJ,QAAA,SAAAuc,GACA,GAAAkD,SAAAlD,EAEA,eAAAkD,EAAA,CACA,GAAA7T,GAAA5I,MAAAjD,UAAA+C,MAAAvE,KAAAiL,UAAA,GACAkW,EAAAtI,GAAApZ,MAAA4R,KAAA,UAEA,eAAA2M,EACAmD,EAAA/b,MAEA,WAAA4Y,EACAmD,EAAA7e,OAAA0I,MAAAmW,EAAA9T,GAEA,SAAA2Q,EACAmD,EAAAxd,KAAAqH,MAAAmW,EAAA9T,GAGA5N,KAAA2hB,KAAA,WACA,GAAArgB,GAAA8X,GAAApZ,MAAA4R,KAAA,UACA,IAAAtQ,EAAA,CAEA,GAAAsgB,GAAAtgB,EAAAid,EACA,KAAAnF,GAAAyI,WAAAD,GAOA,gBAAArD,EAAA,mBANAqD,GAAArW,MAAAjK,EAAAsM,GACA,YAAA2Q,GACAnF,GAAApZ,MAAA8hB,WAAA,cASA,MAAA9hB,MAAA2hB,KAAA,WACA,GAAArgB,GAAA,GAAA4d,GAAAlf,KAAAue,EACAjd,GAAA8X,KACAA,GAAApZ,MAAA4R,KAAA,UAAAtQ,MAgCA4d,EAAAC,UACAhO,UACAjO,MAAA,IACAqC,OAAA,IACAzC,KAAA,UAEAoO,YACA6Q,qBACAC,SAAA,EACAC,UAAA,GACAC,WAAA,IAEAlQ,YAAA,GACAkC,YAAA,EACAhC,YAAA,EACAkC,gBAAA,EACAhC,YAAA,EACAuC,iBAAA,EACAjD,mBAAA,EACAlI,OAAA,cAGAyD,EAAAiS,EAAAnd,WACAmC,KAAA,SAAAlB,EAAAiN,GACA,MAAAqN,GAAA/c,KAAAP,KAAAgD,EAAAiN,IAEAtK,IAAA,WACA,MAAAiY,GAAArd,KAAAP,OAEA6C,OAAA,SAAAC,GACA,MAAAwb,GAAA/d,KAAAP,KAAA8C,IAEAqf,QAAA,WACA,MAAAvD,GAAAre,KAAAP,OAEAgY,QAAA,SAAA7I,GACAkD,EAAA9R,KAAAP,KAAAmP,GACAlB,EAAAjO,KAAA6R,SAAAU,SAEA3B,OAAA,SAAAkO,GACAD,EAAAte,KAAAP,KAAA8e,IAEAsD,QAAA,WACA,MAAAnD,GAAA1e,KAAAP,SAIAJ,EAAAsf,QAAAvT,OAAAuT,UAEA,gBAAArf,MAAAD,UACAC,EAAAD,QAAAsf,OP6iB8B3e,KAAKX,EAASM,EAAoB,GAAGuM,aAAcvM,EAAoB,KAI/F,SAASL,EAAQD,EAASM,IQh3DhC,SAAAuM,EAAA4V,GAiBA,QAAAC,GAAAjiB,EAAAkiB,GACAviB,KAAAwiB,IAAAniB,EACAL,KAAAyiB,SAAAF,EAnBA,GAAAG,GAAAxiB,EAAA,GAAAwiB,SACAnX,EAAAoX,SAAA5gB,UAAAwJ,MACAzG,EAAAE,MAAAjD,UAAA+C,MACA8d,KACAC,EAAA,CAIAjjB,GAAAoO,WAAA,WACA,UAAAsU,GAAA/W,EAAAhL,KAAAyN,WAAArC,OAAAH,WAAAuC,eAEAnO,EAAAkjB,YAAA,WACA,UAAAR,GAAA/W,EAAAhL,KAAAuiB,YAAAnX,OAAAH,WAAAuX,gBAEAnjB,EAAAmO,aACAnO,EAAAmjB,cAAA,SAAArV,GAA2CA,EAAAsV,SAM3CV,EAAAvgB,UAAAkhB,MAAAX,EAAAvgB,UAAAmhB,IAAA,aACAZ,EAAAvgB,UAAAihB,MAAA,WACAhjB,KAAAyiB,SAAAliB,KAAAoL,OAAA3L,KAAAwiB,MAIA5iB,EAAAujB,OAAA,SAAArc,EAAAsc,GACArV,aAAAjH,EAAAuc,gBACAvc,EAAAwc,aAAAF,GAGAxjB,EAAA2jB,SAAA,SAAAzc,GACAiH,aAAAjH,EAAAuc,gBACAvc,EAAAwc,iBAGA1jB,EAAA4jB,aAAA5jB,EAAA6jB,OAAA,SAAA3c,GACAiH,aAAAjH,EAAAuc,eAEA,IAAAD,GAAAtc,EAAAwc,YACAF,IAAA,IACAtc,EAAAuc,eAAArV,WAAA,WACAlH,EAAA4c,YACA5c,EAAA4c,cACKN,KAKLxjB,EAAA6M,aAAA,kBAAAA,KAAA,SAAApB,GACA,GAAAhL,GAAAwiB,IACAjV,IAAApC,UAAAjK,OAAA,IAAAuD,EAAAvE,KAAAiL,UAAA,EAkBA,OAhBAoX,GAAAviB,IAAA,EAEAqiB,EAAA,WACAE,EAAAviB,KAGAuN,EACAvC,EAAAE,MAAA,KAAAqC,GAEAvC,EAAA9K,KAAA,MAGAX,EAAAyiB,eAAAhiB,MAIAA,GAGAT,EAAAyiB,eAAA,kBAAAA,KAAA,SAAAhiB,SACAuiB,GAAAviB,MRo3D8BE,KAAKX,EAASM,EAAoB,GAAGuM,aAAcvM,EAAoB,GAAGmiB,iBAIlG,SAASxiB,EAAQD,GSv7DvB,QAAA+jB,KACA,SAAArd,OAAA,mCAEA,QAAAsd,KACA,SAAAtd,OAAA,qCAsBA,QAAAud,GAAAC,GACA,GAAAC,IAAA/V,WAEA,MAAAA,YAAA8V,EAAA,EAGA,KAAAC,IAAAJ,IAAAI,IAAA/V,WAEA,MADA+V,GAAA/V,WACAA,WAAA8V,EAAA,EAEA,KAEA,MAAAC,GAAAD,EAAA,GACK,MAAAzd,GACL,IAEA,MAAA0d,GAAAxjB,KAAA,KAAAujB,EAAA,GACS,MAAAzd,GAET,MAAA0d,GAAAxjB,KAAAP,KAAA8jB,EAAA,KAMA,QAAAE,GAAAC,GACA,GAAAC,IAAAnW,aAEA,MAAAA,cAAAkW,EAGA,KAAAC,IAAAN,IAAAM,IAAAnW,aAEA,MADAmW,GAAAnW,aACAA,aAAAkW,EAEA,KAEA,MAAAC,GAAAD,GACK,MAAA5d,GACL,IAEA,MAAA6d,GAAA3jB,KAAA,KAAA0jB,GACS,MAAA5d,GAGT,MAAA6d,GAAA3jB,KAAAP,KAAAikB,KAYA,QAAAE,KACAC,GAAAC,IAGAD,GAAA,EACAC,EAAA9iB,OACA+iB,EAAAD,EAAAE,OAAAD,GAEAE,KAEAF,EAAA/iB,QACAkjB,KAIA,QAAAA,KACA,IAAAL,EAAA,CAGA,GAAA1W,GAAAmW,EAAAM,EACAC,IAAA,CAGA,KADA,GAAApD,GAAAsD,EAAA/iB,OACAyf,GAAA,CAGA,IAFAqD,EAAAC,EACAA,OACAE,EAAAxD,GACAqD,GACAA,EAAAG,GAAAE,KAGAF,MACAxD,EAAAsD,EAAA/iB,OAEA8iB,EAAA,KACAD,GAAA,EACAJ,EAAAtW,IAiBA,QAAAiX,GAAAb,EAAAc,GACA5kB,KAAA8jB,MACA9jB,KAAA4kB,QAYA,QAAAC,MAhKA,GAOAd,GACAG,EARAY,EAAAjlB,EAAAD,YAgBA,WACA,IAEAmkB,EADA,kBAAA/V,YACAA,WAEA2V,EAEK,MAAAtd,GACL0d,EAAAJ,EAEA,IAEAO,EADA,kBAAAnW,cACAA,aAEA6V,EAEK,MAAAvd,GACL6d,EAAAN,KAuDA,IAEAS,GAFAC,KACAF,GAAA,EAEAI,IAyCAM,GAAApC,SAAA,SAAAoB,GACA,GAAAlW,GAAA,GAAA5I,OAAAwG,UAAAjK,OAAA,EACA,IAAAiK,UAAAjK,OAAA,EACA,OAAAD,GAAA,EAAuBA,EAAAkK,UAAAjK,OAAsBD,IAC7CsM,EAAAtM,EAAA,GAAAkK,UAAAlK,EAGAgjB,GAAAlf,KAAA,GAAAuf,GAAAb,EAAAlW,IACA,IAAA0W,EAAA/iB,QAAA6iB,GACAP,EAAAY,IASAE,EAAA5iB,UAAA2iB,IAAA,WACA1kB,KAAA8jB,IAAAvY,MAAA,KAAAvL,KAAA4kB,QAEAE,EAAAC,MAAA,UACAD,EAAAE,SAAA,EACAF,EAAAG,OACAH,EAAAI,QACAJ,EAAAK,QAAA,GACAL,EAAAM,YAIAN,EAAAO,GAAAR,EACAC,EAAAQ,YAAAT,EACAC,EAAAS,KAAAV,EACAC,EAAAU,IAAAX,EACAC,EAAAW,eAAAZ,EACAC,EAAAY,mBAAAb,EACAC,EAAAa,KAAAd,EAEAC,EAAAc,QAAA,SAAApgB,GACA,SAAAc,OAAA,qCAGAwe,EAAAe,IAAA,WAA2B,WAC3Bf,EAAAgB,MAAA,SAAAC,GACA,SAAAzf,OAAA,mCAEAwe,EAAAkB,MAAA,WAA4B,WTy8DtB,SAASnmB,EAAQD,EAASM,GU5nEhC,GAAAqM,GAAAC,GAAA,WAyTA,QAAAyZ,GAAA5iB,GACA,QAAAA,EAAA,SAIA,QAAA6iB,GAAAC,EAAAxhB,GACAA,KAAAwhB,EAAAC,MAAA,8BAAoE,OACpED,IAAAlX,QAAA,8BAAkD,GAKlD,QAJAoX,GAAA5hB,KAAA0hB,GACAnF,EAAAqF,EAAA9kB,OACA+kB,EAAA,GAAAC,aAAAvF,GACAwF,EAAA,GAAArhB,YAAAmhB,GACAhlB,EAAA,EAAuBA,EAAA0f,EAAS1f,IAChCklB,EAAAllB,GAAA+kB,EAAAphB,WAAA3D,EAEA,OAAAglB,GAGA,QAAAG,GAAAxJ,EAAA4D,GACA,GAAA6F,GAAA,GAAAC,eACAD,GAAAE,KAAA,MAAA3J,GAAA,GACAyJ,EAAAG,aAAA,OACAH,EAAAziB,OAAA,SAAAoC,GACA,KAAArG,KAAA8mB,QAAA,IAAA9mB,KAAA8mB,QACAjG,EAAA7gB,KAAA+mB,WAGAL,EAAAM,OAGA,QAAAC,GAAA5jB,EAAAwd,GACA,QAAAqG,GAAAC,GACA,GAAAvV,GAAAwV,EAAAD,GACAE,EAAAC,EAAAH,EACA9jB,GAAAoa,SAAA7L,MACAvO,EAAAgkB,eACAxG,GACAA,EAAAtgB,KAAA8C,GAIA,GAAAA,EAAAiM,IACA,cAAA5D,KAAArI,EAAAiM,KAAA,CACA,GAAAiY,GAAArB,EAAA7iB,EAAAiM,IACA4X,GAAAK,OAEa,eAAA7b,KAAArI,EAAAiM,KAAA,CACb,GAAAkY,GAAA,GAAAxjB,WACAwjB,GAAAvjB,OAAA,SAAAoC,GACA6gB,EAAA7gB,EAAAjF,OAAAyB,SAEA4jB,EAAApjB,EAAAiM,IAAA,SAAAjK,GACAmiB,EAAAC,kBAAApiB,SAEa,CACb,GAAAqhB,GAAA,GAAAC,eACAD,GAAAziB,OAAA,WACA,QAAAjE,KAAA8mB,QAAA,IAAA9mB,KAAA8mB,OAGA,2BAFAI,GAAAR,EAAAK,UAIAL,EAAA,MAEAA,EAAAE,KAAA,MAAAvjB,EAAAiM,KAAA,GACAoX,EAAAG,aAAA,cACAH,EAAAM,KAAA,UAES,IAAArb,OAAA3H,aAAAX,YAAAsI,QAAArG,MAAAjC,YAAAsI,QAAA+b,MAAA,CACT,GAAAF,GAAA,GAAAxjB,WACAwjB,GAAAvjB,OAAA,SAAAoC,GACAshB,GAAAC,QAAAC,IAAA,sBAAAxhB,EAAAjF,OAAAyB,OAAAilB,YACAZ,EAAA7gB,EAAAjF,OAAAyB,SAGA2kB,EAAAC,kBAAApkB,IAIA,QAAA+jB,GAAAW,GACA,GAAAC,GAAA,GAAAC,UAAAF,EAGA,IADAJ,GAAAC,QAAAC,IAAA,sBAAAE,EAAAD,YACA,KAAAE,EAAAE,SAAA,SAAAF,EAAAE,SAAA,GAEA,MADAP,IAAAC,QAAAC,IAAA,qBACA,CAOA,KAJA,GAEA5D,GAFApf,EAAA,EACAtD,EAAAwmB,EAAAD,WAGAjjB,EAAAtD,GAAA,CACA,QAAAymB,EAAAE,SAAArjB,GAEA,MADA8iB,IAAAC,QAAAC,IAAA,gCAAAhjB,EAAA,YAAAmjB,EAAAE,SAAArjB,KACA,CASA,IANAof,EAAA+D,EAAAE,SAAArjB,EAAA,GACA8iB,GAAAC,QAAAC,IAAA5D,GAKA,KAAAA,EAGA,MAFA0D,IAAAC,QAAAC,IAAA,uBAEAM,EAAAH,EAAAnjB,EAAA,EAAAmjB,EAAAI,UAAAvjB,EAAA,KAKAA,IAAA,EAAAmjB,EAAAI,UAAAvjB,EAAA,IAOA,QAAAyiB,GAAAS,GACA,GAAAC,GAAA,GAAAC,UAAAF,EAGA,IADAJ,GAAAC,QAAAC,IAAA,sBAAAE,EAAAD,YACA,KAAAE,EAAAE,SAAA,SAAAF,EAAAE,SAAA,GAEA,MADAP,IAAAC,QAAAC,IAAA,qBACA,CAkBA,KAfA,GAAAhjB,GAAA,EACAtD,EAAAwmB,EAAAD,WAGAO,EAAA,SAAAL,EAAAnjB,GACA,MACA,MAAAmjB,EAAAE,SAAArjB,IACA,KAAAmjB,EAAAE,SAAArjB,EAAA,IACA,KAAAmjB,EAAAE,SAAArjB,EAAA,IACA,KAAAmjB,EAAAE,SAAArjB,EAAA,IACA,IAAAmjB,EAAAE,SAAArjB,EAAA,IACA,IAAAmjB,EAAAE,SAAArjB,EAAA,IAIAA,EAAAtD,GAAA,CAEA,GAAA8mB,EAAAL,EAAAnjB,GAAA,CAGA,GAAAyjB,GAAAN,EAAAE,SAAArjB,EAAA,EACAyjB,GAAA,QAAAA,GAAA,GAEA,IAAAA,IAEAA,EAAA,EAGA,IAAAC,GAAA1jB,EAAA,EAAAyjB,EACAE,EAAAR,EAAAI,UAAAvjB,EAAA,EAAAyjB,EAEA,OAAAG,GAAAV,EAAAQ,EAAAC,GAQA3jB,KAiBA,QAAA4jB,GAAAV,EAAAQ,EAAAC,GAKA,IAJA,GAEAE,GAAAC,EAAAC,EAAAC,EAAAC,EAFAd,EAAA,GAAAC,UAAAF,GACAnW,KAEAmX,EAAAR,EACAQ,EAAAR,EAAAC,GACA,KAAAR,EAAAE,SAAAa,IAAA,IAAAf,EAAAE,SAAAa,EAAA,KACAF,EAAAb,EAAAE,SAAAa,EAAA,GACAF,IAAAG,KACAJ,EAAAZ,EAAAiB,SAAAF,EAAA,GACAD,EAAAF,EAAA,EACAD,EAAAK,EAAAH,GACAH,EAAAQ,EAAAlB,EAAAe,EAAA,EAAAH,GAEAhX,EAAAuX,eAAAR,GAEA/W,EAAA+W,YAAA3jB,OACA4M,EAAA+W,GAAAvjB,KAAAsjB,GAGA9W,EAAA+W,IAAA/W,EAAA+W,GAAAD,GAIA9W,EAAA+W,GAAAD,IAKAK,GAEA,OAAAnX,GAKA,QAAAwX,GAAArB,EAAAsB,EAAAC,EAAAC,EAAAC,GACA,GAEAC,GAAAC,EACApoB,EAHAqoB,EAAA5B,EAAAK,UAAAkB,GAAAE,GACAI,IAIA,KAAAtoB,EAAA,EAAiBA,EAAAqoB,EAAUroB,IAC3BmoB,EAAAH,EAAA,GAAAhoB,EAAA,EACAooB,EAAAH,EAAAxB,EAAAK,UAAAqB,GAAAD,KACAE,GAAA/B,GAAAC,QAAAC,IAAA,gBAAAE,EAAAK,UAAAqB,GAAAD,IACAI,EAAAF,GAAAG,EAAA9B,EAAA0B,EAAAJ,EAAAC,EAAAE,EAEA,OAAAI,GAIA,QAAAC,GAAA9B,EAAA0B,EAAAJ,EAAAC,EAAAE,GACA,GAGA3kB,GACAyc,EAAA7S,EAAAqb,EACAC,EAAAC,EALAlnB,EAAAilB,EAAAK,UAAAqB,EAAA,GAAAD,GACAS,EAAAlC,EAAAmC,UAAAT,EAAA,GAAAD,GACAW,EAAApC,EAAAmC,UAAAT,EAAA,GAAAD,GAAAH,CAKA,QAAAvmB,GACA,OACA,OACA,MAAAmnB,EACA,MAAAlC,GAAAG,SAAAuB,EAAA,GAAAD,EAIA,KAFA3kB,EAAAolB,EAAA,EAAAE,EAAAV,EAAA,EACAnI,KACAwI,EAAA,EAA6BA,EAAAG,EAAYH,IACzCxI,EAAAwI,GAAA/B,EAAAG,SAAArjB,EAAAilB,EAEA,OAAAxI,EAGA,QAEA,MADAzc,GAAAolB,EAAA,EAAAE,EAAAV,EAAA,EACAP,EAAAnB,EAAAljB,EAAAolB,EAAA,EAEA,QACA,MAAAA,EACA,MAAAlC,GAAAK,UAAAqB,EAAA,GAAAD,EAIA,KAFA3kB,EAAAolB,EAAA,EAAAE,EAAAV,EAAA,EACAnI,KACAwI,EAAA,EAA6BA,EAAAG,EAAYH,IACzCxI,EAAAwI,GAAA/B,EAAAK,UAAAvjB,EAAA,EAAAilB,GAAAN,EAEA,OAAAlI,EAGA,QACA,MAAA2I,EACA,MAAAlC,GAAAmC,UAAAT,EAAA,GAAAD,EAGA,KADAlI,KACAwI,EAAA,EAA6BA,EAAAG,EAAYH,IACzCxI,EAAAwI,GAAA/B,EAAAmC,UAAAC,EAAA,EAAAL,GAAAN,EAEA,OAAAlI,EAGA,QACA,MAAA2I,EAMA,MALAF,GAAAhC,EAAAmC,UAAAC,GAAAX,GACAQ,EAAAjC,EAAAmC,UAAAC,EAAA,GAAAX,GACA/a,EAAA,GAAA2P,QAAA2L,EAAAC,GACAvb,EAAAsb,YACAtb,EAAAub,cACAvb,CAGA,KADA6S,KACAwI,EAAA,EAA6BA,EAAAG,EAAYH,IACzCC,EAAAhC,EAAAmC,UAAAC,EAAA,EAAAL,GAAAN,GACAQ,EAAAjC,EAAAmC,UAAAC,EAAA,IAAAL,GAAAN,GACAlI,EAAAwI,GAAA,GAAA1L,QAAA2L,EAAAC,GACA1I,EAAAwI,GAAAC,YACAzI,EAAAwI,GAAAE,aAEA,OAAA1I,EAGA,QACA,MAAA2I,EACA,MAAAlC,GAAAqC,SAAAX,EAAA,GAAAD,EAGA,KADAlI,KACAwI,EAAA,EAA6BA,EAAAG,EAAYH,IACzCxI,EAAAwI,GAAA/B,EAAAqC,SAAAD,EAAA,EAAAL,GAAAN,EAEA,OAAAlI,EAGA,SACA,MAAA2I,EACA,MAAAlC,GAAAqC,SAAAD,GAAAX,GAAAzB,EAAAqC,SAAAD,EAAA,GAAAX,EAGA,KADAlI,KACAwI,EAAA,EAA6BA,EAAAG,EAAYH,IACzCxI,EAAAwI,GAAA/B,EAAAqC,SAAAD,EAAA,EAAAL,GAAAN,GAAAzB,EAAAqC,SAAAD,EAAA,IAAAL,GAAAN,EAEA,OAAAlI,IAKA,QAAA4H,GAAA5C,EAAA+D,EAAA9oB,GACA,GAAA+oB,GAAA,EACA,KAAAR,EAAAO,EAAuBP,EAAAO,EAAA9oB,EAAkBuoB,IACzCQ,GAAAC,OAAAC,aAAAlE,EAAA4B,SAAA4B,GAEA,OAAAQ,GAGA,QAAAnC,GAAAJ,EAAAsC,GACA,WAAAnB,EAAAnB,EAAAsC,EAAA,GAEA,MADA1C,IAAAC,QAAAC,IAAA,wBAAAqB,EAAAnB,EAAAsC,EAAA,KACA,CAGA,IAAAb,GACAI,EAAAF,EACAe,EAAAC,EACAC,EAAAN,EAAA,CAGA,WAAAtC,EAAAK,UAAAuC,GACAnB,GAAA,MACS,WAAAzB,EAAAK,UAAAuC,GAIT,MADAhD,IAAAC,QAAAC,IAAA,+CACA,CAHA2B,IAAA,EAMA,OAAAzB,EAAAK,UAAAuC,EAAA,GAAAnB,GAEA,MADA7B,IAAAC,QAAAC,IAAA,qCACA,CAGA,IAAA+C,GAAA7C,EAAAmC,UAAAS,EAAA,GAAAnB,EAEA,IAAAoB,EAAA,EAEA,MADAjD,IAAAC,QAAAC,IAAA,kDAAAE,EAAAmC,UAAAS,EAAA,GAAAnB,KACA,CAKA,IAFAI,EAAAR,EAAArB,EAAA4C,IAAAC,EAAAC,EAAArB,GAEAI,EAAAkB,eAAA,CACAL,EAAArB,EAAArB,EAAA4C,IAAAf,EAAAkB,eAAAC,EAAAvB,EACA,KAAAE,IAAAe,GAAA,CACA,OAAAf,GACA,kBACA,YACA,mBACA,sBACA,oBACA,uBACA,gBACA,qBACA,mBACA,kBACA,eACA,iBACA,gBACA,2BACA,iBACAe,EAAAf,GAAAsB,EAAAtB,GAAAe,EAAAf,GACA,MAEA,mBACA,sBACAe,EAAAf,GAAAa,OAAAC,aAAAC,EAAAf,GAAA,GAAAe,EAAAf,GAAA,GAAAe,EAAAf,GAAA,GAAAe,EAAAf,GAAA,GACA,MAEA,+BACAe,EAAAf,GACAsB,EAAAC,WAAAR,EAAAf,GAAA,IACAsB,EAAAC,WAAAR,EAAAf,GAAA,IACAsB,EAAAC,WAAAR,EAAAf,GAAA,IACAsB,EAAAC,WAAAR,EAAAf,GAAA,IAGAE,EAAAF,GAAAe,EAAAf,IAIA,GAAAE,EAAAsB,kBAAA,CACAR,EAAAtB,EAAArB,EAAA4C,IAAAf,EAAAsB,kBAAAC,EAAA3B,EACA,KAAAE,IAAAgB,GAAA,CACA,OAAAhB,GACA,mBACAgB,EAAAhB,GAAAgB,EAAAhB,GAAA,GACA,IAAAgB,EAAAhB,GAAA,GACA,IAAAgB,EAAAhB,GAAA,GACA,IAAAgB,EAAAhB,GAAA,GAGAE,EAAAF,GAAAgB,EAAAhB,IAIA,MAAAE,GAjuBA,GAAAjC,IAAA,EAIA1lB,EAAA,SAAAsH,GACA,MAAAA,aAAAtH,GAAAsH,EACAvJ,eAAAiC,QACAjC,KAAAorB,YAAA7hB,GADA,GAAAtH,GAAAsH,GAKA,oBAAA1J,MAAAD,UACAA,EAAAC,EAAAD,QAAAqC,GAEArC,EAAAqC,MAKA,IAAA8oB,GAAA9oB,EAAAopB,MAGAC,MAAA,cACAC,MAAA,kBAGAC,MAAA,aAGAC,MAAA,kBACAC,MAAA,kBACAC,MAAA,0BACAC,MAAA,yBAGAC,MAAA,YACAC,MAAA,cAGAC,MAAA,mBAGAC,MAAA,mBACAC,MAAA,oBACAC,MAAA,aACAC,MAAA,qBACAC,MAAA,sBAGAC,MAAA,eACAC,MAAA,UACAC,MAAA,kBACAC,MAAA,sBACAC,MAAA,kBACAC,MAAA,OACAC,MAAA,oBACAC,MAAA,gBACAC,MAAA,kBACAC,MAAA,eACAC,MAAA,mBACAC,MAAA,kBACAC,MAAA,eACAC,MAAA,cACAC,MAAA,QACAC,MAAA,cACAC,MAAA,cACAC,MAAA,cACAC,MAAA,2BACAC,MAAA,wBACAC,MAAA,wBACAC,MAAA,2BACAC,MAAA,kBACAC,MAAA,gBACAC,MAAA,gBACAC,MAAA,aACAC,MAAA,YACAC,MAAA,aACAC,MAAA,iBACAC,MAAA,eACAC,MAAA,eACAC,MAAA,oBACAC,MAAA,wBACAC,MAAA,mBACAC,MAAA,cACAC,MAAA,WACAC,MAAA,aACAC,MAAA,YACAC,MAAA,2BACAC,MAAA,uBAGAC,MAAA,6BACAC,MAAA,iBAGAjE,EAAA5oB,EAAA4oB,UACAkE,IAAA,aACAC,IAAA,cACAC,MAAA,iBACAC,MAAA,oBACAL,MAAA,6BACAM,IAAA,gBACAC,IAAA,cACAC,IAAA,4BACAC,IAAA,cACAC,IAAA,kBACAC,IAAA,sBACAC,IAAA,mBACAC,IAAA,mBACAC,IAAA,cACAC,IAAA,cACAC,IAAA,iBACAC,IAAA,eACAC,IAAA,eACAC,IAAA,kBACAC,IAAA,wBACAC,IAAA,8BACAC,IAAA,mBACAC,IAAA,aACAC,IAAA,wBACAC,IAAA,oBACAC,IAAA,sBACAC,IAAA,WACAC,IAAA,mBACAC,IAAA,OACAC,IAAA,QACAC,IAAA,WACAC,IAAA,SACAC,MAAA,aAGA3F,EAAAlpB,EAAAkpB,SACA4F,EAAA,eACAC,EAAA,iBACAC,EAAA,cACAC,EAAA,kBACAC,EAAA,eACAC,EAAA,iBACAC,EAAA,cACAC,EAAA,eACAC,EAAA,gBACAC,EAAA,YACAC,GAAA,iBACAC,GAAA,SACAC,GAAA,cACAC,GAAA,WACAC,GAAA,cACAC,GAAA,WACAC,GAAA,qBACAC,GAAA,kBACAC,GAAA,cACAC,GAAA,qBACAC,GAAA,kBACAC,GAAA,sBACAC,GAAA,mBACAC,GAAA,oBACAC,GAAA,iBACAC,GAAA,qBACAC,GAAA,kBACAC,GAAA,sBACAC,GAAA,qBACAC,GAAA,eACAC,GAAA,mBAGA7H,EAAA/oB,EAAA+oB,cACA8H,iBACA/B,EAAA,cACAC,EAAA,SACAC,EAAA,iBACAC,EAAA,oBACAC,EAAA,mBACAC,EAAA,mBACAC,EAAA,iBACAC,EAAA,gBACAC,EAAA,kBAEAwB,cACAhC,EAAA,UACAC,EAAA,UACAC,EAAA,wBACAC,EAAA,OACAC,EAAA,YACAC,EAAA,UACAC,EAAA,UACA2B,IAAA,SAEAC,aACAlC,EAAA,UACAC,EAAA,WACAC,EAAA,cACAC,EAAA,gCACAC,EAAA,QACAK,EAAA,eACAC,GAAA,iBACAC,GAAA,QACAC,GAAA,wCACAC,GAAA,yCACAC,GAAA,0CACAC,GAAA,sCACAE,GAAA,mBACAC,GAAA,mBACAC,GAAA,mBACAC,GAAA,MACAC,GAAA,MACAC,GAAA,MACAC,GAAA,MACAC,GAAA,sBACAS,IAAA,SAEAE,OACAnC,EAAA,qBACAC,EAAA,cACAI,EAAA,mCACAE,EAAA,+BACAE,EAAA,qCACAI,GAAA,gEACAE,GAAA,4DACAC,GAAA,4CACAQ,GAAA,gCACAC,GAAA,yBACAI,GAAA,oDACAO,GAAA,gDACAC,GAAA,oBACAC,GAAA,sCACAC,GAAA,iEACAC,GAAA,6DACAC,GAAA,6DACAC,GAAA,wFACAC,GAAA,oFACAC,GAAA,iDACAC,GAAA,4EACAC,GAAA,yEAEAC,eACA9C,EAAA,cACAC,EAAA,6BACAC,EAAA,6BACAC,EAAA,+BACAC,EAAA,+BACAE,EAAA,mBACAC,EAAA,kCAEAwC,kBACAhD,EAAA,WACAC,EAAA,YACAC,EAAA,WACAC,EAAA,eAEA8C,WACAhD,EAAA,yBAEAiD,gBACAlD,EAAA,iBACAC,EAAA,kBAEAkD,cACAnD,EAAA,qBACAC,EAAA,wBAEAmD,aACApD,EAAA,OACAC,EAAA,cACAC,EAAA,eACAC,EAAA,gBACAC,EAAA,kBAEAiD,UACArD,EAAA,SACAC,EAAA,OACAC,EAAA,QAEAoD,YACAtD,EAAA,SACAC,EAAA,iBACAC,EAAA,mBAEAqD,WACAvD,EAAA,SACAC,EAAA,OACAC,EAAA,QAEAsD,sBACAxD,EAAA,UACAC,EAAA,QACAC,EAAA,aACAC,EAAA,gBAEAsD,YACAtD,EAAA,OAGAjG,YACA8F,EAAA,GACAC,EAAA,IACAC,EAAA,KACAC,EAAA,KACAC,EAAA,IACAC,EAAA,IACAC,EAAA,MAwLArI,GACAyL,IAAA,UACAC,IAAA,SACAlC,GAAA,WACAmC,GAAA,cACAC,GAAA,SACAC,GAAA,cACAC,IAAA,gBACAC,IAAA,WACAC,IAAA,YACAlD,GAAA,WAuPA7vB,GAAAiO,QAAA,SAAA7M,EAAAwd,GACA,SAAAxd,YAAAqM,QAAArM,YAAA4xB,qBAAA5xB,EAAA6xB,YAEAjP,EAAA5iB,GAGAwd,GACAA,EAAAtgB,KAAA8C,GAHA4jB,EAAA5jB,EAAAwd,IAMA,IAGA5e,EAAAmO,OAAA,SAAA/M,EAAAqmB,GACA,GAAAzD,EAAA5iB,GACA,MAAAA,GAAAoa,SAAAiM,IAGAznB,EAAAkzB,WAAA,SAAA9xB,GACA,IAAA4iB,EAAA5iB,GAAA,QACA,IAAAmc,GACA5N,EAAAvO,EAAAoa,SACAmM,IACA,KAAApK,IAAA5N,GACAA,EAAAuX,eAAA3J,KACAoK,EAAApK,GAAA5N,EAAA4N,GAGA,OAAAoK,IAGA3nB,EAAAmzB,OAAA,SAAA/xB,GACA,IAAA4iB,EAAA5iB,GAAA,QACA,IAAAmc,GACA5N,EAAAvO,EAAAoa,SACA4X,EAAA,EACA,KAAA7V,IAAA5N,GACAA,EAAAuX,eAAA3J,KAGA6V,GAFA,gBAAAzjB,GAAA4N,GACA5N,EAAA4N,YAAApB,QACAoB,EAAA,MAAA5N,EAAA4N,GAAA,KAAA5N,EAAA4N,GAAAuK,UAAA,IAAAnY,EAAA4N,GAAAwK,YAAA,QAEAxK,EAAA,OAAA5N,EAAA4N,GAAAje,OAAA,eAGAie,EAAA,MAAA5N,EAAA4N,GAAA,OAIA,OAAA6V,IAGApzB,EAAAqzB,mBAAA,SAAAvN,GACA,MAAAX,GAAAW,IAIAxb,KAAAC,EAAA,WACA,MAAAvK,IACSsJ,MAAA3L,EAAA2M,KAAA7G,SAAA8G,IAAA3M,EAAAD,QAAA4M,MAERjM,KAAAP","file":"ngImageCrop.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ngImageCrop\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ngImageCrop\"] = factory();\n\telse\n\t\troot[\"ngImageCrop\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ngImageCrop\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ngImageCrop\"] = factory();\n\telse\n\t\troot[\"ngImageCrop\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\t__webpack_require__(1);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar croppie = __webpack_require__(5);\n\tvar EXIF = __webpack_require__(8);\n\t\n\tvar MODULE_NAME = 'ngImageCrop';\n\t\n\texports.default = MODULE_NAME;\n\t\n\t\n\tvar _module = angular.module(MODULE_NAME, []);\n\t\n\tvar ImageCropDirectiveCtrl = function () {\n\t  /* @ngInject */\n\t  function ImageCropDirectiveCtrl($scope, $document, $element, $timeout, $window) {\n\t    _classCallCheck(this, ImageCropDirectiveCtrl);\n\t\n\t    this.$document = $document;\n\t    this.$element = $element;\n\t    this.$scope = $scope;\n\t    this.$timeout = $timeout;\n\t    this.$window = $window;\n\t    this.$window.EXIF = EXIF;\n\t    this.initialized = false;\n\t    this._initCroppie();\n\t  }\n\t\n\t  _createClass(ImageCropDirectiveCtrl, [{\n\t    key: 'saveCrop',\n\t    value: function saveCrop() {\n\t      var _this = this;\n\t\n\t      // returns a blob of the cropped image\n\t      this.c.result({\n\t        type: 'canvas',\n\t        quality: this.options.result.quality,\n\t        size: { width: this.options.result.width },\n\t        format: this.options.result.format\n\t      }).then(function (img) {\n\t        _this.$scope.$apply(function () {\n\t          var regex = /^data:[a-z]+\\/[a-z]+;base64,(.+)/;\n\t          var base64String = regex.exec(img);\n\t          var croppedImage = _this._b64ToBlob(base64String[base64String.length - 1]);\n\t          // call apply callback\n\t          _this.onApply({ image: croppedImage });\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: '_bindImage',\n\t    value: function _bindImage() {\n\t      var _this2 = this;\n\t\n\t      // binds image to croppie instance\n\t      var reader = new FileReader();\n\t\n\t      reader.onload = function () {\n\t        _this2.c.bind(reader.result);\n\t      };\n\t      reader.readAsDataURL(this._originalImage);\n\t    }\n\t  }, {\n\t    key: '_initCroppie',\n\t    value: function _initCroppie() {\n\t      // initializes a croppie instance\n\t      this.c = new croppie(this.$element.find('.cropper')[0], this.options.croppie);\n\t      if (this._originalImage) {\n\t        this._bindImage();\n\t      }\n\t    }\n\t  }, {\n\t    key: '_b64ToBlob',\n\t    value: function _b64ToBlob(b64Data) {\n\t      var byteCharacters = atob(b64Data);\n\t      var byteArrays = [];\n\t      var contentType = this._originalImage.type;\n\t      var sliceSize = 512;\n\t\n\t      for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n\t        var slice = byteCharacters.slice(offset, offset + sliceSize);\n\t\n\t        var byteNumbers = new Array(slice.length);\n\t        for (var i = 0; i < slice.length; i++) {\n\t          byteNumbers[i] = slice.charCodeAt(i);\n\t        }\n\t\n\t        var byteArray = new Uint8Array(byteNumbers);\n\t\n\t        byteArrays.push(byteArray);\n\t      }\n\t\n\t      var blob = new Blob(byteArrays, { type: contentType });\n\t      var width = this.options.result.width;\n\t      var height = this.options.result.height;\n\t      var quality = this.options.result.quality;\n\t      blob.name = width + '_' + height + '_' + quality + '_' + this._originalImage.name;\n\t      return blob;\n\t    }\n\t  }, {\n\t    key: 'originalImage',\n\t    set: function set(value) {\n\t      this._originalImage = value;\n\t      if (this.c !== undefined) {\n\t        this._bindImage();\n\t      }\n\t    },\n\t    get: function get() {\n\t      return this._originalImage;\n\t    }\n\t  }]);\n\t\n\t  return ImageCropDirectiveCtrl;\n\t}();\n\t\n\t//ImageCropDirectiveCtrl.$inject = ['$scope', '$document', '$element', '$timeout', '$window'];\n\t\n\tvar ImageCropDirective = function ImageCropDirective() {\n\t  _classCallCheck(this, ImageCropDirective);\n\t\n\t  this.restrict = 'E';\n\t  this.scope = {\n\t    originalImage: '<',\n\t    options: '<',\n\t    onApply: '&',\n\t    onCancel: '&'\n\t  };\n\t  this.bindToController = true;\n\t  this.controller = ImageCropDirectiveCtrl;\n\t  this.controllerAs = '$ctrl';\n\t  this.template = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"./template.jade\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()))();\n\t};\n\t\n\t_module.directive('imageCrop', function () {\n\t  return new ImageCropDirective();\n\t});\n\t_module.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(2);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../css-loader/index.js!./croppie.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../css-loader/index.js!./croppie.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(3)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".croppie-container{width:100%;height:100%}.croppie-container .cr-image{z-index:-1;position:absolute;top:0;left:0;transform-origin:0 0;max-width:none}.croppie-container .cr-boundary{position:relative;overflow:hidden;margin:0 auto;z-index:1;width:100%;height:100%}.croppie-container .cr-viewport{position:absolute;border:2px solid #fff;margin:auto;top:0;bottom:0;right:0;left:0;box-shadow:0 0 2000px 2000px rgba(0,0,0,.5);z-index:0}.croppie-container .cr-original-image{display:none}.croppie-container .cr-vp-circle{border-radius:50%}.croppie-container .cr-overlay{z-index:1;position:absolute;cursor:move}.croppie-container .cr-slider-wrap{width:75%;margin:15px auto;text-align:center}.croppie-result{position:relative;overflow:hidden}.croppie-result img{position:absolute}.croppie-container .cr-image,.croppie-container .cr-overlay,.croppie-container .cr-viewport{-webkit-transform:translateZ(0);transform:translateZ(0)}.cr-slider{-webkit-appearance:none;width:300px;max-width:100%}.cr-slider::-webkit-slider-runnable-track{width:100%;height:3px;background:rgba(0,0,0,.5);border:0;border-radius:3px}.cr-slider::-webkit-slider-thumb{-webkit-appearance:none;border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:-6px}.cr-slider:focus{outline:none}.cr-slider::-moz-range-track{width:100%;height:3px;background:rgba(0,0,0,.5);border:0;border-radius:3px}.cr-slider::-moz-range-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:-6px}.cr-slider:-moz-focusring{outline:1px solid #fff;outline-offset:-1px}.cr-slider::-ms-track{width:300px;height:5px;background:transparent;border-color:transparent;border-width:6px 0;color:transparent}.cr-slider::-ms-fill-lower,.cr-slider::-ms-fill-upper{background:rgba(0,0,0,.5);border-radius:10px}.cr-slider::-ms-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:1px}.cr-slider:focus::-ms-fill-lower,.cr-slider:focus::-ms-fill-upper{background:rgba(0,0,0,.5)}.cr-rotate-controls{position:absolute;bottom:5px;left:5px;z-index:1}.cr-rotate-controls button{border:0;background:none}.cr-rotate-controls i:before{display:inline-block;font-style:normal;font-weight:900;font-size:22px}.cr-rotate-l i:before{content:'\\\\21BA'}.cr-rotate-r i:before{content:'\\\\21BB'}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\t// css base code, injected by the css-loader\r\n\tmodule.exports = function() {\r\n\t\tvar list = [];\r\n\t\r\n\t\t// return the list of modules as css string\r\n\t\tlist.toString = function toString() {\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar item = this[i];\r\n\t\t\t\tif(item[2]) {\r\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push(item[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result.join(\"\");\r\n\t\t};\r\n\t\r\n\t\t// import a list of modules into the list\r\n\t\tlist.i = function(modules, mediaQuery) {\r\n\t\t\tif(typeof modules === \"string\")\r\n\t\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\t\tvar alreadyImportedModules = {};\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar id = this[i][0];\r\n\t\t\t\tif(typeof id === \"number\")\r\n\t\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\t\tvar item = modules[i];\r\n\t\t\t\t// skip already imported module\r\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn list;\r\n\t};\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(setImmediate, __webpack_provided_window_dot_EXIF) {/*************************\r\n\t * Croppie\r\n\t * Copyright 2016\r\n\t * Foliotek\r\n\t * Version: 2.4.0\r\n\t *************************/\r\n\t(function (root, factory) {\r\n\t    if (true) {\r\n\t        // AMD. Register as an anonymous module.\r\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n\t        // CommonJS\r\n\t        factory(exports);\r\n\t    } else {\r\n\t        // Browser globals\r\n\t        factory((root.commonJsStrict = {}));\r\n\t    }\r\n\t}(this, function (exports) {\r\n\t\r\n\t    /* Polyfills */\r\n\t    if (typeof Promise !== 'function') {\r\n\t        /*! promise-polyfill 3.1.0 */\r\n\t        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var c=a.then;if(\"function\"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"==typeof a?a:null,this.onRejected=\"function\"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"==typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"==typeof g||\"function\"==typeof g)){var h=g.then;if(\"function\"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n\t    }\r\n\t\r\n\t    if ( typeof window.CustomEvent !== \"function\" ) {\r\n\t        (function(){\r\n\t            function CustomEvent ( event, params ) {\r\n\t                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n\t                var evt = document.createEvent( 'CustomEvent' );\r\n\t                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n\t                return evt;\r\n\t            }\r\n\t            CustomEvent.prototype = window.Event.prototype;\r\n\t            window.CustomEvent = CustomEvent;\r\n\t        }());\r\n\t    }\r\n\t\r\n\t    if (!HTMLCanvasElement.prototype.toBlob) {\r\n\t        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n\t            value: function (callback, type, quality) {\r\n\t                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n\t                len = binStr.length,\r\n\t                arr = new Uint8Array(len);\r\n\t\r\n\t                for (var i=0; i<len; i++ ) {\r\n\t                    arr[i] = binStr.charCodeAt(i);\r\n\t                }\r\n\t\r\n\t                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n\t            }\r\n\t        });\r\n\t    }\r\n\t    /* End Polyfills */\r\n\t\r\n\t    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n\t        emptyStyles = document.createElement('div').style,\r\n\t        CSS_TRANS_ORG,\r\n\t        CSS_TRANSFORM,\r\n\t        CSS_USERSELECT;\r\n\t\r\n\t    function vendorPrefix(prop) {\r\n\t        if (prop in emptyStyles) {\r\n\t            return prop;\r\n\t        }\r\n\t\r\n\t        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n\t            i = cssPrefixes.length;\r\n\t\r\n\t        while (i--) {\r\n\t            prop = cssPrefixes[i] + capProp;\r\n\t            if (prop in emptyStyles) {\r\n\t                return prop;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t\r\n\t    CSS_TRANSFORM = vendorPrefix('transform');\r\n\t    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n\t    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\t\r\n\t    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n\t    function deepExtend(destination, source) {\r\n\t        destination = destination || {};\r\n\t        for (var property in source) {\r\n\t            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n\t                destination[property] = destination[property] || {};\r\n\t                deepExtend(destination[property], source[property]);\r\n\t            } else {\r\n\t                destination[property] = source[property];\r\n\t            }\r\n\t        }\r\n\t        return destination;\r\n\t    }\r\n\t\r\n\t    function debounce(func, wait, immediate) {\r\n\t        var timeout;\r\n\t        return function () {\r\n\t            var context = this, args = arguments;\r\n\t            var later = function () {\r\n\t                timeout = null;\r\n\t                if (!immediate) func.apply(context, args);\r\n\t            };\r\n\t            var callNow = immediate && !timeout;\r\n\t            clearTimeout(timeout);\r\n\t            timeout = setTimeout(later, wait);\r\n\t            if (callNow) func.apply(context, args);\r\n\t        };\r\n\t    }\r\n\t\r\n\t    function dispatchChange(element) {\r\n\t        if (\"createEvent\" in document) {\r\n\t            var evt = document.createEvent(\"HTMLEvents\");\r\n\t            evt.initEvent(\"change\", false, true);\r\n\t            element.dispatchEvent(evt);\r\n\t        }\r\n\t        else {\r\n\t            element.fireEvent(\"onchange\");\r\n\t        }\r\n\t    }\r\n\t\r\n\t    //http://jsperf.com/vanilla-css\r\n\t    function css(el, styles, val) {\r\n\t        if (typeof (styles) === 'string') {\r\n\t            var tmp = styles;\r\n\t            styles = {};\r\n\t            styles[tmp] = val;\r\n\t        }\r\n\t\r\n\t        for (var prop in styles) {\r\n\t            el.style[prop] = styles[prop];\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function addClass(el, c) {\r\n\t        if (el.classList) {\r\n\t            el.classList.add(c);\r\n\t        }\r\n\t        else {\r\n\t            el.className += ' ' + c;\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function removeClass(el, c) {\r\n\t        if (el.classList) {\r\n\t            el.classList.remove(c);\r\n\t        }\r\n\t        else {\r\n\t            el.className = el.className.replace(c, '');\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function num(v) {\r\n\t        return parseInt(v, 10);\r\n\t    }\r\n\t\r\n\t    /* Utilities */\r\n\t    function loadImage(src, imageEl, useCanvas) {\r\n\t        var img = imageEl || new Image(),\r\n\t            prom;\r\n\t\r\n\t        if (img.src === src) {\r\n\t            // If image source hasn't changed, return a promise that resolves immediately\r\n\t            prom = new Promise(function (resolve, reject) {\r\n\t                resolve(img);\r\n\t            });\r\n\t        } else {\r\n\t            prom = new Promise(function (resolve, reject) {\r\n\t                if (useCanvas && src.substring(0,4).toLowerCase() === 'http') {\r\n\t                    img.setAttribute('crossOrigin', 'anonymous');\r\n\t                }\r\n\t                img.onload = function () {\r\n\t                    setTimeout(function () {\r\n\t                        resolve(img);\r\n\t                    }, 1);\r\n\t                };\r\n\t            });\r\n\t\r\n\t            img.src = src;\r\n\t        }\r\n\t\r\n\t        img.style.opacity = 0;\r\n\t\r\n\t        return prom;\r\n\t    }\r\n\t\r\n\t    /* CSS Transform Prototype */\r\n\t    var _TRANSLATE = 'translate3d',\r\n\t        _TRANSLATE_SUFFIX = ', 0px';\r\n\t    var Transform = function (x, y, scale) {\r\n\t        this.x = parseFloat(x);\r\n\t        this.y = parseFloat(y);\r\n\t        this.scale = parseFloat(scale);\r\n\t    };\r\n\t\r\n\t    Transform.parse = function (v) {\r\n\t        if (v.style) {\r\n\t            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n\t        }\r\n\t        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n\t            return Transform.fromMatrix(v);\r\n\t        }\r\n\t        else {\r\n\t            return Transform.fromString(v);\r\n\t        }\r\n\t    };\r\n\t\r\n\t    Transform.fromMatrix = function (v) {\r\n\t        var vals = v.substring(7).split(',');\r\n\t        if (!vals.length || v === 'none') {\r\n\t            vals = [1, 0, 0, 1, 0, 0];\r\n\t        }\r\n\t\r\n\t        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n\t    };\r\n\t\r\n\t    Transform.fromString = function (v) {\r\n\t        var values = v.split(') '),\r\n\t            translate = values[0].substring(_TRANSLATE.length + 1).split(','),\r\n\t            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n\t            x = translate.length > 1 ? translate[0] : 0,\r\n\t            y = translate.length > 1 ? translate[1] : 0;\r\n\t\r\n\t        return new Transform(x, y, scale);\r\n\t    };\r\n\t\r\n\t    Transform.prototype.toString = function () {\r\n\t        return _TRANSLATE + '(' + this.x + 'px, ' + this.y + 'px' + _TRANSLATE_SUFFIX + ') scale(' + this.scale + ')';\r\n\t    };\r\n\t\r\n\t    var TransformOrigin = function (el) {\r\n\t        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n\t            this.x = 0;\r\n\t            this.y = 0;\r\n\t            return;\r\n\t        }\r\n\t        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n\t        this.x = parseFloat(css[0]);\r\n\t        this.y = parseFloat(css[1]);\r\n\t    };\r\n\t\r\n\t    TransformOrigin.prototype.toString = function () {\r\n\t        return this.x + 'px ' + this.y + 'px';\r\n\t    };\r\n\t\r\n\t    function getExifOrientation (img, cb) {\r\n\t        if (!__webpack_provided_window_dot_EXIF) {\r\n\t            cb(0);\r\n\t        }\r\n\t\r\n\t        EXIF.getData(img, function () {\r\n\t            var orientation = EXIF.getTag(this, 'Orientation');\r\n\t            cb(orientation);\r\n\t        });\r\n\t    }\r\n\t\r\n\t    function drawCanvas(canvas, img, orientation) {\r\n\t        var width = img.width,\r\n\t            height = img.height,\r\n\t            ctx = canvas.getContext('2d');\r\n\t\r\n\t        canvas.width = img.width;\r\n\t        canvas.height = img.height;\r\n\t\r\n\t        ctx.save();\r\n\t        switch (orientation) {\r\n\t          case 2:\r\n\t             ctx.translate(width, 0);\r\n\t             ctx.scale(-1, 1);\r\n\t             break;\r\n\t\r\n\t          case 3:\r\n\t              ctx.translate(width, height);\r\n\t              ctx.rotate(180*Math.PI/180);\r\n\t              break;\r\n\t\r\n\t          case 4:\r\n\t              ctx.translate(0, height);\r\n\t              ctx.scale(1, -1);\r\n\t              break;\r\n\t\r\n\t          case 5:\r\n\t              canvas.width = height;\r\n\t              canvas.height = width;\r\n\t              ctx.rotate(90*Math.PI/180);\r\n\t              ctx.scale(1, -1);\r\n\t              break;\r\n\t\r\n\t          case 6:\r\n\t              canvas.width = height;\r\n\t              canvas.height = width;\r\n\t              ctx.rotate(90*Math.PI/180);\r\n\t              ctx.translate(0, -height);\r\n\t              break;\r\n\t\r\n\t          case 7:\r\n\t              canvas.width = height;\r\n\t              canvas.height = width;\r\n\t              ctx.rotate(-90*Math.PI/180);\r\n\t              ctx.translate(-width, height);\r\n\t              ctx.scale(1, -1);\r\n\t              break;\r\n\t\r\n\t          case 8:\r\n\t              canvas.width = height;\r\n\t              canvas.height = width;\r\n\t              ctx.translate(0, width);\r\n\t              ctx.rotate(-90*Math.PI/180);\r\n\t              break;\r\n\t        }\r\n\t        ctx.drawImage(img, 0,0, width, height);\r\n\t        ctx.restore();\r\n\t    }\r\n\t\r\n\t    /* Private Methods */\r\n\t    function _create() {\r\n\t        var self = this,\r\n\t            contClass = 'croppie-container',\r\n\t            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n\t            boundary, img, viewport, overlay, canvas, bw, bh;\r\n\t\r\n\t        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n\t        // Properties on class\r\n\t        self.data = {};\r\n\t        self.elements = {};\r\n\t\r\n\t        // Generating Markup\r\n\t        boundary = self.elements.boundary = document.createElement('div');\r\n\t        viewport = self.elements.viewport = document.createElement('div');\r\n\t        img = self.elements.img = document.createElement('img');\r\n\t        overlay = self.elements.overlay = document.createElement('div');\r\n\t\r\n\t        if (self.options.useCanvas) {\r\n\t            self.elements.canvas = document.createElement('canvas');\r\n\t            self.elements.preview = self.elements.canvas;\r\n\t        }\r\n\t        else {\r\n\t            self.elements.preview = self.elements.img;\r\n\t        }\r\n\t\r\n\t        addClass(boundary, 'cr-boundary');\r\n\t        bw = self.options.boundary.width;\r\n\t        bh = self.options.boundary.height;\r\n\t        css(boundary, {\r\n\t            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n\t            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n\t        });\r\n\t\r\n\t        addClass(viewport, 'cr-viewport');\r\n\t        if (customViewportClass) {\r\n\t            addClass(viewport, customViewportClass);\r\n\t        }\r\n\t        css(viewport, {\r\n\t            width: self.options.viewport.width + 'px',\r\n\t            height: self.options.viewport.height + 'px'\r\n\t        });\r\n\t        viewport.setAttribute('tabindex', 0);\r\n\t\r\n\t        addClass(self.elements.preview, 'cr-image');\r\n\t        addClass(overlay, 'cr-overlay');\r\n\t\r\n\t        self.element.appendChild(boundary);\r\n\t        boundary.appendChild(self.elements.preview);\r\n\t        boundary.appendChild(viewport);\r\n\t        boundary.appendChild(overlay);\r\n\t\r\n\t        addClass(self.element, contClass);\r\n\t        if (self.options.customClass) {\r\n\t            addClass(self.element, self.options.customClass);\r\n\t        }\r\n\t\r\n\t        // Initialize drag & zoom\r\n\t        _initDraggable.call(this);\r\n\t\r\n\t        if (self.options.enableZoom) {\r\n\t            _initializeZoom.call(self);\r\n\t        }\r\n\t\r\n\t        // if (self.options.enableOrientation) {\r\n\t        //     _initRotationControls.call(self);\r\n\t        // }\r\n\t    }\r\n\t\r\n\t    function _initRotationControls () {\r\n\t        // TODO - Not a fan of these controls\r\n\t        return;\r\n\t        var self = this,\r\n\t            wrap, btnLeft, btnRight, iLeft, iRight;\r\n\t\r\n\t        wrap = document.createElement('div');\r\n\t        self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n\t        self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\t\r\n\t        wrap.appendChild(btnLeft);\r\n\t        wrap.appendChild(btnRight);\r\n\t\r\n\t        iLeft = document.createElement('i');\r\n\t        iRight = document.createElement('i');\r\n\t        btnLeft.appendChild(iLeft);\r\n\t        btnRight.appendChild(iRight);\r\n\t\r\n\t        addClass(wrap, 'cr-rotate-controls');\r\n\t        addClass(btnLeft, 'cr-rotate-l');\r\n\t        addClass(btnRight, 'cr-rotate-r');\r\n\t\r\n\t        self.elements.boundary.appendChild(wrap);\r\n\t\r\n\t        btnLeft.addEventListener('click', function () {\r\n\t            self.rotate(-90);\r\n\t        });\r\n\t        btnRight.addEventListener('click', function () {\r\n\t            self.rotate(90);\r\n\t        });\r\n\t    }\r\n\t\r\n\t    function _hasExif() {\r\n\t        // todo - remove options.exif after deprecation\r\n\t        return this.options.enableExif && __webpack_provided_window_dot_EXIF;\r\n\t    }\r\n\t\r\n\t    function _setZoomerVal(v) {\r\n\t        if (this.options.enableZoom) {\r\n\t            var z = this.elements.zoomer,\r\n\t                val = fix(v, 4);\r\n\t\r\n\t            z.value = Math.max(z.min, Math.min(z.max, val));\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function _initializeZoom() {\r\n\t        var self = this,\r\n\t            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n\t            zoomer = self.elements.zoomer = document.createElement('input');\r\n\t\r\n\t        addClass(wrap, 'cr-slider-wrap');\r\n\t        addClass(zoomer, 'cr-slider');\r\n\t        zoomer.type = 'range';\r\n\t        zoomer.step = '0.0001';\r\n\t        zoomer.value = 1;\r\n\t        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n\t\r\n\t        self.element.appendChild(wrap);\r\n\t        wrap.appendChild(zoomer);\r\n\t\r\n\t        self._currentZoom = 1;\r\n\t\r\n\t        function change() {\r\n\t            _onZoom.call(self, {\r\n\t                value: parseFloat(zoomer.value),\r\n\t                origin: new TransformOrigin(self.elements.preview),\r\n\t                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n\t                transform: Transform.parse(self.elements.preview)\r\n\t            });\r\n\t        }\r\n\t\r\n\t        function scroll(ev) {\r\n\t            var delta, targetZoom;\r\n\t\r\n\t            if (ev.wheelDelta) {\r\n\t                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n\t            } else if (ev.deltaY) {\r\n\t                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n\t            } else if (ev.detail) {\r\n\t                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n\t            } else {\r\n\t                delta = 0;\r\n\t            }\r\n\t\r\n\t            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\t\r\n\t            ev.preventDefault();\r\n\t            _setZoomerVal.call(self, targetZoom);\r\n\t            change.call(self);\r\n\t        }\r\n\t\r\n\t        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n\t        self.elements.zoomer.addEventListener('change', change);\r\n\t\r\n\t        if (self.options.mouseWheelZoom) {\r\n\t            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n\t            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function _onZoom(ui) {\r\n\t        var self = this,\r\n\t            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n\t            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n\t            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview),\r\n\t            transCss = {};\r\n\t\r\n\t        function applyCss() {\r\n\t            var transCss = {};\r\n\t            transCss[CSS_TRANSFORM] = transform.toString();\r\n\t            transCss[CSS_TRANS_ORG] = origin.toString();\r\n\t            css(self.elements.preview, transCss);\r\n\t        }\r\n\t\r\n\t        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n\t        transform.scale = self._currentZoom;\r\n\t        applyCss();\r\n\t\r\n\t\r\n\t        if (self.options.enforceBoundary) {\r\n\t            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n\t                transBoundaries = boundaries.translate,\r\n\t                oBoundaries = boundaries.origin;\r\n\t\r\n\t            if (transform.x >= transBoundaries.maxX) {\r\n\t                origin.x = oBoundaries.minX;\r\n\t                transform.x = transBoundaries.maxX;\r\n\t            }\r\n\t\r\n\t            if (transform.x <= transBoundaries.minX) {\r\n\t                origin.x = oBoundaries.maxX;\r\n\t                transform.x = transBoundaries.minX;\r\n\t            }\r\n\t\r\n\t            if (transform.y >= transBoundaries.maxY) {\r\n\t                origin.y = oBoundaries.minY;\r\n\t                transform.y = transBoundaries.maxY;\r\n\t            }\r\n\t\r\n\t            if (transform.y <= transBoundaries.minY) {\r\n\t                origin.y = oBoundaries.maxY;\r\n\t                transform.y = transBoundaries.minY;\r\n\t            }\r\n\t        }\r\n\t        applyCss();\r\n\t        _debouncedOverlay.call(self);\r\n\t        _triggerUpdate.call(self);\r\n\t    }\r\n\t\r\n\t    function _getVirtualBoundaries(viewport) {\r\n\t        var self = this,\r\n\t            scale = self._currentZoom,\r\n\t            vpWidth = viewport.width,\r\n\t            vpHeight = viewport.height,\r\n\t            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n\t            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n\t            imgRect = self.elements.preview.getBoundingClientRect(),\r\n\t            curImgWidth = imgRect.width,\r\n\t            curImgHeight = imgRect.height,\r\n\t            halfWidth = vpWidth / 2,\r\n\t            halfHeight = vpHeight / 2;\r\n\t\r\n\t        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n\t        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\t\r\n\t        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n\t        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\t\r\n\t        var originMinX = (1 / scale) * halfWidth;\r\n\t        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\t\r\n\t        var originMinY = (1 / scale) * halfHeight;\r\n\t        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\t\r\n\t        return {\r\n\t            translate: {\r\n\t                maxX: maxX,\r\n\t                minX: minX,\r\n\t                maxY: maxY,\r\n\t                minY: minY\r\n\t            },\r\n\t            origin: {\r\n\t                maxX: originMaxX,\r\n\t                minX: originMinX,\r\n\t                maxY: originMaxY,\r\n\t                minY: originMinY\r\n\t            }\r\n\t        };\r\n\t    }\r\n\t\r\n\t    function _updateCenterPoint() {\r\n\t        var self = this,\r\n\t            scale = self._currentZoom,\r\n\t            data = self.elements.preview.getBoundingClientRect(),\r\n\t            vpData = self.elements.viewport.getBoundingClientRect(),\r\n\t            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n\t            pc = new TransformOrigin(self.elements.preview),\r\n\t            top = (vpData.top - data.top) + (vpData.height / 2),\r\n\t            left = (vpData.left - data.left) + (vpData.width / 2),\r\n\t            center = {},\r\n\t            adj = {};\r\n\t\r\n\t        center.y = top / scale;\r\n\t        center.x = left / scale;\r\n\t\r\n\t        adj.y = (center.y - pc.y) * (1 - scale);\r\n\t        adj.x = (center.x - pc.x) * (1 - scale);\r\n\t\r\n\t        transform.x -= adj.x;\r\n\t        transform.y -= adj.y;\r\n\t\r\n\t        var newCss = {};\r\n\t        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n\t        newCss[CSS_TRANSFORM] = transform.toString();\r\n\t        css(self.elements.preview, newCss);\r\n\t    }\r\n\t\r\n\t    function _initDraggable() {\r\n\t        var self = this,\r\n\t            isDragging = false,\r\n\t            originalX,\r\n\t            originalY,\r\n\t            originalDistance,\r\n\t            vpRect,\r\n\t            transform;\r\n\t\r\n\t        function assignTransformCoordinates(deltaX, deltaY) {\r\n\t            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n\t                top = transform.y + deltaY,\r\n\t                left = transform.x + deltaX;\r\n\t\r\n\t            if (self.options.enforceBoundary) {\r\n\t                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n\t                    transform.y = top;\r\n\t                }\r\n\t\r\n\t                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n\t                    transform.x = left;\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                transform.y = top;\r\n\t                transform.x = left;\r\n\t            }\r\n\t        }\r\n\t\r\n\t        function keyDown(ev) {\r\n\t            var LEFT_ARROW  = 37,\r\n\t                UP_ARROW    = 38,\r\n\t                RIGHT_ARROW = 39,\r\n\t                DOWN_ARROW  = 40;\r\n\t\r\n\t            if (ev.shiftKey && (ev.keyCode == UP_ARROW || ev.keyCode == DOWN_ARROW)) {\r\n\t                var zoom = 0.0;\r\n\t                if (ev.keyCode == UP_ARROW) {\r\n\t                    zoom = parseFloat(self.elements.zoomer.value, 10) + parseFloat(self.elements.zoomer.step, 10)\r\n\t                }\r\n\t                else {\r\n\t                    zoom = parseFloat(self.elements.zoomer.value, 10) - parseFloat(self.elements.zoomer.step, 10)\r\n\t                }\r\n\t                self.setZoom(zoom);\r\n\t            }\r\n\t            else if (ev.keyCode >= 37 && ev.keyCode <= 40) {\r\n\t                ev.preventDefault();\r\n\t                var movement = parseKeyDown(ev.keyCode);\r\n\t\r\n\t                transform = Transform.parse(self.elements.preview);\r\n\t                document.body.style[CSS_USERSELECT] = 'none';\r\n\t                vpRect = self.elements.viewport.getBoundingClientRect();\r\n\t                keyMove(movement);\r\n\t            };\r\n\t\r\n\t            function parseKeyDown(key) {\r\n\t                switch (key) {\r\n\t                    case LEFT_ARROW:\r\n\t                        return [1, 0];\r\n\t                    case UP_ARROW:\r\n\t                        return [0, 1];\r\n\t                    case RIGHT_ARROW:\r\n\t                        return [-1, 0];\r\n\t                    case DOWN_ARROW:\r\n\t                        return [0, -1];\r\n\t                };\r\n\t            };\r\n\t        }\r\n\t\r\n\t        function keyMove(movement) {\r\n\t            var deltaX = movement[0],\r\n\t                deltaY = movement[1],\r\n\t                newCss = {};\r\n\t\r\n\t            assignTransformCoordinates(deltaX, deltaY);\r\n\t\r\n\t            newCss[CSS_TRANSFORM] = transform.toString();\r\n\t            css(self.elements.preview, newCss);\r\n\t            _updateOverlay.call(self);\r\n\t            document.body.style[CSS_USERSELECT] = '';\r\n\t            _updateCenterPoint.call(self);\r\n\t            _triggerUpdate.call(self);\r\n\t            originalDistance = 0;\r\n\t        }\r\n\t\r\n\t        function mouseDown(ev) {\r\n\t            ev.preventDefault();\r\n\t            if (isDragging) return;\r\n\t            isDragging = true;\r\n\t            originalX = ev.pageX;\r\n\t            originalY = ev.pageY;\r\n\t\r\n\t            if (ev.touches) {\r\n\t                var touches = ev.touches[0];\r\n\t                originalX = touches.pageX;\r\n\t                originalY = touches.pageY;\r\n\t            }\r\n\t\r\n\t            transform = Transform.parse(self.elements.preview);\r\n\t            window.addEventListener('mousemove', mouseMove);\r\n\t            window.addEventListener('touchmove', mouseMove);\r\n\t            window.addEventListener('mouseup', mouseUp);\r\n\t            window.addEventListener('touchend', mouseUp);\r\n\t            document.body.style[CSS_USERSELECT] = 'none';\r\n\t            vpRect = self.elements.viewport.getBoundingClientRect();\r\n\t        }\r\n\t\r\n\t        function mouseMove(ev) {\r\n\t            ev.preventDefault();\r\n\t            var pageX = ev.pageX,\r\n\t                pageY = ev.pageY;\r\n\t\r\n\t            if (ev.touches) {\r\n\t                var touches = ev.touches[0];\r\n\t                pageX = touches.pageX;\r\n\t                pageY = touches.pageY;\r\n\t            }\r\n\t\r\n\t            var deltaX = pageX - originalX,\r\n\t                deltaY = pageY - originalY,\r\n\t                newCss = {};\r\n\t\r\n\t            if (ev.type == 'touchmove') {\r\n\t                if (ev.touches.length > 1) {\r\n\t                    var touch1 = ev.touches[0];\r\n\t                    var touch2 = ev.touches[1];\r\n\t                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\t\r\n\t                    if (!originalDistance) {\r\n\t                        originalDistance = dist / self._currentZoom;\r\n\t                    }\r\n\t\r\n\t                    var scale = dist / originalDistance;\r\n\t\r\n\t                    _setZoomerVal.call(self, scale);\r\n\t                    dispatchChange(self.elements.zoomer);\r\n\t                    return;\r\n\t                }\r\n\t            }\r\n\t\r\n\t            assignTransformCoordinates(deltaX, deltaY);\r\n\t\r\n\t            newCss[CSS_TRANSFORM] = transform.toString();\r\n\t            css(self.elements.preview, newCss);\r\n\t            _updateOverlay.call(self);\r\n\t            originalY = pageY;\r\n\t            originalX = pageX;\r\n\t        }\r\n\t\r\n\t        function mouseUp() {\r\n\t            isDragging = false;\r\n\t            window.removeEventListener('mousemove', mouseMove);\r\n\t            window.removeEventListener('touchmove', mouseMove);\r\n\t            window.removeEventListener('mouseup', mouseUp);\r\n\t            window.removeEventListener('touchend', mouseUp);\r\n\t            document.body.style[CSS_USERSELECT] = '';\r\n\t            _updateCenterPoint.call(self);\r\n\t            _triggerUpdate.call(self);\r\n\t            originalDistance = 0;\r\n\t        }\r\n\t\r\n\t        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n\t        self.elements.viewport.addEventListener('keydown', keyDown);\r\n\t        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n\t    }\r\n\t\r\n\t    function _updateOverlay() {\r\n\t        var self = this,\r\n\t            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n\t            imgData = self.elements.preview.getBoundingClientRect();\r\n\t\r\n\t        css(self.elements.overlay, {\r\n\t            width: imgData.width + 'px',\r\n\t            height: imgData.height + 'px',\r\n\t            top: (imgData.top - boundRect.top) + 'px',\r\n\t            left: (imgData.left - boundRect.left) + 'px'\r\n\t        });\r\n\t    }\r\n\t    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\t\r\n\t    function _triggerUpdate() {\r\n\t        var self = this,\r\n\t            data = self.get(),\r\n\t            ev; \r\n\t\r\n\t        if (!_isVisible.call(self)) {\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        self.options.update.call(self, data);\r\n\t        if (self.$) {\r\n\t            self.$(self.element).trigger('update', data)\r\n\t        }\r\n\t        else {\r\n\t            var ev;\r\n\t            if (window.CustomEvent) {\r\n\t                ev = new CustomEvent('update', { detail: data });\r\n\t            } else {\r\n\t                ev = document.createEvent('CustomEvent');\r\n\t                ev.initCustomEvent('update', true, true, data);\r\n\t            }\r\n\t\r\n\t            self.element.dispatchEvent(ev);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function _isVisible() {\r\n\t        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n\t    }\r\n\t\r\n\t    function _updatePropertiesFromImage() {\r\n\t        var self = this,\r\n\t            minZoom = 0,\r\n\t            maxZoom = 1.5,\r\n\t            initialZoom = 1,\r\n\t            cssReset = {},\r\n\t            img = self.elements.preview,\r\n\t            zoomer = self.elements.zoomer,\r\n\t            transformReset = new Transform(0, 0, initialZoom),\r\n\t            originReset = new TransformOrigin(),\r\n\t            isVisible = _isVisible.call(self),\r\n\t            imgData,\r\n\t            vpData,\r\n\t            boundaryData,\r\n\t            minW,\r\n\t            minH;\r\n\t\r\n\t        if (!isVisible || self.data.bound) {\r\n\t            // if the croppie isn't visible or it doesn't need binding\r\n\t            return;\r\n\t        }\r\n\t\r\n\t        self.data.bound = true;\r\n\t        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n\t        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n\t        cssReset['opacity'] = 1;\r\n\t        css(img, cssReset);\r\n\t\r\n\t        imgData = img.getBoundingClientRect();\r\n\t        vpData = self.elements.viewport.getBoundingClientRect();\r\n\t        boundaryData = self.elements.boundary.getBoundingClientRect();\r\n\t        self._originalImageWidth = imgData.width;\r\n\t        self._originalImageHeight = imgData.height;\r\n\t\r\n\t        if (self.options.enableZoom) {\r\n\t            if (self.options.enforceBoundary) {\r\n\t                minW = vpData.width / imgData.width;\r\n\t                minH = vpData.height / imgData.height;\r\n\t                minZoom = Math.max(minW, minH);\r\n\t            }\r\n\t\r\n\t            if (minZoom >= maxZoom) {\r\n\t                maxZoom = minZoom + 1;\r\n\t            }\r\n\t\r\n\t            zoomer.min = fix(minZoom, 4);\r\n\t            zoomer.max = fix(maxZoom, 4);\r\n\t            var defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n\t            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n\t            _setZoomerVal.call(self, initialZoom);\r\n\t            dispatchChange(zoomer);\r\n\t        }\r\n\t        else {\r\n\t            self._currentZoom = initialZoom;\r\n\t        }\r\n\t        \r\n\t        transformReset.scale = self._currentZoom;\r\n\t        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n\t        css(img, cssReset);\r\n\t\r\n\t        if (self.data.points.length) {\r\n\t            _bindPoints.call(self, self.data.points);\r\n\t        }\r\n\t        else {\r\n\t            _centerImage.call(self);\r\n\t        }\r\n\t\r\n\t        _updateCenterPoint.call(self);\r\n\t        _updateOverlay.call(self);\r\n\t    }\r\n\t\r\n\t    function _bindPoints(points) {\r\n\t        if (points.length != 4) {\r\n\t            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n\t        }\r\n\t        var self = this,\r\n\t            pointsWidth = points[2] - points[0],\r\n\t            // pointsHeight = points[3] - points[1],\r\n\t            vpData = self.elements.viewport.getBoundingClientRect(),\r\n\t            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n\t            vpOffset = {\r\n\t                left: vpData.left - boundRect.left,\r\n\t                top: vpData.top - boundRect.top\r\n\t            },\r\n\t            scale = vpData.width / pointsWidth,\r\n\t            originTop = points[1],\r\n\t            originLeft = points[0],\r\n\t            transformTop = (-1 * points[1]) + vpOffset.top,\r\n\t            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n\t            newCss = {};\r\n\t\r\n\t        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n\t        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n\t        css(self.elements.preview, newCss);\r\n\t\r\n\t        _setZoomerVal.call(self, scale);\r\n\t        self._currentZoom = scale;\r\n\t    }\r\n\t\r\n\t    function _centerImage() {\r\n\t        var self = this,\r\n\t            imgDim = self.elements.preview.getBoundingClientRect(),\r\n\t            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n\t            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n\t            vpLeft = vpDim.left - boundDim.left,\r\n\t            vpTop = vpDim.top - boundDim.top,\r\n\t            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n\t            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n\t            transform = new Transform(w, h, self._currentZoom);\r\n\t\r\n\t        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n\t    }\r\n\t\r\n\t    function _transferImageToCanvas(customOrientation) {\r\n\t        var self = this,\r\n\t            canvas = self.elements.canvas,\r\n\t            img = self.elements.img,\r\n\t            ctx = canvas.getContext('2d'),\r\n\t            exif = _hasExif.call(self),\r\n\t            customOrientation = self.options.enableOrientation && customOrientation;\r\n\t\r\n\t        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\t        canvas.width = img.width;\r\n\t        canvas.height = img.height;\r\n\t\r\n\t        if (exif) {\r\n\t            getExifOrientation(img, function (orientation) {\r\n\t                drawCanvas(canvas, img, num(orientation, 10));\r\n\t                if (customOrientation) {\r\n\t                    drawCanvas(canvas, img, customOrientation);\r\n\t                }\r\n\t            });\r\n\t        } else if (customOrientation) {\r\n\t            drawCanvas(canvas, img, customOrientation);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function _getCanvas(data) {\r\n\t        var self = this,\r\n\t            points = data.points,\r\n\t            left = num(points[0]),\r\n\t            top = num(points[1]),\r\n\t            width = (points[2] - points[0]),\r\n\t            height = (points[3] - points[1]),\r\n\t            circle = data.circle,\r\n\t            canvas = document.createElement('canvas'),\r\n\t            ctx = canvas.getContext('2d'),\r\n\t            outWidth = width,\r\n\t            outHeight = height,\r\n\t            startX = 0,\r\n\t            startY = 0;\r\n\t\r\n\t        if (data.outputWidth && data.outputHeight) {\r\n\t            outWidth = data.outputWidth;\r\n\t            outHeight = data.outputHeight;\r\n\t        }\r\n\t\r\n\t        canvas.width = outWidth;\r\n\t        canvas.height = outHeight;\r\n\t\r\n\t        if (data.backgroundColor) {\r\n\t            ctx.fillStyle = data.backgroundColor;\r\n\t            ctx.fillRect(0, 0, outWidth, outHeight);\r\n\t        }\r\n\t        // start fixing data to send to draw image for enforceBoundary: false\r\n\t        if (left < 0) {\r\n\t            startX = Math.abs(left);\r\n\t            left = 0;\r\n\t        }\r\n\t        if (top < 0) {\r\n\t            startY = Math.abs(top);\r\n\t            top = 0;\r\n\t        }\r\n\t        if ((left + width) > self._originalImageWidth) {\r\n\t            width = self._originalImageWidth - left;\r\n\t            outWidth = width;\r\n\t        }\r\n\t        if ((top + height) > self._originalImageHeight) {\r\n\t            height = self._originalImageHeight - top;\r\n\t            outHeight = height;\r\n\t        }\r\n\t\r\n\t        ctx.drawImage(this.elements.preview, left, top, width, height, startX, startY, outWidth, outHeight);\r\n\t        if (circle) {\r\n\t            ctx.fillStyle = '#fff';\r\n\t            ctx.globalCompositeOperation = 'destination-in';\r\n\t            ctx.beginPath();\r\n\t            ctx.arc(outWidth / 2, outHeight / 2, outWidth / 2, 0, Math.PI * 2, true);\r\n\t            ctx.closePath();\r\n\t            ctx.fill();\r\n\t        }\r\n\t        return canvas;\r\n\t    }\r\n\t\r\n\t    function _getHtmlResult(data) {\r\n\t        var points = data.points,\r\n\t            div = document.createElement('div'),\r\n\t            img = document.createElement('img'),\r\n\t            width = points[2] - points[0],\r\n\t            height = points[3] - points[1];\r\n\t\r\n\t        addClass(div, 'croppie-result');\r\n\t        div.appendChild(img);\r\n\t        css(img, {\r\n\t            left: (-1 * points[0]) + 'px',\r\n\t            top: (-1 * points[1]) + 'px'\r\n\t        });\r\n\t        img.src = data.url;\r\n\t        css(div, {\r\n\t            width: width + 'px',\r\n\t            height: height + 'px'\r\n\t        });\r\n\t\r\n\t        return div;\r\n\t    }\r\n\t\r\n\t    function _getBase64Result(data) {\r\n\t        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n\t    }\r\n\t\r\n\t    function _getBlobResult(data) {\r\n\t        var self = this;\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            _getCanvas.call(self, data).toBlob(function (blob) {\r\n\t                resolve(blob);\r\n\t            }, data.format, data.quality);\r\n\t        });\r\n\t    }\r\n\t\r\n\t    function _bind(options, cb) {\r\n\t        var self = this,\r\n\t            url,\r\n\t            points = [],\r\n\t            zoom = null;\r\n\t\r\n\t        if (typeof (options) === 'string') {\r\n\t            url = options;\r\n\t            options = {};\r\n\t        }\r\n\t        else if (Array.isArray(options)) {\r\n\t            points = options.slice();\r\n\t        }\r\n\t        else if (typeof (options) == 'undefined' && self.data.url) { //refreshing\r\n\t            _updatePropertiesFromImage.call(self);\r\n\t            _triggerUpdate.call(self);\r\n\t            return null;\r\n\t        }\r\n\t        else {\r\n\t            url = options.url;\r\n\t            points = options.points || [];\r\n\t            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n\t        }\r\n\t\r\n\t        self.data.bound = false;\r\n\t        self.data.url = url || self.data.url;\r\n\t        self.data.points = (points || self.data.points).map(function (p) {\r\n\t            return parseFloat(p);\r\n\t        });\r\n\t        self.data.boundZoom = zoom;\r\n\t        var prom = loadImage(url, self.elements.img, self.options.useCanvas);\r\n\t        prom.then(function () {\r\n\t            if (self.options.useCanvas) {\r\n\t                self.elements.img.exifdata = null;\r\n\t                _transferImageToCanvas.call(self, options.orientation || 1);\r\n\t            }\r\n\t            _updatePropertiesFromImage.call(self);\r\n\t            _triggerUpdate.call(self);\r\n\t            if (cb) {\r\n\t                cb();\r\n\t            }\r\n\t        });\r\n\t        return prom;\r\n\t    }\r\n\t\r\n\t    function fix(v, decimalPoints) {\r\n\t        return parseFloat(v).toFixed(decimalPoints || 0);\r\n\t    }\r\n\t\r\n\t    function _get() {\r\n\t        var self = this,\r\n\t            imgData = self.elements.preview.getBoundingClientRect(),\r\n\t            vpData = self.elements.viewport.getBoundingClientRect(),\r\n\t            x1 = vpData.left - imgData.left,\r\n\t            y1 = vpData.top - imgData.top,\r\n\t            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2,\r\n\t            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n\t            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n\t            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n\t            scale = self._currentZoom;\r\n\t\r\n\t        if (scale === Infinity || isNaN(scale)) {\r\n\t            scale = 1;\r\n\t        }\r\n\t\r\n\t        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n\t        x1 = Math.max(max, x1 / scale);\r\n\t        y1 = Math.max(max, y1 / scale);\r\n\t        x2 = Math.max(max, x2 / scale);\r\n\t        y2 = Math.max(max, y2 / scale);\r\n\t\r\n\t        return {\r\n\t            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n\t            zoom: scale\r\n\t        };\r\n\t    }\r\n\t\r\n\t    var RESULT_DEFAULTS = {\r\n\t            type: 'canvas',\r\n\t            format: 'png',\r\n\t            quality: 1\r\n\t        },\r\n\t        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\t\r\n\t    function _result(options) {\r\n\t        var self = this,\r\n\t            data = _get.call(self),\r\n\t            opts = deepExtend(RESULT_DEFAULTS, deepExtend({}, options)),\r\n\t            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n\t            size = opts.size,\r\n\t            format = opts.format,\r\n\t            quality = opts.quality,\r\n\t            backgroundColor = opts.backgroundColor,\r\n\t            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n\t            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n\t            ratio = vpRect.width / vpRect.height,\r\n\t            prom;\r\n\t\r\n\t        if (size === 'viewport') {\r\n\t            data.outputWidth = vpRect.width;\r\n\t            data.outputHeight = vpRect.height;\r\n\t        } else if (typeof size === 'object') {\r\n\t            if (size.width && size.height) {\r\n\t                data.outputWidth = size.width;\r\n\t                data.outputHeight = size.height;\r\n\t            } else if (size.width) {\r\n\t                data.outputWidth = size.width;\r\n\t                data.outputHeight = size.width / ratio;\r\n\t            } else if (size.height) {\r\n\t                data.outputWidth = size.height * ratio;\r\n\t                data.outputHeight = size.height;\r\n\t            }\r\n\t        }\r\n\t\r\n\t        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n\t            data.format = 'image/' + format;\r\n\t            data.quality = quality;\r\n\t        }\r\n\t\r\n\t        data.circle = circle;\r\n\t        data.url = self.data.url;\r\n\t        data.backgroundColor = backgroundColor;\r\n\t\r\n\t        prom = new Promise(function (resolve, reject) {\r\n\t            switch(resultType.toLowerCase())\r\n\t            {\r\n\t                case 'rawcanvas': \r\n\t                    resolve(_getCanvas.call(self, data));\r\n\t                    break;\r\n\t                case 'canvas':\r\n\t                case 'base64':\r\n\t                    resolve(_getBase64Result.call(self, data));\r\n\t                    break;\r\n\t                case 'blob':\r\n\t                    _getBlobResult.call(self, data).then(resolve);\r\n\t                    break;\r\n\t                default: \r\n\t                    resolve(_getHtmlResult.call(self, data));\r\n\t                    break;\r\n\t            }\r\n\t        });\r\n\t        return prom;\r\n\t    }\r\n\t\r\n\t    function _refresh() {\r\n\t        _updatePropertiesFromImage.call(this);\r\n\t    }\r\n\t\r\n\t    function _rotate(deg) {\r\n\t        if (!this.options.useCanvas) {\r\n\t            throw 'Croppie: Cannot rotate without enableOrientation';\r\n\t        }\r\n\t\r\n\t        var self = this,\r\n\t            canvas = self.elements.canvas,\r\n\t            img = self.elements.img,\r\n\t            copy = document.createElement('canvas'),\r\n\t            ornt = 1;\r\n\t\r\n\t        copy.width = canvas.width;\r\n\t        copy.height = canvas.height;\r\n\t        var ctx = copy.getContext('2d');\r\n\t        ctx.drawImage(canvas, 0, 0);\r\n\t\r\n\t        if (deg === 90 || deg === -270) ornt = 6;\r\n\t        if (deg === -90 || deg === 270) ornt = 8;\r\n\t        if (deg === 180 || deg === -180) ornt = 3;\r\n\t\r\n\t        drawCanvas(canvas, copy, ornt);\r\n\t        _onZoom.call(self);\r\n\t    }\r\n\t\r\n\t    function _destroy() {\r\n\t        var self = this;\r\n\t        self.element.removeChild(self.elements.boundary);\r\n\t        removeClass(self.element, 'croppie-container');\r\n\t        if (self.options.enableZoom) {\r\n\t            self.element.removeChild(self.elements.zoomerWrap);\r\n\t        }\r\n\t        delete self.elements;\r\n\t    }\r\n\t\r\n\t    if (window.jQuery) {\r\n\t        var $ = window.jQuery;\r\n\t        $.fn.croppie = function (opts) {\r\n\t            var ot = typeof opts;\r\n\t\r\n\t            if (ot === 'string') {\r\n\t                var args = Array.prototype.slice.call(arguments, 1);\r\n\t                var singleInst = $(this).data('croppie');\r\n\t\r\n\t                if (opts === 'get') {\r\n\t                    return singleInst.get();\r\n\t                }\r\n\t                else if (opts === 'result') {\r\n\t                    return singleInst.result.apply(singleInst, args);\r\n\t                }\r\n\t                else if (opts === 'bind') {\r\n\t                    return singleInst.bind.apply(singleInst, args);\r\n\t                }\r\n\t\r\n\t                return this.each(function () {\r\n\t                    var i = $(this).data('croppie');\r\n\t                    if (!i) return;\r\n\t\r\n\t                    var method = i[opts];\r\n\t                    if ($.isFunction(method)) {\r\n\t                        method.apply(i, args);\r\n\t                        if (opts === 'destroy') {\r\n\t                            $(this).removeData('croppie');\r\n\t                        }\r\n\t                    }\r\n\t                    else {\r\n\t                        throw 'Croppie ' + opts + ' method not found';\r\n\t                    }\r\n\t                });\r\n\t            }\r\n\t            else {\r\n\t                return this.each(function () {\r\n\t                    var i = new Croppie(this, opts);\r\n\t                    i.$ = $;\r\n\t                    $(this).data('croppie', i);\r\n\t                });\r\n\t            }\r\n\t        };\r\n\t    }\r\n\t\r\n\t    function Croppie(element, opts) {\r\n\t        this.element = element;\r\n\t        this.options = deepExtend(deepExtend({}, Croppie.defaults), opts);\r\n\t\r\n\t        if (this.element.tagName.toLowerCase() === 'img') {\r\n\t            var origImage = this.element;\r\n\t            addClass(origImage, 'cr-original-image');\r\n\t            var replacementDiv = document.createElement('div');\r\n\t            this.element.parentNode.appendChild(replacementDiv);\r\n\t            replacementDiv.appendChild(origImage);\r\n\t            this.element = replacementDiv;\r\n\t            this.options.url = this.options.url || origImage.src;\r\n\t        }\r\n\t        \r\n\t        _create.call(this);\r\n\t        if (this.options.url) {\r\n\t            var bindOpts = {\r\n\t                url: this.options.url,\r\n\t                points: this.options.points\r\n\t            };\r\n\t            delete this.options['url'];\r\n\t            delete this.options['points'];\r\n\t            _bind.call(this, bindOpts);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    Croppie.defaults = {\r\n\t        viewport: {\r\n\t            width: 100,\r\n\t            height: 100,\r\n\t            type: 'square'\r\n\t        },\r\n\t        boundary: { },\r\n\t        orientationControls: {\r\n\t            enabled: true,\r\n\t            leftClass: '',\r\n\t            rightClass: ''\r\n\t        },\r\n\t        customClass: '',\r\n\t        showZoomer: true,\r\n\t        enableZoom: true,\r\n\t        mouseWheelZoom: true,\r\n\t        enableExif: false,\r\n\t        enforceBoundary: true,\r\n\t        enableOrientation: false,\r\n\t        update: function () { }\r\n\t    };\r\n\t\r\n\t    deepExtend(Croppie.prototype, {\r\n\t        bind: function (options, cb) {\r\n\t            return _bind.call(this, options, cb);\r\n\t        },\r\n\t        get: function () {\r\n\t            return _get.call(this);\r\n\t        },\r\n\t        result: function (type) {\r\n\t            return _result.call(this, type);\r\n\t        },\r\n\t        refresh: function () {\r\n\t            return _refresh.call(this);\r\n\t        },\r\n\t        setZoom: function (v) {\r\n\t            _setZoomerVal.call(this, v);\r\n\t            dispatchChange(this.elements.zoomer);\r\n\t        },\r\n\t        rotate: function (deg) {\r\n\t            _rotate.call(this, deg);\r\n\t        },\r\n\t        destroy: function () {\r\n\t            return _destroy.call(this);\r\n\t        }\r\n\t    });\r\n\t\r\n\t    exports.Croppie = window.Croppie = Croppie;\r\n\t\r\n\t    if (typeof module === 'object' && !!module.exports) {\r\n\t        module.exports = Croppie;\r\n\t    }\r\n\t}));\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6).setImmediate, __webpack_require__(8)))\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate, clearImmediate) {var nextTick = __webpack_require__(7).nextTick;\n\tvar apply = Function.prototype.apply;\n\tvar slice = Array.prototype.slice;\n\tvar immediateIds = {};\n\tvar nextImmediateId = 0;\n\t\n\t// DOM APIs, for completeness\n\t\n\texports.setTimeout = function() {\n\t  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n\t};\n\texports.setInterval = function() {\n\t  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n\t};\n\texports.clearTimeout =\n\texports.clearInterval = function(timeout) { timeout.close(); };\n\t\n\tfunction Timeout(id, clearFn) {\n\t  this._id = id;\n\t  this._clearFn = clearFn;\n\t}\n\tTimeout.prototype.unref = Timeout.prototype.ref = function() {};\n\tTimeout.prototype.close = function() {\n\t  this._clearFn.call(window, this._id);\n\t};\n\t\n\t// Does not start the time, just sets up the members needed.\n\texports.enroll = function(item, msecs) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = msecs;\n\t};\n\t\n\texports.unenroll = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = -1;\n\t};\n\t\n\texports._unrefActive = exports.active = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t\n\t  var msecs = item._idleTimeout;\n\t  if (msecs >= 0) {\n\t    item._idleTimeoutId = setTimeout(function onTimeout() {\n\t      if (item._onTimeout)\n\t        item._onTimeout();\n\t    }, msecs);\n\t  }\n\t};\n\t\n\t// That's not how node.js implements it but the exposed api is the same.\n\texports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n\t  var id = nextImmediateId++;\n\t  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\t\n\t  immediateIds[id] = true;\n\t\n\t  nextTick(function onNextTick() {\n\t    if (immediateIds[id]) {\n\t      // fn.call() is faster so we optimize for the common use-case\n\t      // @see http://jsperf.com/call-apply-segu\n\t      if (args) {\n\t        fn.apply(null, args);\n\t      } else {\n\t        fn.call(null);\n\t      }\n\t      // Prevent ids from leaking\n\t      exports.clearImmediate(id);\n\t    }\n\t  });\n\t\n\t  return id;\n\t};\n\t\n\texports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n\t  delete immediateIds[id];\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6).setImmediate, __webpack_require__(6).clearImmediate))\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function() {\n\t\n\t    var debug = false;\n\t\n\t    var root = this;\n\t\n\t    var EXIF = function(obj) {\n\t        if (obj instanceof EXIF) return obj;\n\t        if (!(this instanceof EXIF)) return new EXIF(obj);\n\t        this.EXIFwrapped = obj;\n\t    };\n\t\n\t    if (true) {\n\t        if (typeof module !== 'undefined' && module.exports) {\n\t            exports = module.exports = EXIF;\n\t        }\n\t        exports.EXIF = EXIF;\n\t    } else {\n\t        root.EXIF = EXIF;\n\t    }\n\t\n\t    var ExifTags = EXIF.Tags = {\n\t\n\t        // version tags\n\t        0x9000 : \"ExifVersion\",             // EXIF version\n\t        0xA000 : \"FlashpixVersion\",         // Flashpix format version\n\t\n\t        // colorspace tags\n\t        0xA001 : \"ColorSpace\",              // Color space information tag\n\t\n\t        // image configuration\n\t        0xA002 : \"PixelXDimension\",         // Valid width of meaningful image\n\t        0xA003 : \"PixelYDimension\",         // Valid height of meaningful image\n\t        0x9101 : \"ComponentsConfiguration\", // Information about channels\n\t        0x9102 : \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\t\n\t        // user information\n\t        0x927C : \"MakerNote\",               // Any desired information written by the manufacturer\n\t        0x9286 : \"UserComment\",             // Comments by user\n\t\n\t        // related file\n\t        0xA004 : \"RelatedSoundFile\",        // Name of related sound file\n\t\n\t        // date and time\n\t        0x9003 : \"DateTimeOriginal\",        // Date and time when the original image was generated\n\t        0x9004 : \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n\t        0x9290 : \"SubsecTime\",              // Fractions of seconds for DateTime\n\t        0x9291 : \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n\t        0x9292 : \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\t\n\t        // picture-taking conditions\n\t        0x829A : \"ExposureTime\",            // Exposure time (in seconds)\n\t        0x829D : \"FNumber\",                 // F number\n\t        0x8822 : \"ExposureProgram\",         // Exposure program\n\t        0x8824 : \"SpectralSensitivity\",     // Spectral sensitivity\n\t        0x8827 : \"ISOSpeedRatings\",         // ISO speed rating\n\t        0x8828 : \"OECF\",                    // Optoelectric conversion factor\n\t        0x9201 : \"ShutterSpeedValue\",       // Shutter speed\n\t        0x9202 : \"ApertureValue\",           // Lens aperture\n\t        0x9203 : \"BrightnessValue\",         // Value of brightness\n\t        0x9204 : \"ExposureBias\",            // Exposure bias\n\t        0x9205 : \"MaxApertureValue\",        // Smallest F number of lens\n\t        0x9206 : \"SubjectDistance\",         // Distance to subject in meters\n\t        0x9207 : \"MeteringMode\",            // Metering mode\n\t        0x9208 : \"LightSource\",             // Kind of light source\n\t        0x9209 : \"Flash\",                   // Flash status\n\t        0x9214 : \"SubjectArea\",             // Location and area of main subject\n\t        0x920A : \"FocalLength\",             // Focal length of the lens in mm\n\t        0xA20B : \"FlashEnergy\",             // Strobe energy in BCPS\n\t        0xA20C : \"SpatialFrequencyResponse\",    //\n\t        0xA20E : \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n\t        0xA20F : \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n\t        0xA210 : \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n\t        0xA214 : \"SubjectLocation\",         // Location of subject in image\n\t        0xA215 : \"ExposureIndex\",           // Exposure index selected on camera\n\t        0xA217 : \"SensingMethod\",           // Image sensor type\n\t        0xA300 : \"FileSource\",              // Image source (3 == DSC)\n\t        0xA301 : \"SceneType\",               // Scene type (1 == directly photographed)\n\t        0xA302 : \"CFAPattern\",              // Color filter array geometric pattern\n\t        0xA401 : \"CustomRendered\",          // Special processing\n\t        0xA402 : \"ExposureMode\",            // Exposure mode\n\t        0xA403 : \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n\t        0xA404 : \"DigitalZoomRation\",       // Digital zoom ratio\n\t        0xA405 : \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n\t        0xA406 : \"SceneCaptureType\",        // Type of scene\n\t        0xA407 : \"GainControl\",             // Degree of overall image gain adjustment\n\t        0xA408 : \"Contrast\",                // Direction of contrast processing applied by camera\n\t        0xA409 : \"Saturation\",              // Direction of saturation processing applied by camera\n\t        0xA40A : \"Sharpness\",               // Direction of sharpness processing applied by camera\n\t        0xA40B : \"DeviceSettingDescription\",    //\n\t        0xA40C : \"SubjectDistanceRange\",    // Distance to subject\n\t\n\t        // other tags\n\t        0xA005 : \"InteroperabilityIFDPointer\",\n\t        0xA420 : \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n\t    };\n\t\n\t    var TiffTags = EXIF.TiffTags = {\n\t        0x0100 : \"ImageWidth\",\n\t        0x0101 : \"ImageHeight\",\n\t        0x8769 : \"ExifIFDPointer\",\n\t        0x8825 : \"GPSInfoIFDPointer\",\n\t        0xA005 : \"InteroperabilityIFDPointer\",\n\t        0x0102 : \"BitsPerSample\",\n\t        0x0103 : \"Compression\",\n\t        0x0106 : \"PhotometricInterpretation\",\n\t        0x0112 : \"Orientation\",\n\t        0x0115 : \"SamplesPerPixel\",\n\t        0x011C : \"PlanarConfiguration\",\n\t        0x0212 : \"YCbCrSubSampling\",\n\t        0x0213 : \"YCbCrPositioning\",\n\t        0x011A : \"XResolution\",\n\t        0x011B : \"YResolution\",\n\t        0x0128 : \"ResolutionUnit\",\n\t        0x0111 : \"StripOffsets\",\n\t        0x0116 : \"RowsPerStrip\",\n\t        0x0117 : \"StripByteCounts\",\n\t        0x0201 : \"JPEGInterchangeFormat\",\n\t        0x0202 : \"JPEGInterchangeFormatLength\",\n\t        0x012D : \"TransferFunction\",\n\t        0x013E : \"WhitePoint\",\n\t        0x013F : \"PrimaryChromaticities\",\n\t        0x0211 : \"YCbCrCoefficients\",\n\t        0x0214 : \"ReferenceBlackWhite\",\n\t        0x0132 : \"DateTime\",\n\t        0x010E : \"ImageDescription\",\n\t        0x010F : \"Make\",\n\t        0x0110 : \"Model\",\n\t        0x0131 : \"Software\",\n\t        0x013B : \"Artist\",\n\t        0x8298 : \"Copyright\"\n\t    };\n\t\n\t    var GPSTags = EXIF.GPSTags = {\n\t        0x0000 : \"GPSVersionID\",\n\t        0x0001 : \"GPSLatitudeRef\",\n\t        0x0002 : \"GPSLatitude\",\n\t        0x0003 : \"GPSLongitudeRef\",\n\t        0x0004 : \"GPSLongitude\",\n\t        0x0005 : \"GPSAltitudeRef\",\n\t        0x0006 : \"GPSAltitude\",\n\t        0x0007 : \"GPSTimeStamp\",\n\t        0x0008 : \"GPSSatellites\",\n\t        0x0009 : \"GPSStatus\",\n\t        0x000A : \"GPSMeasureMode\",\n\t        0x000B : \"GPSDOP\",\n\t        0x000C : \"GPSSpeedRef\",\n\t        0x000D : \"GPSSpeed\",\n\t        0x000E : \"GPSTrackRef\",\n\t        0x000F : \"GPSTrack\",\n\t        0x0010 : \"GPSImgDirectionRef\",\n\t        0x0011 : \"GPSImgDirection\",\n\t        0x0012 : \"GPSMapDatum\",\n\t        0x0013 : \"GPSDestLatitudeRef\",\n\t        0x0014 : \"GPSDestLatitude\",\n\t        0x0015 : \"GPSDestLongitudeRef\",\n\t        0x0016 : \"GPSDestLongitude\",\n\t        0x0017 : \"GPSDestBearingRef\",\n\t        0x0018 : \"GPSDestBearing\",\n\t        0x0019 : \"GPSDestDistanceRef\",\n\t        0x001A : \"GPSDestDistance\",\n\t        0x001B : \"GPSProcessingMethod\",\n\t        0x001C : \"GPSAreaInformation\",\n\t        0x001D : \"GPSDateStamp\",\n\t        0x001E : \"GPSDifferential\"\n\t    };\n\t\n\t    var StringValues = EXIF.StringValues = {\n\t        ExposureProgram : {\n\t            0 : \"Not defined\",\n\t            1 : \"Manual\",\n\t            2 : \"Normal program\",\n\t            3 : \"Aperture priority\",\n\t            4 : \"Shutter priority\",\n\t            5 : \"Creative program\",\n\t            6 : \"Action program\",\n\t            7 : \"Portrait mode\",\n\t            8 : \"Landscape mode\"\n\t        },\n\t        MeteringMode : {\n\t            0 : \"Unknown\",\n\t            1 : \"Average\",\n\t            2 : \"CenterWeightedAverage\",\n\t            3 : \"Spot\",\n\t            4 : \"MultiSpot\",\n\t            5 : \"Pattern\",\n\t            6 : \"Partial\",\n\t            255 : \"Other\"\n\t        },\n\t        LightSource : {\n\t            0 : \"Unknown\",\n\t            1 : \"Daylight\",\n\t            2 : \"Fluorescent\",\n\t            3 : \"Tungsten (incandescent light)\",\n\t            4 : \"Flash\",\n\t            9 : \"Fine weather\",\n\t            10 : \"Cloudy weather\",\n\t            11 : \"Shade\",\n\t            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\n\t            13 : \"Day white fluorescent (N 4600 - 5400K)\",\n\t            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\n\t            15 : \"White fluorescent (WW 3200 - 3700K)\",\n\t            17 : \"Standard light A\",\n\t            18 : \"Standard light B\",\n\t            19 : \"Standard light C\",\n\t            20 : \"D55\",\n\t            21 : \"D65\",\n\t            22 : \"D75\",\n\t            23 : \"D50\",\n\t            24 : \"ISO studio tungsten\",\n\t            255 : \"Other\"\n\t        },\n\t        Flash : {\n\t            0x0000 : \"Flash did not fire\",\n\t            0x0001 : \"Flash fired\",\n\t            0x0005 : \"Strobe return light not detected\",\n\t            0x0007 : \"Strobe return light detected\",\n\t            0x0009 : \"Flash fired, compulsory flash mode\",\n\t            0x000D : \"Flash fired, compulsory flash mode, return light not detected\",\n\t            0x000F : \"Flash fired, compulsory flash mode, return light detected\",\n\t            0x0010 : \"Flash did not fire, compulsory flash mode\",\n\t            0x0018 : \"Flash did not fire, auto mode\",\n\t            0x0019 : \"Flash fired, auto mode\",\n\t            0x001D : \"Flash fired, auto mode, return light not detected\",\n\t            0x001F : \"Flash fired, auto mode, return light detected\",\n\t            0x0020 : \"No flash function\",\n\t            0x0041 : \"Flash fired, red-eye reduction mode\",\n\t            0x0045 : \"Flash fired, red-eye reduction mode, return light not detected\",\n\t            0x0047 : \"Flash fired, red-eye reduction mode, return light detected\",\n\t            0x0049 : \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n\t            0x004D : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n\t            0x004F : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n\t            0x0059 : \"Flash fired, auto mode, red-eye reduction mode\",\n\t            0x005D : \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n\t            0x005F : \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n\t        },\n\t        SensingMethod : {\n\t            1 : \"Not defined\",\n\t            2 : \"One-chip color area sensor\",\n\t            3 : \"Two-chip color area sensor\",\n\t            4 : \"Three-chip color area sensor\",\n\t            5 : \"Color sequential area sensor\",\n\t            7 : \"Trilinear sensor\",\n\t            8 : \"Color sequential linear sensor\"\n\t        },\n\t        SceneCaptureType : {\n\t            0 : \"Standard\",\n\t            1 : \"Landscape\",\n\t            2 : \"Portrait\",\n\t            3 : \"Night scene\"\n\t        },\n\t        SceneType : {\n\t            1 : \"Directly photographed\"\n\t        },\n\t        CustomRendered : {\n\t            0 : \"Normal process\",\n\t            1 : \"Custom process\"\n\t        },\n\t        WhiteBalance : {\n\t            0 : \"Auto white balance\",\n\t            1 : \"Manual white balance\"\n\t        },\n\t        GainControl : {\n\t            0 : \"None\",\n\t            1 : \"Low gain up\",\n\t            2 : \"High gain up\",\n\t            3 : \"Low gain down\",\n\t            4 : \"High gain down\"\n\t        },\n\t        Contrast : {\n\t            0 : \"Normal\",\n\t            1 : \"Soft\",\n\t            2 : \"Hard\"\n\t        },\n\t        Saturation : {\n\t            0 : \"Normal\",\n\t            1 : \"Low saturation\",\n\t            2 : \"High saturation\"\n\t        },\n\t        Sharpness : {\n\t            0 : \"Normal\",\n\t            1 : \"Soft\",\n\t            2 : \"Hard\"\n\t        },\n\t        SubjectDistanceRange : {\n\t            0 : \"Unknown\",\n\t            1 : \"Macro\",\n\t            2 : \"Close view\",\n\t            3 : \"Distant view\"\n\t        },\n\t        FileSource : {\n\t            3 : \"DSC\"\n\t        },\n\t\n\t        Components : {\n\t            0 : \"\",\n\t            1 : \"Y\",\n\t            2 : \"Cb\",\n\t            3 : \"Cr\",\n\t            4 : \"R\",\n\t            5 : \"G\",\n\t            6 : \"B\"\n\t        }\n\t    };\n\t\n\t    function addEvent(element, event, handler) {\n\t        if (element.addEventListener) {\n\t            element.addEventListener(event, handler, false);\n\t        } else if (element.attachEvent) {\n\t            element.attachEvent(\"on\" + event, handler);\n\t        }\n\t    }\n\t\n\t    function imageHasData(img) {\n\t        return !!(img.exifdata);\n\t    }\n\t\n\t\n\t    function base64ToArrayBuffer(base64, contentType) {\n\t        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n\t        base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n\t        var binary = atob(base64);\n\t        var len = binary.length;\n\t        var buffer = new ArrayBuffer(len);\n\t        var view = new Uint8Array(buffer);\n\t        for (var i = 0; i < len; i++) {\n\t            view[i] = binary.charCodeAt(i);\n\t        }\n\t        return buffer;\n\t    }\n\t\n\t    function objectURLToBlob(url, callback) {\n\t        var http = new XMLHttpRequest();\n\t        http.open(\"GET\", url, true);\n\t        http.responseType = \"blob\";\n\t        http.onload = function(e) {\n\t            if (this.status == 200 || this.status === 0) {\n\t                callback(this.response);\n\t            }\n\t        };\n\t        http.send();\n\t    }\n\t\n\t    function getImageData(img, callback) {\n\t        function handleBinaryFile(binFile) {\n\t            var data = findEXIFinJPEG(binFile);\n\t            var iptcdata = findIPTCinJPEG(binFile);\n\t            img.exifdata = data || {};\n\t            img.iptcdata = iptcdata || {};\n\t            if (callback) {\n\t                callback.call(img);\n\t            }\n\t        }\n\t\n\t        if (img.src) {\n\t            if (/^data\\:/i.test(img.src)) { // Data URI\n\t                var arrayBuffer = base64ToArrayBuffer(img.src);\n\t                handleBinaryFile(arrayBuffer);\n\t\n\t            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n\t                var fileReader = new FileReader();\n\t                fileReader.onload = function(e) {\n\t                    handleBinaryFile(e.target.result);\n\t                };\n\t                objectURLToBlob(img.src, function (blob) {\n\t                    fileReader.readAsArrayBuffer(blob);\n\t                });\n\t            } else {\n\t                var http = new XMLHttpRequest();\n\t                http.onload = function() {\n\t                    if (this.status == 200 || this.status === 0) {\n\t                        handleBinaryFile(http.response);\n\t                    } else {\n\t                        throw \"Could not load image\";\n\t                    }\n\t                    http = null;\n\t                };\n\t                http.open(\"GET\", img.src, true);\n\t                http.responseType = \"arraybuffer\";\n\t                http.send(null);\n\t            }\n\t        } else if (window.FileReader && (img instanceof window.Blob || img instanceof window.File)) {\n\t            var fileReader = new FileReader();\n\t            fileReader.onload = function(e) {\n\t                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n\t                handleBinaryFile(e.target.result);\n\t            };\n\t\n\t            fileReader.readAsArrayBuffer(img);\n\t        }\n\t    }\n\t\n\t    function findEXIFinJPEG(file) {\n\t        var dataView = new DataView(file);\n\t\n\t        if (debug) console.log(\"Got file of length \" + file.byteLength);\n\t        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n\t            if (debug) console.log(\"Not a valid JPEG\");\n\t            return false; // not a valid jpeg\n\t        }\n\t\n\t        var offset = 2,\n\t            length = file.byteLength,\n\t            marker;\n\t\n\t        while (offset < length) {\n\t            if (dataView.getUint8(offset) != 0xFF) {\n\t                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n\t                return false; // not a valid marker, something is wrong\n\t            }\n\t\n\t            marker = dataView.getUint8(offset + 1);\n\t            if (debug) console.log(marker);\n\t\n\t            // we could implement handling for other markers here,\n\t            // but we're only looking for 0xFFE1 for EXIF data\n\t\n\t            if (marker == 225) {\n\t                if (debug) console.log(\"Found 0xFFE1 marker\");\n\t\n\t                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\t\n\t                // offset += 2 + file.getShortAt(offset+2, true);\n\t\n\t            } else {\n\t                offset += 2 + dataView.getUint16(offset+2);\n\t            }\n\t\n\t        }\n\t\n\t    }\n\t\n\t    function findIPTCinJPEG(file) {\n\t        var dataView = new DataView(file);\n\t\n\t        if (debug) console.log(\"Got file of length \" + file.byteLength);\n\t        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n\t            if (debug) console.log(\"Not a valid JPEG\");\n\t            return false; // not a valid jpeg\n\t        }\n\t\n\t        var offset = 2,\n\t            length = file.byteLength;\n\t\n\t\n\t        var isFieldSegmentStart = function(dataView, offset){\n\t            return (\n\t                dataView.getUint8(offset) === 0x38 &&\n\t                dataView.getUint8(offset+1) === 0x42 &&\n\t                dataView.getUint8(offset+2) === 0x49 &&\n\t                dataView.getUint8(offset+3) === 0x4D &&\n\t                dataView.getUint8(offset+4) === 0x04 &&\n\t                dataView.getUint8(offset+5) === 0x04\n\t            );\n\t        };\n\t\n\t        while (offset < length) {\n\t\n\t            if ( isFieldSegmentStart(dataView, offset )){\n\t\n\t                // Get the length of the name header (which is padded to an even number of bytes)\n\t                var nameHeaderLength = dataView.getUint8(offset+7);\n\t                if(nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n\t                // Check for pre photoshop 6 format\n\t                if(nameHeaderLength === 0) {\n\t                    // Always 4\n\t                    nameHeaderLength = 4;\n\t                }\n\t\n\t                var startOffset = offset + 8 + nameHeaderLength;\n\t                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\t\n\t                return readIPTCData(file, startOffset, sectionLength);\n\t\n\t                break;\n\t\n\t            }\n\t\n\t\n\t            // Not the marker, continue searching\n\t            offset++;\n\t\n\t        }\n\t\n\t    }\n\t    var IptcFieldMap = {\n\t        0x78 : 'caption',\n\t        0x6E : 'credit',\n\t        0x19 : 'keywords',\n\t        0x37 : 'dateCreated',\n\t        0x50 : 'byline',\n\t        0x55 : 'bylineTitle',\n\t        0x7A : 'captionWriter',\n\t        0x69 : 'headline',\n\t        0x74 : 'copyright',\n\t        0x0F : 'category'\n\t    };\n\t    function readIPTCData(file, startOffset, sectionLength){\n\t        var dataView = new DataView(file);\n\t        var data = {};\n\t        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n\t        var segmentStartPos = startOffset;\n\t        while(segmentStartPos < startOffset+sectionLength) {\n\t            if(dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos+1) === 0x02){\n\t                segmentType = dataView.getUint8(segmentStartPos+2);\n\t                if(segmentType in IptcFieldMap) {\n\t                    dataSize = dataView.getInt16(segmentStartPos+3);\n\t                    segmentSize = dataSize + 5;\n\t                    fieldName = IptcFieldMap[segmentType];\n\t                    fieldValue = getStringFromDB(dataView, segmentStartPos+5, dataSize);\n\t                    // Check if we already stored a value with this name\n\t                    if(data.hasOwnProperty(fieldName)) {\n\t                        // Value already stored with this name, create multivalue field\n\t                        if(data[fieldName] instanceof Array) {\n\t                            data[fieldName].push(fieldValue);\n\t                        }\n\t                        else {\n\t                            data[fieldName] = [data[fieldName], fieldValue];\n\t                        }\n\t                    }\n\t                    else {\n\t                        data[fieldName] = fieldValue;\n\t                    }\n\t                }\n\t\n\t            }\n\t            segmentStartPos++;\n\t        }\n\t        return data;\n\t    }\n\t\n\t\n\t\n\t    function readTags(file, tiffStart, dirStart, strings, bigEnd) {\n\t        var entries = file.getUint16(dirStart, !bigEnd),\n\t            tags = {},\n\t            entryOffset, tag,\n\t            i;\n\t\n\t        for (i=0;i<entries;i++) {\n\t            entryOffset = dirStart + i*12 + 2;\n\t            tag = strings[file.getUint16(entryOffset, !bigEnd)];\n\t            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n\t            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n\t        }\n\t        return tags;\n\t    }\n\t\n\t\n\t    function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n\t        var type = file.getUint16(entryOffset+2, !bigEnd),\n\t            numValues = file.getUint32(entryOffset+4, !bigEnd),\n\t            valueOffset = file.getUint32(entryOffset+8, !bigEnd) + tiffStart,\n\t            offset,\n\t            vals, val, n,\n\t            numerator, denominator;\n\t\n\t        switch (type) {\n\t            case 1: // byte, 8-bit unsigned int\n\t            case 7: // undefined, 8-bit byte, value depending on field\n\t                if (numValues == 1) {\n\t                    return file.getUint8(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n\t                    vals = [];\n\t                    for (n=0;n<numValues;n++) {\n\t                        vals[n] = file.getUint8(offset + n);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 2: // ascii, 8-bit byte\n\t                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n\t                return getStringFromDB(file, offset, numValues-1);\n\t\n\t            case 3: // short, 16 bit int\n\t                if (numValues == 1) {\n\t                    return file.getUint16(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n\t                    vals = [];\n\t                    for (n=0;n<numValues;n++) {\n\t                        vals[n] = file.getUint16(offset + 2*n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 4: // long, 32 bit int\n\t                if (numValues == 1) {\n\t                    return file.getUint32(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    vals = [];\n\t                    for (n=0;n<numValues;n++) {\n\t                        vals[n] = file.getUint32(valueOffset + 4*n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 5:    // rational = two long values, first is numerator, second is denominator\n\t                if (numValues == 1) {\n\t                    numerator = file.getUint32(valueOffset, !bigEnd);\n\t                    denominator = file.getUint32(valueOffset+4, !bigEnd);\n\t                    val = new Number(numerator / denominator);\n\t                    val.numerator = numerator;\n\t                    val.denominator = denominator;\n\t                    return val;\n\t                } else {\n\t                    vals = [];\n\t                    for (n=0;n<numValues;n++) {\n\t                        numerator = file.getUint32(valueOffset + 8*n, !bigEnd);\n\t                        denominator = file.getUint32(valueOffset+4 + 8*n, !bigEnd);\n\t                        vals[n] = new Number(numerator / denominator);\n\t                        vals[n].numerator = numerator;\n\t                        vals[n].denominator = denominator;\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 9: // slong, 32 bit signed int\n\t                if (numValues == 1) {\n\t                    return file.getInt32(entryOffset + 8, !bigEnd);\n\t                } else {\n\t                    vals = [];\n\t                    for (n=0;n<numValues;n++) {\n\t                        vals[n] = file.getInt32(valueOffset + 4*n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t\n\t            case 10: // signed rational, two slongs, first is numerator, second is denominator\n\t                if (numValues == 1) {\n\t                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset+4, !bigEnd);\n\t                } else {\n\t                    vals = [];\n\t                    for (n=0;n<numValues;n++) {\n\t                        vals[n] = file.getInt32(valueOffset + 8*n, !bigEnd) / file.getInt32(valueOffset+4 + 8*n, !bigEnd);\n\t                    }\n\t                    return vals;\n\t                }\n\t        }\n\t    }\n\t\n\t    function getStringFromDB(buffer, start, length) {\n\t        var outstr = \"\";\n\t        for (n = start; n < start+length; n++) {\n\t            outstr += String.fromCharCode(buffer.getUint8(n));\n\t        }\n\t        return outstr;\n\t    }\n\t\n\t    function readEXIFData(file, start) {\n\t        if (getStringFromDB(file, start, 4) != \"Exif\") {\n\t            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n\t            return false;\n\t        }\n\t\n\t        var bigEnd,\n\t            tags, tag,\n\t            exifData, gpsData,\n\t            tiffOffset = start + 6;\n\t\n\t        // test for TIFF validity and endianness\n\t        if (file.getUint16(tiffOffset) == 0x4949) {\n\t            bigEnd = false;\n\t        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n\t            bigEnd = true;\n\t        } else {\n\t            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n\t            return false;\n\t        }\n\t\n\t        if (file.getUint16(tiffOffset+2, !bigEnd) != 0x002A) {\n\t            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n\t            return false;\n\t        }\n\t\n\t        var firstIFDOffset = file.getUint32(tiffOffset+4, !bigEnd);\n\t\n\t        if (firstIFDOffset < 0x00000008) {\n\t            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset+4, !bigEnd));\n\t            return false;\n\t        }\n\t\n\t        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n\t\n\t        if (tags.ExifIFDPointer) {\n\t            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n\t            for (tag in exifData) {\n\t                switch (tag) {\n\t                    case \"LightSource\" :\n\t                    case \"Flash\" :\n\t                    case \"MeteringMode\" :\n\t                    case \"ExposureProgram\" :\n\t                    case \"SensingMethod\" :\n\t                    case \"SceneCaptureType\" :\n\t                    case \"SceneType\" :\n\t                    case \"CustomRendered\" :\n\t                    case \"WhiteBalance\" :\n\t                    case \"GainControl\" :\n\t                    case \"Contrast\" :\n\t                    case \"Saturation\" :\n\t                    case \"Sharpness\" :\n\t                    case \"SubjectDistanceRange\" :\n\t                    case \"FileSource\" :\n\t                        exifData[tag] = StringValues[tag][exifData[tag]];\n\t                        break;\n\t\n\t                    case \"ExifVersion\" :\n\t                    case \"FlashpixVersion\" :\n\t                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n\t                        break;\n\t\n\t                    case \"ComponentsConfiguration\" :\n\t                        exifData[tag] =\n\t                            StringValues.Components[exifData[tag][0]] +\n\t                            StringValues.Components[exifData[tag][1]] +\n\t                            StringValues.Components[exifData[tag][2]] +\n\t                            StringValues.Components[exifData[tag][3]];\n\t                        break;\n\t                }\n\t                tags[tag] = exifData[tag];\n\t            }\n\t        }\n\t\n\t        if (tags.GPSInfoIFDPointer) {\n\t            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n\t            for (tag in gpsData) {\n\t                switch (tag) {\n\t                    case \"GPSVersionID\" :\n\t                        gpsData[tag] = gpsData[tag][0] +\n\t                            \".\" + gpsData[tag][1] +\n\t                            \".\" + gpsData[tag][2] +\n\t                            \".\" + gpsData[tag][3];\n\t                        break;\n\t                }\n\t                tags[tag] = gpsData[tag];\n\t            }\n\t        }\n\t\n\t        return tags;\n\t    }\n\t\n\t    EXIF.getData = function(img, callback) {\n\t        if ((img instanceof Image || img instanceof HTMLImageElement) && !img.complete) return false;\n\t\n\t        if (!imageHasData(img)) {\n\t            getImageData(img, callback);\n\t        } else {\n\t            if (callback) {\n\t                callback.call(img);\n\t            }\n\t        }\n\t        return true;\n\t    }\n\t\n\t    EXIF.getTag = function(img, tag) {\n\t        if (!imageHasData(img)) return;\n\t        return img.exifdata[tag];\n\t    }\n\t\n\t    EXIF.getAllTags = function(img) {\n\t        if (!imageHasData(img)) return {};\n\t        var a,\n\t            data = img.exifdata,\n\t            tags = {};\n\t        for (a in data) {\n\t            if (data.hasOwnProperty(a)) {\n\t                tags[a] = data[a];\n\t            }\n\t        }\n\t        return tags;\n\t    }\n\t\n\t    EXIF.pretty = function(img) {\n\t        if (!imageHasData(img)) return \"\";\n\t        var a,\n\t            data = img.exifdata,\n\t            strPretty = \"\";\n\t        for (a in data) {\n\t            if (data.hasOwnProperty(a)) {\n\t                if (typeof data[a] == \"object\") {\n\t                    if (data[a] instanceof Number) {\n\t                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n\t                    } else {\n\t                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n\t                    }\n\t                } else {\n\t                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n\t                }\n\t            }\n\t        }\n\t        return strPretty;\n\t    }\n\t\n\t    EXIF.readFromBinaryFile = function(file) {\n\t        return findEXIFinJPEG(file);\n\t    }\n\t\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t            return EXIF;\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    }\n\t}.call(this));\n\t\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** ngImageCrop.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 11eb04cc79841b65fc07\n **/","import 'croppie/croppie.css';\nlet croppie = require('croppie/croppie.js');\nlet EXIF = require('exif-js');\n\nconst MODULE_NAME = 'ngImageCrop';\n\nexport default MODULE_NAME;\n\nconst module = angular.module(MODULE_NAME, []);\n\nclass ImageCropDirectiveCtrl {\n  /* @ngInject */\n  constructor($scope, $document, $element, $timeout, $window) {\n    this.$document = $document;\n    this.$element = $element;\n    this.$scope = $scope;\n    this.$timeout = $timeout;\n    this.$window = $window;\n    this.$window.EXIF = EXIF;\n    this.initialized = false;\n    this._initCroppie();\n  }\n\n  set originalImage(value) {\n    this._originalImage = value;\n    if (this.c !== undefined) {\n      this._bindImage();\n    }\n  }\n\n  get originalImage() {\n    return this._originalImage;\n  }\n\n  saveCrop() {\n    // returns a blob of the cropped image\n    this.c.result({\n      type: 'canvas',\n      quality: this.options.result.quality,\n      size: {width: this.options.result.width},\n      format: this.options.result.format\n    }).then((img)=> {\n      this.$scope.$apply(()=> {\n        var regex = /^data:[a-z]+\\/[a-z]+;base64,(.+)/;\n        var base64String = regex.exec(img);\n        var croppedImage = this._b64ToBlob(base64String[base64String.length - 1]);\n        // call apply callback\n        this.onApply({image: croppedImage});\n      });\n    });\n  }\n\n  _bindImage() {\n    // binds image to croppie instance\n    let reader = new FileReader();\n\n    reader.onload = ()=> {\n      this.c.bind(reader.result);\n    };\n    reader.readAsDataURL(this._originalImage);\n  }\n\n  _initCroppie() {\n    // initializes a croppie instance\n    this.c = new croppie(this.$element.find('.cropper')[0], this.options.croppie);\n    if (this._originalImage) {\n      this._bindImage();\n    }\n  }\n\n  _b64ToBlob(b64Data) {\n    const byteCharacters = atob(b64Data);\n    const byteArrays = [];\n    const contentType = this._originalImage.type;\n    const sliceSize = 512;\n\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      const slice = byteCharacters.slice(offset, offset + sliceSize);\n      \n      const byteNumbers = new Array(slice.length);\n      for (let i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n      \n      const byteArray = new Uint8Array(byteNumbers);\n      \n      byteArrays.push(byteArray);\n    }\n    \n    const blob = new Blob(byteArrays, {type: contentType});\n    let width = this.options.result.width;\n    let height = this.options.result.height;\n    let quality = this.options.result.quality;\n    blob.name = width + '_' + height + '_' + quality + '_' + this._originalImage.name;\n    return blob;\n  }\n}\n\n//ImageCropDirectiveCtrl.$inject = ['$scope', '$document', '$element', '$timeout', '$window'];\n\nclass ImageCropDirective {\n\n  constructor() {\n    this.restrict = 'E';\n    this.scope = {\n      originalImage: '<',\n      options: '<',\n      onApply: '&',\n      onCancel: '&'\n    };\n    this.bindToController = true;\n    this.controller = ImageCropDirectiveCtrl;\n    this.controllerAs = '$ctrl';\n    this.template = require('./template.jade')();\n  }\n\n}\n\nmodule.directive('imageCrop', () => new ImageCropDirective());\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../css-loader/index.js!./croppie.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../css-loader/index.js!./croppie.css\", function() {\n\t\t\tvar newContent = require(\"!!./../css-loader/index.js!./croppie.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/croppie/croppie.css\n ** module id = 1\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".croppie-container{width:100%;height:100%}.croppie-container .cr-image{z-index:-1;position:absolute;top:0;left:0;transform-origin:0 0;max-width:none}.croppie-container .cr-boundary{position:relative;overflow:hidden;margin:0 auto;z-index:1;width:100%;height:100%}.croppie-container .cr-viewport{position:absolute;border:2px solid #fff;margin:auto;top:0;bottom:0;right:0;left:0;box-shadow:0 0 2000px 2000px rgba(0,0,0,.5);z-index:0}.croppie-container .cr-original-image{display:none}.croppie-container .cr-vp-circle{border-radius:50%}.croppie-container .cr-overlay{z-index:1;position:absolute;cursor:move}.croppie-container .cr-slider-wrap{width:75%;margin:15px auto;text-align:center}.croppie-result{position:relative;overflow:hidden}.croppie-result img{position:absolute}.croppie-container .cr-image,.croppie-container .cr-overlay,.croppie-container .cr-viewport{-webkit-transform:translateZ(0);transform:translateZ(0)}.cr-slider{-webkit-appearance:none;width:300px;max-width:100%}.cr-slider::-webkit-slider-runnable-track{width:100%;height:3px;background:rgba(0,0,0,.5);border:0;border-radius:3px}.cr-slider::-webkit-slider-thumb{-webkit-appearance:none;border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:-6px}.cr-slider:focus{outline:none}.cr-slider::-moz-range-track{width:100%;height:3px;background:rgba(0,0,0,.5);border:0;border-radius:3px}.cr-slider::-moz-range-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:-6px}.cr-slider:-moz-focusring{outline:1px solid #fff;outline-offset:-1px}.cr-slider::-ms-track{width:300px;height:5px;background:transparent;border-color:transparent;border-width:6px 0;color:transparent}.cr-slider::-ms-fill-lower,.cr-slider::-ms-fill-upper{background:rgba(0,0,0,.5);border-radius:10px}.cr-slider::-ms-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#ddd;margin-top:1px}.cr-slider:focus::-ms-fill-lower,.cr-slider:focus::-ms-fill-upper{background:rgba(0,0,0,.5)}.cr-rotate-controls{position:absolute;bottom:5px;left:5px;z-index:1}.cr-rotate-controls button{border:0;background:none}.cr-rotate-controls i:before{display:inline-block;font-style:normal;font-weight:900;font-size:22px}.cr-rotate-l i:before{content:'\\\\21BA'}.cr-rotate-r i:before{content:'\\\\21BB'}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/croppie/croppie.css\n ** module id = 2\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 4\n ** module chunks = 0\n **/","/*************************\r\n * Croppie\r\n * Copyright 2016\r\n * Foliotek\r\n * Version: 2.4.0\r\n *************************/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(['exports'], factory);\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        factory(exports);\r\n    } else {\r\n        // Browser globals\r\n        factory((root.commonJsStrict = {}));\r\n    }\r\n}(this, function (exports) {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var c=a.then;if(\"function\"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"==typeof a?a:null,this.onRejected=\"function\"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"==typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"==typeof g||\"function\"==typeof g)){var h=g.then;if(\"function\"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if ( typeof window.CustomEvent !== \"function\" ) {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (!HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = document.createElement('div').style,\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, imageEl, useCanvas) {\r\n        var img = imageEl || new Image(),\r\n            prom;\r\n\r\n        if (img.src === src) {\r\n            // If image source hasn't changed, return a promise that resolves immediately\r\n            prom = new Promise(function (resolve, reject) {\r\n                resolve(img);\r\n            });\r\n        } else {\r\n            prom = new Promise(function (resolve, reject) {\r\n                if (useCanvas && src.substring(0,4).toLowerCase() === 'http') {\r\n                    img.setAttribute('crossOrigin', 'anonymous');\r\n                }\r\n                img.onload = function () {\r\n                    setTimeout(function () {\r\n                        resolve(img);\r\n                    }, 1);\r\n                };\r\n            });\r\n\r\n            img.src = src;\r\n        }\r\n\r\n        img.style.opacity = 0;\r\n\r\n        return prom;\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var _TRANSLATE = 'translate3d',\r\n        _TRANSLATE_SUFFIX = ', 0px';\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(_TRANSLATE.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        return _TRANSLATE + '(' + this.x + 'px, ' + this.y + 'px' + _TRANSLATE_SUFFIX + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img, cb) {\r\n        if (!window.EXIF) {\r\n            cb(0);\r\n        }\r\n\r\n        EXIF.getData(img, function () {\r\n            var orientation = EXIF.getTag(this, 'Orientation');\r\n            cb(orientation);\r\n        });\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, canvas, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        // Generating Markup\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = self.elements.img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        // Initialize drag & zoom\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n    }\r\n\r\n    function _initRotationControls () {\r\n        // TODO - Not a fan of these controls\r\n        return;\r\n        var self = this,\r\n            wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n        wrap = document.createElement('div');\r\n        self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n        self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n        wrap.appendChild(btnLeft);\r\n        wrap.appendChild(btnRight);\r\n\r\n        iLeft = document.createElement('i');\r\n        iRight = document.createElement('i');\r\n        btnLeft.appendChild(iLeft);\r\n        btnRight.appendChild(iRight);\r\n\r\n        addClass(wrap, 'cr-rotate-controls');\r\n        addClass(btnLeft, 'cr-rotate-l');\r\n        addClass(btnRight, 'cr-rotate-r');\r\n\r\n        self.elements.boundary.appendChild(wrap);\r\n\r\n        btnLeft.addEventListener('click', function () {\r\n            self.rotate(-90);\r\n        });\r\n        btnRight.addEventListener('click', function () {\r\n            self.rotate(90);\r\n        });\r\n    }\r\n\r\n    function _hasExif() {\r\n        // todo - remove options.exif after deprecation\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(z.min, Math.min(z.max, val));\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = 1;\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview),\r\n            transCss = {};\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        applyCss();\r\n\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint() {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        center.y = top / scale;\r\n        center.x = left / scale;\r\n\r\n        adj.y = (center.y - pc.y) * (1 - scale);\r\n        adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n        transform.x -= adj.x;\r\n        transform.y -= adj.y;\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode == UP_ARROW || ev.keyCode == DOWN_ARROW)) {\r\n                var zoom = 0.0;\r\n                if (ev.keyCode == UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value, 10) + parseFloat(self.elements.zoomer.step, 10)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value, 10) - parseFloat(self.elements.zoomer.step, 10)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (ev.keyCode >= 37 && ev.keyCode <= 40) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            };\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                };\r\n            };\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type == 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get(),\r\n            ev; \r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$) {\r\n            self.$(self.element).trigger('update', data)\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            minZoom = 0,\r\n            maxZoom = 1.5,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            zoomer = self.elements.zoomer,\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self),\r\n            imgData,\r\n            vpData,\r\n            boundaryData,\r\n            minW,\r\n            minH;\r\n\r\n        if (!isVisible || self.data.bound) {\r\n            // if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        imgData = img.getBoundingClientRect();\r\n        vpData = self.elements.viewport.getBoundingClientRect();\r\n        boundaryData = self.elements.boundary.getBoundingClientRect();\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n\r\n        if (self.options.enableZoom) {\r\n            if (self.options.enforceBoundary) {\r\n                minW = vpData.width / imgData.width;\r\n                minH = vpData.height / imgData.height;\r\n                minZoom = Math.max(minW, minH);\r\n            }\r\n\r\n            if (minZoom >= maxZoom) {\r\n                maxZoom = minZoom + 1;\r\n            }\r\n\r\n            zoomer.min = fix(minZoom, 4);\r\n            zoomer.max = fix(maxZoom, 4);\r\n            var defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n            dispatchChange(zoomer);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n        \r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length != 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d'),\r\n            exif = _hasExif.call(self),\r\n            customOrientation = self.options.enableOrientation && customOrientation;\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        if (exif) {\r\n            getExifOrientation(img, function (orientation) {\r\n                drawCanvas(canvas, img, num(orientation, 10));\r\n                if (customOrientation) {\r\n                    drawCanvas(canvas, img, customOrientation);\r\n                }\r\n            });\r\n        } else if (customOrientation) {\r\n            drawCanvas(canvas, img, customOrientation);\r\n        }\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            width = (points[2] - points[0]),\r\n            height = (points[3] - points[1]),\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            outWidth = width,\r\n            outHeight = height,\r\n            startX = 0,\r\n            startY = 0;\r\n\r\n        if (data.outputWidth && data.outputHeight) {\r\n            outWidth = data.outputWidth;\r\n            outHeight = data.outputHeight;\r\n        }\r\n\r\n        canvas.width = outWidth;\r\n        canvas.height = outHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, outWidth, outHeight);\r\n        }\r\n        // start fixing data to send to draw image for enforceBoundary: false\r\n        if (left < 0) {\r\n            startX = Math.abs(left);\r\n            left = 0;\r\n        }\r\n        if (top < 0) {\r\n            startY = Math.abs(top);\r\n            top = 0;\r\n        }\r\n        if ((left + width) > self._originalImageWidth) {\r\n            width = self._originalImageWidth - left;\r\n            outWidth = width;\r\n        }\r\n        if ((top + height) > self._originalImageHeight) {\r\n            height = self._originalImageHeight - top;\r\n            outHeight = height;\r\n        }\r\n\r\n        ctx.drawImage(this.elements.preview, left, top, width, height, startX, startY, outWidth, outHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(outWidth / 2, outHeight / 2, outWidth / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null;\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) == 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.points = (points || self.data.points).map(function (p) {\r\n            return parseFloat(p);\r\n        });\r\n        self.data.boundZoom = zoom;\r\n        var prom = loadImage(url, self.elements.img, self.options.useCanvas);\r\n        prom.then(function () {\r\n            if (self.options.useCanvas) {\r\n                self.elements.img.exifdata = null;\r\n                _transferImageToCanvas.call(self, options.orientation || 1);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            if (cb) {\r\n                cb();\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2,\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(RESULT_DEFAULTS, deepExtend({}, options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size,\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve, reject) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas': \r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default: \r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            copy = document.createElement('canvas'),\r\n            ornt = 1;\r\n\r\n        copy.width = canvas.width;\r\n        copy.height = canvas.height;\r\n        var ctx = copy.getContext('2d');\r\n        ctx.drawImage(canvas, 0, 0);\r\n\r\n        if (deg === 90 || deg === -270) ornt = 6;\r\n        if (deg === -90 || deg === 270) ornt = 8;\r\n        if (deg === 180 || deg === -180) ornt = 3;\r\n\r\n        drawCanvas(canvas, copy, ornt);\r\n        _onZoom.call(self);\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        this.element = element;\r\n        this.options = deepExtend(deepExtend({}, Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n        \r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        update: function () { }\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            return _get.call(this);\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n\r\n    exports.Croppie = window.Croppie = Croppie;\r\n\r\n    if (typeof module === 'object' && !!module.exports) {\r\n        module.exports = Croppie;\r\n    }\r\n}));\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/croppie/croppie.js\n ** module id = 5\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/timers-browserify/main.js\n ** module id = 6\n ** module chunks = 0\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 7\n ** module chunks = 0\n **/","(function() {\n\n    var debug = false;\n\n    var root = this;\n\n    var EXIF = function(obj) {\n        if (obj instanceof EXIF) return obj;\n        if (!(this instanceof EXIF)) return new EXIF(obj);\n        this.EXIFwrapped = obj;\n    };\n\n    if (typeof exports !== 'undefined') {\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = EXIF;\n        }\n        exports.EXIF = EXIF;\n    } else {\n        root.EXIF = EXIF;\n    }\n\n    var ExifTags = EXIF.Tags = {\n\n        // version tags\n        0x9000 : \"ExifVersion\",             // EXIF version\n        0xA000 : \"FlashpixVersion\",         // Flashpix format version\n\n        // colorspace tags\n        0xA001 : \"ColorSpace\",              // Color space information tag\n\n        // image configuration\n        0xA002 : \"PixelXDimension\",         // Valid width of meaningful image\n        0xA003 : \"PixelYDimension\",         // Valid height of meaningful image\n        0x9101 : \"ComponentsConfiguration\", // Information about channels\n        0x9102 : \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\n        // user information\n        0x927C : \"MakerNote\",               // Any desired information written by the manufacturer\n        0x9286 : \"UserComment\",             // Comments by user\n\n        // related file\n        0xA004 : \"RelatedSoundFile\",        // Name of related sound file\n\n        // date and time\n        0x9003 : \"DateTimeOriginal\",        // Date and time when the original image was generated\n        0x9004 : \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n        0x9290 : \"SubsecTime\",              // Fractions of seconds for DateTime\n        0x9291 : \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n        0x9292 : \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\n        // picture-taking conditions\n        0x829A : \"ExposureTime\",            // Exposure time (in seconds)\n        0x829D : \"FNumber\",                 // F number\n        0x8822 : \"ExposureProgram\",         // Exposure program\n        0x8824 : \"SpectralSensitivity\",     // Spectral sensitivity\n        0x8827 : \"ISOSpeedRatings\",         // ISO speed rating\n        0x8828 : \"OECF\",                    // Optoelectric conversion factor\n        0x9201 : \"ShutterSpeedValue\",       // Shutter speed\n        0x9202 : \"ApertureValue\",           // Lens aperture\n        0x9203 : \"BrightnessValue\",         // Value of brightness\n        0x9204 : \"ExposureBias\",            // Exposure bias\n        0x9205 : \"MaxApertureValue\",        // Smallest F number of lens\n        0x9206 : \"SubjectDistance\",         // Distance to subject in meters\n        0x9207 : \"MeteringMode\",            // Metering mode\n        0x9208 : \"LightSource\",             // Kind of light source\n        0x9209 : \"Flash\",                   // Flash status\n        0x9214 : \"SubjectArea\",             // Location and area of main subject\n        0x920A : \"FocalLength\",             // Focal length of the lens in mm\n        0xA20B : \"FlashEnergy\",             // Strobe energy in BCPS\n        0xA20C : \"SpatialFrequencyResponse\",    //\n        0xA20E : \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n        0xA20F : \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n        0xA210 : \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n        0xA214 : \"SubjectLocation\",         // Location of subject in image\n        0xA215 : \"ExposureIndex\",           // Exposure index selected on camera\n        0xA217 : \"SensingMethod\",           // Image sensor type\n        0xA300 : \"FileSource\",              // Image source (3 == DSC)\n        0xA301 : \"SceneType\",               // Scene type (1 == directly photographed)\n        0xA302 : \"CFAPattern\",              // Color filter array geometric pattern\n        0xA401 : \"CustomRendered\",          // Special processing\n        0xA402 : \"ExposureMode\",            // Exposure mode\n        0xA403 : \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n        0xA404 : \"DigitalZoomRation\",       // Digital zoom ratio\n        0xA405 : \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n        0xA406 : \"SceneCaptureType\",        // Type of scene\n        0xA407 : \"GainControl\",             // Degree of overall image gain adjustment\n        0xA408 : \"Contrast\",                // Direction of contrast processing applied by camera\n        0xA409 : \"Saturation\",              // Direction of saturation processing applied by camera\n        0xA40A : \"Sharpness\",               // Direction of sharpness processing applied by camera\n        0xA40B : \"DeviceSettingDescription\",    //\n        0xA40C : \"SubjectDistanceRange\",    // Distance to subject\n\n        // other tags\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0xA420 : \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n    };\n\n    var TiffTags = EXIF.TiffTags = {\n        0x0100 : \"ImageWidth\",\n        0x0101 : \"ImageHeight\",\n        0x8769 : \"ExifIFDPointer\",\n        0x8825 : \"GPSInfoIFDPointer\",\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0x0102 : \"BitsPerSample\",\n        0x0103 : \"Compression\",\n        0x0106 : \"PhotometricInterpretation\",\n        0x0112 : \"Orientation\",\n        0x0115 : \"SamplesPerPixel\",\n        0x011C : \"PlanarConfiguration\",\n        0x0212 : \"YCbCrSubSampling\",\n        0x0213 : \"YCbCrPositioning\",\n        0x011A : \"XResolution\",\n        0x011B : \"YResolution\",\n        0x0128 : \"ResolutionUnit\",\n        0x0111 : \"StripOffsets\",\n        0x0116 : \"RowsPerStrip\",\n        0x0117 : \"StripByteCounts\",\n        0x0201 : \"JPEGInterchangeFormat\",\n        0x0202 : \"JPEGInterchangeFormatLength\",\n        0x012D : \"TransferFunction\",\n        0x013E : \"WhitePoint\",\n        0x013F : \"PrimaryChromaticities\",\n        0x0211 : \"YCbCrCoefficients\",\n        0x0214 : \"ReferenceBlackWhite\",\n        0x0132 : \"DateTime\",\n        0x010E : \"ImageDescription\",\n        0x010F : \"Make\",\n        0x0110 : \"Model\",\n        0x0131 : \"Software\",\n        0x013B : \"Artist\",\n        0x8298 : \"Copyright\"\n    };\n\n    var GPSTags = EXIF.GPSTags = {\n        0x0000 : \"GPSVersionID\",\n        0x0001 : \"GPSLatitudeRef\",\n        0x0002 : \"GPSLatitude\",\n        0x0003 : \"GPSLongitudeRef\",\n        0x0004 : \"GPSLongitude\",\n        0x0005 : \"GPSAltitudeRef\",\n        0x0006 : \"GPSAltitude\",\n        0x0007 : \"GPSTimeStamp\",\n        0x0008 : \"GPSSatellites\",\n        0x0009 : \"GPSStatus\",\n        0x000A : \"GPSMeasureMode\",\n        0x000B : \"GPSDOP\",\n        0x000C : \"GPSSpeedRef\",\n        0x000D : \"GPSSpeed\",\n        0x000E : \"GPSTrackRef\",\n        0x000F : \"GPSTrack\",\n        0x0010 : \"GPSImgDirectionRef\",\n        0x0011 : \"GPSImgDirection\",\n        0x0012 : \"GPSMapDatum\",\n        0x0013 : \"GPSDestLatitudeRef\",\n        0x0014 : \"GPSDestLatitude\",\n        0x0015 : \"GPSDestLongitudeRef\",\n        0x0016 : \"GPSDestLongitude\",\n        0x0017 : \"GPSDestBearingRef\",\n        0x0018 : \"GPSDestBearing\",\n        0x0019 : \"GPSDestDistanceRef\",\n        0x001A : \"GPSDestDistance\",\n        0x001B : \"GPSProcessingMethod\",\n        0x001C : \"GPSAreaInformation\",\n        0x001D : \"GPSDateStamp\",\n        0x001E : \"GPSDifferential\"\n    };\n\n    var StringValues = EXIF.StringValues = {\n        ExposureProgram : {\n            0 : \"Not defined\",\n            1 : \"Manual\",\n            2 : \"Normal program\",\n            3 : \"Aperture priority\",\n            4 : \"Shutter priority\",\n            5 : \"Creative program\",\n            6 : \"Action program\",\n            7 : \"Portrait mode\",\n            8 : \"Landscape mode\"\n        },\n        MeteringMode : {\n            0 : \"Unknown\",\n            1 : \"Average\",\n            2 : \"CenterWeightedAverage\",\n            3 : \"Spot\",\n            4 : \"MultiSpot\",\n            5 : \"Pattern\",\n            6 : \"Partial\",\n            255 : \"Other\"\n        },\n        LightSource : {\n            0 : \"Unknown\",\n            1 : \"Daylight\",\n            2 : \"Fluorescent\",\n            3 : \"Tungsten (incandescent light)\",\n            4 : \"Flash\",\n            9 : \"Fine weather\",\n            10 : \"Cloudy weather\",\n            11 : \"Shade\",\n            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\n            13 : \"Day white fluorescent (N 4600 - 5400K)\",\n            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\n            15 : \"White fluorescent (WW 3200 - 3700K)\",\n            17 : \"Standard light A\",\n            18 : \"Standard light B\",\n            19 : \"Standard light C\",\n            20 : \"D55\",\n            21 : \"D65\",\n            22 : \"D75\",\n            23 : \"D50\",\n            24 : \"ISO studio tungsten\",\n            255 : \"Other\"\n        },\n        Flash : {\n            0x0000 : \"Flash did not fire\",\n            0x0001 : \"Flash fired\",\n            0x0005 : \"Strobe return light not detected\",\n            0x0007 : \"Strobe return light detected\",\n            0x0009 : \"Flash fired, compulsory flash mode\",\n            0x000D : \"Flash fired, compulsory flash mode, return light not detected\",\n            0x000F : \"Flash fired, compulsory flash mode, return light detected\",\n            0x0010 : \"Flash did not fire, compulsory flash mode\",\n            0x0018 : \"Flash did not fire, auto mode\",\n            0x0019 : \"Flash fired, auto mode\",\n            0x001D : \"Flash fired, auto mode, return light not detected\",\n            0x001F : \"Flash fired, auto mode, return light detected\",\n            0x0020 : \"No flash function\",\n            0x0041 : \"Flash fired, red-eye reduction mode\",\n            0x0045 : \"Flash fired, red-eye reduction mode, return light not detected\",\n            0x0047 : \"Flash fired, red-eye reduction mode, return light detected\",\n            0x0049 : \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n            0x004D : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n            0x004F : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n            0x0059 : \"Flash fired, auto mode, red-eye reduction mode\",\n            0x005D : \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n            0x005F : \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n        },\n        SensingMethod : {\n            1 : \"Not defined\",\n            2 : \"One-chip color area sensor\",\n            3 : \"Two-chip color area sensor\",\n            4 : \"Three-chip color area sensor\",\n            5 : \"Color sequential area sensor\",\n            7 : \"Trilinear sensor\",\n            8 : \"Color sequential linear sensor\"\n        },\n        SceneCaptureType : {\n            0 : \"Standard\",\n            1 : \"Landscape\",\n            2 : \"Portrait\",\n            3 : \"Night scene\"\n        },\n        SceneType : {\n            1 : \"Directly photographed\"\n        },\n        CustomRendered : {\n            0 : \"Normal process\",\n            1 : \"Custom process\"\n        },\n        WhiteBalance : {\n            0 : \"Auto white balance\",\n            1 : \"Manual white balance\"\n        },\n        GainControl : {\n            0 : \"None\",\n            1 : \"Low gain up\",\n            2 : \"High gain up\",\n            3 : \"Low gain down\",\n            4 : \"High gain down\"\n        },\n        Contrast : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        Saturation : {\n            0 : \"Normal\",\n            1 : \"Low saturation\",\n            2 : \"High saturation\"\n        },\n        Sharpness : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        SubjectDistanceRange : {\n            0 : \"Unknown\",\n            1 : \"Macro\",\n            2 : \"Close view\",\n            3 : \"Distant view\"\n        },\n        FileSource : {\n            3 : \"DSC\"\n        },\n\n        Components : {\n            0 : \"\",\n            1 : \"Y\",\n            2 : \"Cb\",\n            3 : \"Cr\",\n            4 : \"R\",\n            5 : \"G\",\n            6 : \"B\"\n        }\n    };\n\n    function addEvent(element, event, handler) {\n        if (element.addEventListener) {\n            element.addEventListener(event, handler, false);\n        } else if (element.attachEvent) {\n            element.attachEvent(\"on\" + event, handler);\n        }\n    }\n\n    function imageHasData(img) {\n        return !!(img.exifdata);\n    }\n\n\n    function base64ToArrayBuffer(base64, contentType) {\n        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n        base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        var binary = atob(base64);\n        var len = binary.length;\n        var buffer = new ArrayBuffer(len);\n        var view = new Uint8Array(buffer);\n        for (var i = 0; i < len; i++) {\n            view[i] = binary.charCodeAt(i);\n        }\n        return buffer;\n    }\n\n    function objectURLToBlob(url, callback) {\n        var http = new XMLHttpRequest();\n        http.open(\"GET\", url, true);\n        http.responseType = \"blob\";\n        http.onload = function(e) {\n            if (this.status == 200 || this.status === 0) {\n                callback(this.response);\n            }\n        };\n        http.send();\n    }\n\n    function getImageData(img, callback) {\n        function handleBinaryFile(binFile) {\n            var data = findEXIFinJPEG(binFile);\n            var iptcdata = findIPTCinJPEG(binFile);\n            img.exifdata = data || {};\n            img.iptcdata = iptcdata || {};\n            if (callback) {\n                callback.call(img);\n            }\n        }\n\n        if (img.src) {\n            if (/^data\\:/i.test(img.src)) { // Data URI\n                var arrayBuffer = base64ToArrayBuffer(img.src);\n                handleBinaryFile(arrayBuffer);\n\n            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n                var fileReader = new FileReader();\n                fileReader.onload = function(e) {\n                    handleBinaryFile(e.target.result);\n                };\n                objectURLToBlob(img.src, function (blob) {\n                    fileReader.readAsArrayBuffer(blob);\n                });\n            } else {\n                var http = new XMLHttpRequest();\n                http.onload = function() {\n                    if (this.status == 200 || this.status === 0) {\n                        handleBinaryFile(http.response);\n                    } else {\n                        throw \"Could not load image\";\n                    }\n                    http = null;\n                };\n                http.open(\"GET\", img.src, true);\n                http.responseType = \"arraybuffer\";\n                http.send(null);\n            }\n        } else if (window.FileReader && (img instanceof window.Blob || img instanceof window.File)) {\n            var fileReader = new FileReader();\n            fileReader.onload = function(e) {\n                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n                handleBinaryFile(e.target.result);\n            };\n\n            fileReader.readAsArrayBuffer(img);\n        }\n    }\n\n    function findEXIFinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            marker;\n\n        while (offset < length) {\n            if (dataView.getUint8(offset) != 0xFF) {\n                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n                return false; // not a valid marker, something is wrong\n            }\n\n            marker = dataView.getUint8(offset + 1);\n            if (debug) console.log(marker);\n\n            // we could implement handling for other markers here,\n            // but we're only looking for 0xFFE1 for EXIF data\n\n            if (marker == 225) {\n                if (debug) console.log(\"Found 0xFFE1 marker\");\n\n                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\n                // offset += 2 + file.getShortAt(offset+2, true);\n\n            } else {\n                offset += 2 + dataView.getUint16(offset+2);\n            }\n\n        }\n\n    }\n\n    function findIPTCinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength;\n\n\n        var isFieldSegmentStart = function(dataView, offset){\n            return (\n                dataView.getUint8(offset) === 0x38 &&\n                dataView.getUint8(offset+1) === 0x42 &&\n                dataView.getUint8(offset+2) === 0x49 &&\n                dataView.getUint8(offset+3) === 0x4D &&\n                dataView.getUint8(offset+4) === 0x04 &&\n                dataView.getUint8(offset+5) === 0x04\n            );\n        };\n\n        while (offset < length) {\n\n            if ( isFieldSegmentStart(dataView, offset )){\n\n                // Get the length of the name header (which is padded to an even number of bytes)\n                var nameHeaderLength = dataView.getUint8(offset+7);\n                if(nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n                // Check for pre photoshop 6 format\n                if(nameHeaderLength === 0) {\n                    // Always 4\n                    nameHeaderLength = 4;\n                }\n\n                var startOffset = offset + 8 + nameHeaderLength;\n                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\n                return readIPTCData(file, startOffset, sectionLength);\n\n                break;\n\n            }\n\n\n            // Not the marker, continue searching\n            offset++;\n\n        }\n\n    }\n    var IptcFieldMap = {\n        0x78 : 'caption',\n        0x6E : 'credit',\n        0x19 : 'keywords',\n        0x37 : 'dateCreated',\n        0x50 : 'byline',\n        0x55 : 'bylineTitle',\n        0x7A : 'captionWriter',\n        0x69 : 'headline',\n        0x74 : 'copyright',\n        0x0F : 'category'\n    };\n    function readIPTCData(file, startOffset, sectionLength){\n        var dataView = new DataView(file);\n        var data = {};\n        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n        var segmentStartPos = startOffset;\n        while(segmentStartPos < startOffset+sectionLength) {\n            if(dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos+1) === 0x02){\n                segmentType = dataView.getUint8(segmentStartPos+2);\n                if(segmentType in IptcFieldMap) {\n                    dataSize = dataView.getInt16(segmentStartPos+3);\n                    segmentSize = dataSize + 5;\n                    fieldName = IptcFieldMap[segmentType];\n                    fieldValue = getStringFromDB(dataView, segmentStartPos+5, dataSize);\n                    // Check if we already stored a value with this name\n                    if(data.hasOwnProperty(fieldName)) {\n                        // Value already stored with this name, create multivalue field\n                        if(data[fieldName] instanceof Array) {\n                            data[fieldName].push(fieldValue);\n                        }\n                        else {\n                            data[fieldName] = [data[fieldName], fieldValue];\n                        }\n                    }\n                    else {\n                        data[fieldName] = fieldValue;\n                    }\n                }\n\n            }\n            segmentStartPos++;\n        }\n        return data;\n    }\n\n\n\n    function readTags(file, tiffStart, dirStart, strings, bigEnd) {\n        var entries = file.getUint16(dirStart, !bigEnd),\n            tags = {},\n            entryOffset, tag,\n            i;\n\n        for (i=0;i<entries;i++) {\n            entryOffset = dirStart + i*12 + 2;\n            tag = strings[file.getUint16(entryOffset, !bigEnd)];\n            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n        }\n        return tags;\n    }\n\n\n    function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n        var type = file.getUint16(entryOffset+2, !bigEnd),\n            numValues = file.getUint32(entryOffset+4, !bigEnd),\n            valueOffset = file.getUint32(entryOffset+8, !bigEnd) + tiffStart,\n            offset,\n            vals, val, n,\n            numerator, denominator;\n\n        switch (type) {\n            case 1: // byte, 8-bit unsigned int\n            case 7: // undefined, 8-bit byte, value depending on field\n                if (numValues == 1) {\n                    return file.getUint8(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint8(offset + n);\n                    }\n                    return vals;\n                }\n\n            case 2: // ascii, 8-bit byte\n                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                return getStringFromDB(file, offset, numValues-1);\n\n            case 3: // short, 16 bit int\n                if (numValues == 1) {\n                    return file.getUint16(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint16(offset + 2*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 4: // long, 32 bit int\n                if (numValues == 1) {\n                    return file.getUint32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 5:    // rational = two long values, first is numerator, second is denominator\n                if (numValues == 1) {\n                    numerator = file.getUint32(valueOffset, !bigEnd);\n                    denominator = file.getUint32(valueOffset+4, !bigEnd);\n                    val = new Number(numerator / denominator);\n                    val.numerator = numerator;\n                    val.denominator = denominator;\n                    return val;\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        numerator = file.getUint32(valueOffset + 8*n, !bigEnd);\n                        denominator = file.getUint32(valueOffset+4 + 8*n, !bigEnd);\n                        vals[n] = new Number(numerator / denominator);\n                        vals[n].numerator = numerator;\n                        vals[n].denominator = denominator;\n                    }\n                    return vals;\n                }\n\n            case 9: // slong, 32 bit signed int\n                if (numValues == 1) {\n                    return file.getInt32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 10: // signed rational, two slongs, first is numerator, second is denominator\n                if (numValues == 1) {\n                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset+4, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 8*n, !bigEnd) / file.getInt32(valueOffset+4 + 8*n, !bigEnd);\n                    }\n                    return vals;\n                }\n        }\n    }\n\n    function getStringFromDB(buffer, start, length) {\n        var outstr = \"\";\n        for (n = start; n < start+length; n++) {\n            outstr += String.fromCharCode(buffer.getUint8(n));\n        }\n        return outstr;\n    }\n\n    function readEXIFData(file, start) {\n        if (getStringFromDB(file, start, 4) != \"Exif\") {\n            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n            return false;\n        }\n\n        var bigEnd,\n            tags, tag,\n            exifData, gpsData,\n            tiffOffset = start + 6;\n\n        // test for TIFF validity and endianness\n        if (file.getUint16(tiffOffset) == 0x4949) {\n            bigEnd = false;\n        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n            bigEnd = true;\n        } else {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return false;\n        }\n\n        if (file.getUint16(tiffOffset+2, !bigEnd) != 0x002A) {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n            return false;\n        }\n\n        var firstIFDOffset = file.getUint32(tiffOffset+4, !bigEnd);\n\n        if (firstIFDOffset < 0x00000008) {\n            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset+4, !bigEnd));\n            return false;\n        }\n\n        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n\n        if (tags.ExifIFDPointer) {\n            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n            for (tag in exifData) {\n                switch (tag) {\n                    case \"LightSource\" :\n                    case \"Flash\" :\n                    case \"MeteringMode\" :\n                    case \"ExposureProgram\" :\n                    case \"SensingMethod\" :\n                    case \"SceneCaptureType\" :\n                    case \"SceneType\" :\n                    case \"CustomRendered\" :\n                    case \"WhiteBalance\" :\n                    case \"GainControl\" :\n                    case \"Contrast\" :\n                    case \"Saturation\" :\n                    case \"Sharpness\" :\n                    case \"SubjectDistanceRange\" :\n                    case \"FileSource\" :\n                        exifData[tag] = StringValues[tag][exifData[tag]];\n                        break;\n\n                    case \"ExifVersion\" :\n                    case \"FlashpixVersion\" :\n                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n                        break;\n\n                    case \"ComponentsConfiguration\" :\n                        exifData[tag] =\n                            StringValues.Components[exifData[tag][0]] +\n                            StringValues.Components[exifData[tag][1]] +\n                            StringValues.Components[exifData[tag][2]] +\n                            StringValues.Components[exifData[tag][3]];\n                        break;\n                }\n                tags[tag] = exifData[tag];\n            }\n        }\n\n        if (tags.GPSInfoIFDPointer) {\n            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n            for (tag in gpsData) {\n                switch (tag) {\n                    case \"GPSVersionID\" :\n                        gpsData[tag] = gpsData[tag][0] +\n                            \".\" + gpsData[tag][1] +\n                            \".\" + gpsData[tag][2] +\n                            \".\" + gpsData[tag][3];\n                        break;\n                }\n                tags[tag] = gpsData[tag];\n            }\n        }\n\n        return tags;\n    }\n\n    EXIF.getData = function(img, callback) {\n        if ((img instanceof Image || img instanceof HTMLImageElement) && !img.complete) return false;\n\n        if (!imageHasData(img)) {\n            getImageData(img, callback);\n        } else {\n            if (callback) {\n                callback.call(img);\n            }\n        }\n        return true;\n    }\n\n    EXIF.getTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.exifdata[tag];\n    }\n\n    EXIF.getAllTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.exifdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n\n    EXIF.pretty = function(img) {\n        if (!imageHasData(img)) return \"\";\n        var a,\n            data = img.exifdata,\n            strPretty = \"\";\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                if (typeof data[a] == \"object\") {\n                    if (data[a] instanceof Number) {\n                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n                    } else {\n                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n                    }\n                } else {\n                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n                }\n            }\n        }\n        return strPretty;\n    }\n\n    EXIF.readFromBinaryFile = function(file) {\n        return findEXIFinJPEG(file);\n    }\n\n    if (typeof define === 'function' && define.amd) {\n        define('exif-js', [], function() {\n            return EXIF;\n        });\n    }\n}.call(this));\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/exif-js/exif.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}